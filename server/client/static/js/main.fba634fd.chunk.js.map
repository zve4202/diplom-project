{"version":3,"sources":["reportWebVitals.js","utils/history.js","services/localStorage.service.js","services/http.service.js","services/auth.service.js","store/auth.js","services/category.service.js","utils/isOutdated.js","store/categories.js","services/format.service.js","store/formats.js","services/product.service.js","store/products.js","services/role.service.js","store/roles.js","store/setting.js","components/page/basketPage/applyForm/deliveries.js","services/basket.service.js","store/basket.js","services/user.service.js","store/users.js","services/label.service.js","store/labels.js","services/origin.service.js","store/origin.js","services/style.service.js","store/style.js","services/reminder.service.js","store/reminders.js","store/index.js","assets/brand/favicon.ico","components/ui/navbar/menuBasket.jsx","components/ui/navbar/menuAdmin.jsx","components/ui/navbar/menuProfile.jsx","components/ui/navbar/index.js","components/page/basketPage/menu.js","components/common/wrappers/workScreen.jsx","components/common/wrappers/content.jsx","components/common/table/tableHeader.jsx","components/common/table/tableBody.jsx","components/common/pagination/selectPageSize.jsx","components/common/pagination/paginator.jsx","components/common/pagination/paginationWrapper.jsx","components/common/table/table.jsx","components/common/table/index.js","components/ui/barcode.jsx","assets/defaults/barcode.png","assets/defaults/audio-cd.jpg","components/page/productListPage/table/productPicture.jsx","components/common/form/statusText.jsx","components/page/basketPage/table/basketQty.jsx","components/page/productListPage/table/productPrice.jsx","components/page/productListPage/table/productName.jsx","components/page/basketPage/table/basketTable.jsx","components/page/basketPage/applyForm/payments.js","utils/validator.js","components/common/form/textEdit.jsx","components/common/form/maskEdit.jsx","components/page/basketPage/applyForm/placeIdField.jsx","components/common/form/selectEdit.jsx","components/common/form/memoEdit.jsx","components/page/basketPage/applyForm/applyMap.js","components/page/basketPage/applyForm/utils.js","utils/sklonenie.js","components/page/basketPage/applyForm/alerter.jsx","components/page/basketPage/applyForm/applyForm.jsx","components/common/wrappers/sideBar.jsx","components/common/backButton.jsx","dialogs/messageDialog.jsx","components/page/basketPage/undoBasketButton.jsx","components/page/basketPage/applyBasketButton.jsx","components/page/basketPage/basketTotals.jsx","components/page/basketPage/payForm/payForm.jsx","components/page/basketPage/basketSidebar.jsx","components/page/basketPage/basketPage.jsx","components/page/basketPage/index.jsx","layouts/basket.jsx","components/common/wrappers/navTabs.jsx","components/common/form/checkBoxEdit.jsx","components/ui/login/loginForm.jsx","components/common/form/radioEdit.jsx","utils/debounce.js","components/ui/login/registerForm.jsx","layouts/login.jsx","components/page/productListPage/table/productQty.jsx","components/page/productListPage/table/productTable.jsx","components/page/productListPage/seacher/selectField.jsx","components/page/productListPage/seacher/productSearch.jsx","components/page/productListPage/productCategory.jsx","components/ui/productPicture.jsx","components/page/productListPage/card/productMenuBasket.jsx","components/page/productListPage/card/productCard.jsx","components/page/productListPage/productListPage.jsx","components/page/productListPage/index.js","layouts/main.jsx","components/page/usersPages/usersCategory.jsx","components/page/usersPages/role.jsx","components/page/usersPages/user/userPicture.jsx","components/page/usersPages/usersTable.jsx","components/page/usersPages/usersSearch.jsx","components/page/usersPages/usersListPage.jsx","components/page/adminPage/adminSideBar.jsx","components/page/adminPage/menu.js","components/page/adminPage/index.js","components/page/adminPage/adminPage.jsx","layouts/admin.jsx","components/page/usersPages/user/userSidebar.jsx","components/page/usersPages/user/passwordControl.jsx","components/page/usersPages/user/roleControl.jsx","components/common/form/loadImage.jsx","components/page/usersPages/user/userEditPage.jsx","components/page/usersPages/orders/index.js","components/page/usersPages/orders/userOrders.jsx","components/page/usersPages/user/menu.js","components/page/usersPages/user/userPage.jsx","layouts/users.jsx","components/common/protectedRoute.jsx","layouts/logOut.jsx","App.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","history","createBrowserHistory","APP_KEY","STAYON_KEY","TOKEN_KEY","REFRESH_KEY","EXPIRES_KEY","stayOn","localStorage","getItem","getValue","key","sessionStorage","setValue","value","setItem","setTokens","refreshToken","accessToken","expiresIn","expiresDate","Date","getTime","getAccessToken","getRefreshToken","removeAuthData","removeItem","getTokenExpiresDate","http","axios","create","baseURL","configFile","apiEndpoint","checkParams","params","paramsName","String","prototype","concat","JSON","parse","pagination","query","sort","newParams","page","currentPage","limit","pageSize","Object","keys","forEach","error","console","log","message","interceptors","request","use","config","url","endsWith","slice","now","authService","refresh","data","token","headers","authorization","Promise","reject","response","res","expectedErrors","status","toast","info","httpService","get","post","put","patch","delete","httpAuth","AuthService","signUp","content","signIn","getAuthUser","initialState","authUser","isAdmin","isLoading","authSlice","createSlice","name","reducers","requested","state","resived","action","payload","role","requestFailed","update","actions","authReducer","reducer","email","password","redirect","rest","dispatch","getState","Service","push","code","categoryEndpoint","CategoryService","id","fetchAll","isOutdated","date","minute","entities","categorySlice","lastFetch","categoriesReducer","loadCategories","categories","endpoint","FormatService","formatsSlice","formatsReducer","endPoint","ProductService","productsSlice","docs","totalDocs","productLoading","productLoaded","productsReducer","loadProducts","roleEndpoint","RoleService","rolesSlice","rolesReducer","loadRoles","roles","order","settingConfig","admin","selectedMenu","path","icon","product","users","orders","selectedTab","basket","settingSlice","oldConfig","oldQuery","stringify","settingReducer","updateSetting","byRussianPost","label","payment","deliveryPrice","byCompanySDEK","byCourier","onPickupPoint","basketService","getItems","deleteAll","check","topay","apply","disassemble","calcTotals","totals","totalQty","totalPrice","item","qty","price","basketSlice","_id","userId","deliveryInfo","products","docsLoading","productsLoading","requestedItems","itemsResived","index","findIndex","doc","remove","newdocs","filter","newprods","clear","updateInfo","basketReducer","loadBasket","updateDlvInfo","updateBasket","find","orderId","removeBasketItem","payOrder","sumOfPay","auth","pathname","from","basketData","getBasketQty","getTotals","fullPrice","delivery","userEndpoint","UserService","usersSlice","isUpdated","removeUpdated","usersReducer","loadUsers","user","getUser","LabelService","labelSlice","labelsReducer","originService","originSlice","originsReducer","styleSlice","stylesReducer","reminderService","titleId","remindersReducer","updateReminder","addReminder","removeReminder","getReminder","reminder","rootReducer","combineReducers","formats","labels","origins","styles","setting","createStore","configureStore","middleware","getDefaultMiddleware","process","devTools","MenuBasket","useSelector","productLabel","className","to","MenuAdmin","MenuProfile","useState","isOpen","setOpen","onClick","prevState","NavBar","src","logo","alt","width","height","appTitle","caption","WorkScreen","children","ContentWrapper","menu","TableHeader","onReload","columns","headered","selectedSort","useDispatch","renderSort","column","sortable","headerClick","newsort","handleSort","map","undefined","scope","style","defaultProps","TableBody","loading","renderContent","component","_","length","colSpan","sizeItems","SelectPageSize","onChangePageSize","onChange","target","Number","option","Paginator","pager","setPage","setPageSize","pages","classNames","disabled","active","totalPages","totalItems","endIndex","PaginationWrapper","props","saveSetting","bind","getPager","selectPage","this","prevProps","setState","startPage","endPage","Math","ceil","showPages","startIndex","min","range","paginator","React","Component","initialPage","mapDispatchToProps","connect","Table","inputs","focused","setInputs","handleKeyDown","handleFocus","Array","call","document","querySelectorAll","focus","select","window","scrollTo","event","self","includes","keyCode","preventDefault","indexOf","input","bordered","striped","onPageChange","debounce","onKeyDown","e","onFocus","Barcode","barcode","ProductPicture","size","title","image","pictureSrc","defPicture","defautProps","statuses","checked","needpay","new","assembled","pendingPayment","sent","delivered","cancelled","partly","unavailable","StatusText","classname","displayName","BasketQty","priceRub","inputB","useRef","inputR","savedQty","reminderNeedFocus","setReminderNeedFocus","useEffect","current","updateOnServer","numQty","ref","type","placeholder","result","max","checkValue","replace","onBlur","needQty","nodeName","parentNode","need","text","isNaN","ProductPrice","ProductName","article","artist","BasketTable","getItemData","count","format","origin","priceFmt","Intl","NumberFormat","payOnDelivery","visible","acquiring","sberbankReceipt","cashInHand","isRequired","isEmail","isPhone","isCardNumber","isMonthYear","isCVC","isIndex","isCapitalSymbol","isContainDigit","isLessThan","requiredIF","validator","testData","errors","validate","validateMethod","notValid","nextCheck","isArray","values","inField","trim","test","fieldName","nestedConfig","method","TextEdit","forwardRef","readOnly","showPassword","setShowPassword","nameCase","textTransform","htmlFor","autoCapitalize","MaskEdit","inputMode","autoComplete","onInput","inputNumbersValue","getInputNumbersValue","selectionStart","formattedInputValue","firstSymbols","substring","onPhoneInput","onIndexInput","onCardInput","month","parseInt","toString","currYear","getFullYear","onMonYearInput","onCvcInput","onPaste","pasted","clipboardData","pastedText","getData","inputValue","PlaceIdField","defaultOption","options","isSelect","handleChange","getInputClasses","SelectEdit","optionsArray","MemoEdit","methonds","getMethods","i","arrName","other","placeId","attr","required","persone","group","phone","deliveries","payments","address","note","validatorConfig","defaultData","createDefaults","defMap","valueOfName","addValidatorConfig","creatValidConfiguration","sklonenie","number","txt","CheckAlerter","checkedAt","refreshContent","initDeadline","timerId","setInterval","clearInterval","diff","setDate","getDate","diffDays","floor","diffHours","diffMinutes","hours","minutes","hoursLeft","minutesLeft","iconInfo","iconWhatAbout","iconExclamation","iconExclamationHard","iconKirdyk","showText","ApplyForm","applyRefs","createRef","handleCange","currName","isValid","setErrors","p","gKey","classes","fieldsMap","getOptions","getReadOnly","classCol","createItem","groups","createGroups","groupWrapper","step","createControls","defaultMenu","items","SideBarWrapper","backBtn","selected","onItemSelect","menuAfterChildren","BackButton","tooltip","useHistory","goBack","gialogYesNo","buttonOK","yesNo","onAccept","root","querySelector","dialog","dialogId","createNode","class","tabindex","comtent","header","innerText","body","footer","btn","messageDialog","addEventListener","appendChild","Modal","toggle","tagName","parent","node","createElement","att","createAttribute","setAttributeNode","UndoBasketButton","question","undo","ApplyBasketButton","isDisabled","todo","BasketTotals","nf","cardNumber","dateEnd","cvcCode","PayForm","creditCard","onSubmit","handleSubmit","BasketSidebar","onCheckAndPay","setTimeout","location","BasketPage","handleReload","setCurrStep","setStepName","handleCheckAndPay","checkBasket","applyBasket","loadBasketItems","Basket","NavTabs","maket","onSelect","CheckEdit","LoginForm","setData","enterError","setEnterError","RadioEdit","timer","sex","RegisterForm","login","register","Login","useParams","formType","setFormType","ProductQty","removeOne","inputTitle","ProductTable","SelectField","selectRef","fn","ms","fnCall","arguments","clearTimeout","ProductSearch","onSearch","category","selects","debouncedSearch","handleSearchQuery","newQuery","reduce","previousValue","currentValue","queryArtist","search","inStock","queryShow","show","needReload","prev","curr","CategoryList","handleSelectQuery","small","picture","ProductMenuBasket","ProductCard","productScheme","cation","field","quality","price_ru","year","getText","fields","split","padding","ProductListPage","productId","setProduct","getProduct","loaded","styleService","Main","Role","roleId","color","UserPicture","UserTable","UsersSearch","UsersListPage","AdminSideBar","pathes","AdminPage","Admin","UserSideBar","PasswordControl","onShow","hideIf","change","setChange","prevSatte","defaulProps","RoleControl","propTypes","PropTypes","string","oneOfType","arrayOf","LoadImage","fileChangedHandler","err","fileInput","files","Resizer","imageFileResizer","uri","accept","multiple","display","click","canLoad","toLowerCase","UserEditPage","sameUser","changed","updateUser","newData","new_password","defaultValue","UserOrders","orderName","afterChildren","UserPage","Users","edit","ProtectedRoute","render","LogOut","store","App","needRefresh","exact","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fba634fd.chunk.js","sourcesContent":["const reportWebVitals = (onPerfEntry) => {\r\n    if (onPerfEntry && onPerfEntry instanceof Function) {\r\n        import(\"web-vitals\").then(\r\n            ({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n                getCLS(onPerfEntry);\r\n                getFID(onPerfEntry);\r\n                getFCP(onPerfEntry);\r\n                getLCP(onPerfEntry);\r\n                getTTFB(onPerfEntry);\r\n            }\r\n        );\r\n    }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { createBrowserHistory } from \"history\";\r\n\r\nconst history = createBrowserHistory();\r\nexport default history;\r\n","const APP_KEY = \"music-shop-\";\r\n\r\nconst STAYON_KEY = \"jwt-stay-on\";\r\nconst TOKEN_KEY = \"jwt-base-active\";\r\nconst REFRESH_KEY = \"jwt-refresh-token\";\r\nconst EXPIRES_KEY = \"jwt-expires\";\r\n\r\nfunction stayOn() {\r\n    const stayOn = localStorage.getItem(APP_KEY + STAYON_KEY);\r\n    return stayOn && stayOn === \"true\";\r\n}\r\n\r\nexport function getValue(key) {\r\n    if (stayOn()) {\r\n        return localStorage.getItem(APP_KEY + key);\r\n    } else {\r\n        return sessionStorage.getItem(APP_KEY + key);\r\n    }\r\n}\r\nexport function removeValue(key) {\r\n    if (stayOn()) {\r\n        localStorage.removeItem(APP_KEY + key);\r\n    } else {\r\n        sessionStorage.removeItem(APP_KEY + key);\r\n    }\r\n}\r\nexport function setValue(key, value) {\r\n    if (stayOn()) {\r\n        localStorage.setItem(APP_KEY + key, value);\r\n    } else {\r\n        sessionStorage.setItem(APP_KEY + key, value);\r\n    }\r\n}\r\nexport function setTokens({\r\n    stayOn,\r\n    refreshToken,\r\n    accessToken,\r\n    expiresIn = 3600\r\n}) {\r\n    localStorage.setItem(APP_KEY + STAYON_KEY, stayOn);\r\n    const expiresDate = new Date().getTime() + expiresIn * 1000;\r\n    if (stayOn) {\r\n        localStorage.setItem(APP_KEY + TOKEN_KEY, accessToken);\r\n        localStorage.setItem(APP_KEY + REFRESH_KEY, refreshToken);\r\n        localStorage.setItem(APP_KEY + EXPIRES_KEY, expiresDate);\r\n    } else {\r\n        sessionStorage.setItem(APP_KEY + TOKEN_KEY, accessToken);\r\n        sessionStorage.setItem(APP_KEY + REFRESH_KEY, refreshToken);\r\n        sessionStorage.setItem(APP_KEY + EXPIRES_KEY, expiresDate);\r\n    }\r\n}\r\nexport function getAccessToken() {\r\n    if (stayOn()) {\r\n        return localStorage.getItem(APP_KEY + TOKEN_KEY);\r\n    } else {\r\n        return sessionStorage.getItem(APP_KEY + TOKEN_KEY);\r\n    }\r\n}\r\nexport function getRefreshToken() {\r\n    if (stayOn()) {\r\n        return localStorage.getItem(APP_KEY + REFRESH_KEY);\r\n    } else {\r\n        return sessionStorage.getItem(APP_KEY + REFRESH_KEY);\r\n    }\r\n}\r\nexport function removeAuthData() {\r\n    if (stayOn()) {\r\n        localStorage.removeItem(APP_KEY + STAYON_KEY);\r\n        localStorage.removeItem(APP_KEY + TOKEN_KEY);\r\n        localStorage.removeItem(APP_KEY + REFRESH_KEY);\r\n        localStorage.removeItem(APP_KEY + EXPIRES_KEY);\r\n    } else {\r\n        sessionStorage.removeItem(APP_KEY + TOKEN_KEY);\r\n        sessionStorage.removeItem(APP_KEY + REFRESH_KEY);\r\n        sessionStorage.removeItem(APP_KEY + EXPIRES_KEY);\r\n    }\r\n}\r\nexport function getTokenExpiresDate() {\r\n    if (stayOn()) {\r\n        return localStorage.getItem(APP_KEY + EXPIRES_KEY);\r\n    } else {\r\n        return sessionStorage.getItem(APP_KEY + EXPIRES_KEY);\r\n    }\r\n}\r\n\r\nconst localStorageService = {\r\n    setTokens,\r\n    getAccessToken,\r\n    getRefreshToken,\r\n    removeAuthData,\r\n    getTokenExpiresDate,\r\n    getValue,\r\n    removeValue,\r\n    setValue\r\n};\r\nexport default localStorageService;\r\n","import axios from \"axios\";\r\n// import logger from \"./log.service\";\r\nimport configFile from \"../config.json\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n    getAccessToken,\r\n    getRefreshToken,\r\n    getTokenExpiresDate,\r\n    setTokens,\r\n    getValue\r\n} from \"./localStorage.service\";\r\nimport authService from \"./auth.service\";\r\n\r\nconst http = axios.create({ baseURL: configFile.apiEndpoint });\r\n\r\nconst checkParams = ({ params }) => {\r\n    if (params && params.paramsName) {\r\n        try {\r\n            const { paramsName } = params;\r\n            delete params.paramsName;\r\n            const key = String.prototype.concat(\"setting-\", paramsName);\r\n            const { pagination, query, sort } = JSON.parse(getValue(key));\r\n            const newParams = {\r\n                page: pagination.currentPage,\r\n                limit: pagination.pageSize,\r\n                ...sort,\r\n                ...params\r\n            };\r\n\r\n            Object.keys(query).forEach((key) => {\r\n                if (key !== \"show\") {\r\n                    const value = query[key];\r\n                    if (value) {\r\n                        newParams[key] = value;\r\n                    }\r\n                }\r\n            });\r\n            return newParams;\r\n        } catch (error) {\r\n            console.log({ error: error.message });\r\n        }\r\n    }\r\n\r\n    return params;\r\n};\r\n\r\nhttp.interceptors.request.use(\r\n    async function (config) {\r\n        if (config.params) {\r\n            config.params = checkParams(config);\r\n        }\r\n        if (config.url.endsWith(\"/\")) {\r\n            config.url = config.url.slice(0, -1);\r\n        }\r\n        const refreshToken = getRefreshToken();\r\n        if (refreshToken) {\r\n            const expiresDate = getTokenExpiresDate();\r\n            if (expiresDate < Date.now()) {\r\n                const data = await authService.refresh(refreshToken);\r\n\r\n                if (data) {\r\n                    setTokens(data);\r\n                }\r\n            }\r\n        }\r\n        const token = getAccessToken();\r\n        if (token) {\r\n            config.headers = {\r\n                ...config.headers,\r\n                authorization: `Bearer ${token}`\r\n            };\r\n        }\r\n        return config;\r\n    },\r\n    function (error) {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nhttp.interceptors.response.use(\r\n    (res) => {\r\n        return res;\r\n    },\r\n    function (error) {\r\n        const { response } = error;\r\n        const expectedErrors =\r\n            response && response.status >= 400 && response.status < 500;\r\n        if (response.status === 401) {\r\n            toast.info(\"Войдите в систему!!!\");\r\n        } else if (!expectedErrors) {\r\n            toast.error(response.message);\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\nconst httpService = {\r\n    get: http.get,\r\n    post: http.post,\r\n    put: http.put,\r\n    patch: http.patch,\r\n    delete: http.delete\r\n};\r\nexport default httpService;\r\n","import axios from \"axios\";\r\nimport httpService from \"./http.service\";\r\n\r\nimport configFile from \"../config.json\";\r\n\r\nconst httpAuth = axios.create({\r\n    baseURL: configFile.apiEndpoint + \"auth/\"\r\n});\r\n\r\nconst AuthService = {\r\n    signUp: async (content) => {\r\n        const { data } = await httpAuth.post(\"signUp\", content);\r\n        return data;\r\n    },\r\n    signIn: async (content) => {\r\n        const { data } = await httpAuth.post(\"signIn\", content);\r\n        return data;\r\n    },\r\n    refresh: async (refreshToken) => {\r\n        const { data } = await httpAuth.post(\"token\", {\r\n            refreshToken\r\n        });\r\n        return data;\r\n    },\r\n    getAuthUser: async () => {\r\n        const { data } = await httpService.get(\"user/auth\");\r\n        return data;\r\n    }\r\n};\r\nexport default AuthService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport history from \"../utils/history\";\r\nimport Service from \"../services/auth.service\";\r\nimport {\r\n    getAccessToken,\r\n    removeAuthData,\r\n    setTokens\r\n} from \"../services/localStorage.service\";\r\n\r\nconst initialState = {\r\n    authUser: null,\r\n    isAdmin: false,\r\n    isLoading: true,\r\n    error: null\r\n};\r\n\r\nconst authSlice = createSlice({\r\n    name: \"auth\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = initialState;\r\n        },\r\n        resived(state, action) {\r\n            state.authUser = action.payload;\r\n            state.isAdmin = state.authUser && state.authUser.role === \"admin\";\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.error = action.payload;\r\n            state.isLoading = false;\r\n        },\r\n        update(state, action) {\r\n            state.authUser = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: authReducer } = authSlice;\r\nconst { update, resived, requested, requestFailed } = actions;\r\n\r\nexport const loadAuthUser = () => async (dispatch) => {\r\n    dispatch(requested());\r\n    const token = getAccessToken();\r\n    if (token) {\r\n        try {\r\n            const { content } = await Service.getAuthUser();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    } else {\r\n        dispatch(resived(null));\r\n    }\r\n};\r\n\r\nexport const signIn =\r\n    ({ email, password, stayOn, redirect }) =>\r\n    async (dispatch, getState) => {\r\n        dispatch(requested());\r\n        try {\r\n            const data = await Service.signIn({\r\n                email,\r\n                password\r\n            });\r\n            setTokens({ ...data, stayOn });\r\n            dispatch(resived(data.content));\r\n            history.push(redirect);\r\n        } catch (error) {\r\n            const { code, message } = error.response.data.error;\r\n            if (code === 400) {\r\n                switch (message) {\r\n                    case \"EMAIL_NOT_FOUND\":\r\n                    case \"INVALID_PASSWORD\":\r\n                        dispatch(\r\n                            requestFailed(\r\n                                \"Email или пароль введены некорректно\"\r\n                            )\r\n                        );\r\n                        break;\r\n                    default:\r\n                        dispatch(\r\n                            requestFailed(\r\n                                \"Слишком много попыток входа. Попробуйте позже\"\r\n                            )\r\n                        );\r\n                        break;\r\n                }\r\n            } else dispatch(requestFailed(message));\r\n        }\r\n    };\r\n\r\nexport const signUp =\r\n    ({ email, password, stayOn, redirect, ...rest }) =>\r\n    async (dispatch, getState) => {\r\n        dispatch(requested());\r\n        try {\r\n            const data = await Service.signUp({\r\n                email,\r\n                password,\r\n                ...rest\r\n            });\r\n            setTokens({ ...data, stayOn });\r\n            dispatch(resived(data.content));\r\n            history.push(redirect);\r\n        } catch (error) {\r\n            const { code, message } = error.response.data.error || error;\r\n            if (code === 400) {\r\n                if (message === \"EMAIL_EXISTS\") {\r\n                    dispatch(\r\n                        requestFailed(\r\n                            \"Пользователь с таким Email уже существует\"\r\n                        )\r\n                    );\r\n                }\r\n            } else dispatch(requestFailed(message));\r\n        }\r\n    };\r\n\r\nexport const signOut = () => (dispatch, getState) => {\r\n    removeAuthData();\r\n    dispatch(update(null));\r\n};\r\n\r\nexport const getAuth = () => (state) => ({\r\n    authUser: state.auth.authUser,\r\n    isAdmin: state.auth.isAdmin\r\n});\r\nexport const getAuthLoading = () => (state) => state.auth.isLoading;\r\nexport const getAuthError = () => (state) => state.auth.error;\r\n\r\nexport default authReducer;\r\n","import httpService from \"./http.service\";\r\nconst categoryEndpoint = \"category/\";\r\n\r\nconst CategoryService = {\r\n    update: async (id, content) => {\r\n        const { data } = await httpService.put(categoryEndpoint + id, content);\r\n        return data;\r\n    },\r\n    get: async (id) => {\r\n        const { data } = await httpService.get(categoryEndpoint + id);\r\n        return data;\r\n    },\r\n    fetchAll: async () => {\r\n        const { data } = await httpService.get(categoryEndpoint);\r\n        return data;\r\n    },\r\n    create: async (content) => {\r\n        const { data } = await httpService.post(categoryEndpoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(categoryEndpoint + id);\r\n        return data;\r\n    }\r\n};\r\nexport default CategoryService;\r\n","function isOutdated(date, minute = 60) {\r\n    return !date || Date.now() - date > minute * 60 * 1000;\r\n}\r\n\r\nexport default isOutdated;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport CategoryService from \"../services/category.service\";\r\nimport isOutdated from \"../utils/isOutdated\";\r\n\r\nconst initialState = { entities: [], isLoading: true, error: null };\r\n\r\nconst categorySlice = createSlice({\r\n    name: \"categories\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = initialState;\r\n        },\r\n        resived(state, action) {\r\n            state.entities = action.payload;\r\n            state.lastFetch = Date.now();\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: categoriesReducer } = categorySlice;\r\nconst { resived, requested, requestFailed } = actions;\r\n\r\nexport const loadCategories = () => async (dispatch, getState) => {\r\n    const { lastFetch } = getState().categories;\r\n    if (isOutdated(lastFetch)) {\r\n        dispatch(requested());\r\n        try {\r\n            const { content } = await CategoryService.fetchAll();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    }\r\n};\r\n\r\nexport const getCategories = () => (state) => state.categories.entities;\r\nexport const getCategory = (id) => (state) =>\r\n    state.categories.entities.find((role) => role._id === id);\r\nexport const getCategoryLoading = () => (state) => state.categories.isLoading;\r\nexport const getCategoryError = () => (state) => state.categories.error;\r\n\r\nexport default categoriesReducer;\r\n","import httpService from \"./http.service\";\r\nconst endpoint = \"format/\";\r\n\r\nconst FormatService = {\r\n    update: async (id, content) => {\r\n        const { data } = await httpService.put(endpoint + id, content);\r\n        return data;\r\n    },\r\n    get: async (id) => {\r\n        const { data } = await httpService.get(endpoint + id);\r\n        return data;\r\n    },\r\n    fetchAll: async () => {\r\n        const { data } = await httpService.get(endpoint);\r\n        return data;\r\n    },\r\n    create: async (content) => {\r\n        const { data } = await httpService.post(endpoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(endpoint + id);\r\n        return data;\r\n    }\r\n};\r\nexport default FormatService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport FormatService from \"../services/format.service\";\r\nimport isOutdated from \"../utils/isOutdated\";\r\n\r\nconst initialState = { entities: [], isLoading: true, error: null };\r\n\r\nconst formatsSlice = createSlice({\r\n    name: \"formats\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = initialState;\r\n        },\r\n        resived(state, action) {\r\n            state.entities = action.payload;\r\n            state.lastFetch = Date.now();\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: formatsReducer } = formatsSlice;\r\nconst { resived, requested, requestFailed } = actions;\r\n\r\nexport const loadFormats = () => async (dispatch, getState) => {\r\n    const { lastFetch } = getState().formats;\r\n    if (isOutdated(lastFetch)) {\r\n        dispatch(requested());\r\n        try {\r\n            const { content } = await FormatService.fetchAll();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    }\r\n};\r\n\r\nexport const getFormats = () => (state) => state.formats.entities;\r\nexport const getFormat = (id) => (state) =>\r\n    state.formats.entities.find((item) => item._id === id);\r\nexport const getFormatsLoading = () => (state) => state.formats.isLoading;\r\nexport const getFormatsError = () => (state) => state.formats.error;\r\n\r\nexport default formatsReducer;\r\n","import httpService from \"./http.service\";\r\nconst endPoint = \"product/\";\r\n\r\nconst ProductService = {\r\n    update: async (id, content) => {\r\n        const { data } = await httpService.put(endPoint + id, content);\r\n        return data;\r\n    },\r\n    get: async (id) => {\r\n        const { data } = await httpService.get(endPoint + id);\r\n        return data;\r\n    },\r\n    fetchAll: async (params) => {\r\n        const { data } = await httpService.get(endPoint, {\r\n            params\r\n        });\r\n        return data;\r\n    },\r\n    create: async (content) => {\r\n        const { data } = await httpService.post(endPoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(endPoint + id);\r\n        return data;\r\n    }\r\n};\r\nexport default ProductService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport Service from \"../services/product.service\";\r\n\r\n// const initialSearch = {\r\n//     category: null,\r\n//     text: \"\"\r\n// };\r\n\r\nconst initialState = {\r\n    // search: { ...initialSearch },\r\n    docs: [],\r\n    totalDocs: 0,\r\n    productLoading: true,\r\n    productLoaded: false,\r\n    error: null\r\n};\r\n\r\nconst productsSlice = createSlice({\r\n    name: \"product\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state.productLoaded = false;\r\n            state.productLoading = true;\r\n        },\r\n        resived(state, action) {\r\n            const { docs, totalDocs } = action.payload;\r\n            state.docs = docs;\r\n            state.totalDocs = totalDocs;\r\n            state.productLoading = false;\r\n            state.productLoaded = true;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.productLoading = false;\r\n            state.productLoaded = false;\r\n\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { name, actions, reducer: productsReducer } = productsSlice;\r\nconst { resived, requested, requestFailed } = actions;\r\n\r\nexport const loadProducts = () => async (dispatch, getState) => {\r\n    dispatch(requested());\r\n    try {\r\n        const { content } = await Service.fetchAll({\r\n            paramsName: name\r\n        });\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const getProduct = (id) => (state) =>\r\n    state.products.docs.find((item) => item._id === id);\r\nexport const getProducts = () => (state) => state.products;\r\nexport const getProductError = () => (state) => state.products.error;\r\n\r\nexport default productsReducer;\r\n","import httpService from \"./http.service\";\r\nconst roleEndpoint = \"role/\";\r\n\r\nconst RoleService = {\r\n    update: async (id, content) => {\r\n        const { data } = await httpService.put(roleEndpoint + id, content);\r\n        return data;\r\n    },\r\n    get: async (id) => {\r\n        const { data } = await httpService.get(roleEndpoint + id);\r\n        return data;\r\n    },\r\n    fetchAll: async () => {\r\n        const { data } = await httpService.get(roleEndpoint);\r\n        return data;\r\n    },\r\n    create: async (content) => {\r\n        const { data } = await httpService.post(roleEndpoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(roleEndpoint + id);\r\n        return data;\r\n    }\r\n};\r\nexport default RoleService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport RoleService from \"../services/role.service\";\r\nimport isOutdated from \"../utils/isOutdated\";\r\n\r\nconst initialState = {\r\n    entities: [],\r\n    isLoading: true,\r\n    error: null\r\n};\r\n\r\nconst rolesSlice = createSlice({\r\n    name: \"roles\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = initialState;\r\n        },\r\n        resived(state, action) {\r\n            state.entities = action.payload;\r\n            state.lastFetch = Date.now();\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: rolesReducer } = rolesSlice;\r\nconst { resived, requested, requestFailed } = actions;\r\n\r\nexport const loadRoles = () => async (dispatch, getState) => {\r\n    const { lastFetch } = getState().roles;\r\n    if (isOutdated(lastFetch)) {\r\n        dispatch(requested());\r\n        try {\r\n            const { content } = await RoleService.fetchAll();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    }\r\n};\r\n\r\nexport const getRoles = () => (state) => state.roles.entities;\r\nexport const getRole = (id) => (state) =>\r\n    state.roles.entities.find((role) => role._id === id);\r\nexport const getRolesLoading = () => (state) => state.roles.isLoading;\r\nexport const getRolesError = () => (state) => state.roles.error;\r\n\r\nexport default rolesReducer;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport { getValue, setValue } from \"../services/localStorage.service\";\r\n\r\nconst pagination = {\r\n    pageSize: 50,\r\n    currentPage: 1\r\n};\r\n\r\nconst query = {};\r\n\r\nconst sort = {\r\n    sort: \"name\",\r\n    order: 1\r\n};\r\n\r\nconst settingConfig = {\r\n    admin: {\r\n        selectedMenu: {\r\n            path: \"users\",\r\n            name: \"ПОЛЬЗОВАТЕЛИ\",\r\n            icon: \"bi-people-fill\"\r\n        }\r\n    },\r\n    product: {\r\n        query: { ...query },\r\n        pagination: { ...pagination },\r\n        sort: { ...sort }\r\n    },\r\n    users: {\r\n        query: { ...query },\r\n        pagination: { ...pagination },\r\n        sort: { ...sort },\r\n        selectedMenu: \"orders\"\r\n    },\r\n    orders: {\r\n        query: { ...query },\r\n        pagination: { ...pagination },\r\n        sort: { ...sort },\r\n        selectedTab: \"current\"\r\n    },\r\n\r\n    basket: {\r\n        pagination: { ...pagination },\r\n        sort: { ...sort }\r\n    }\r\n};\r\nconst initialState = {\r\n    config: { ...settingConfig },\r\n    isLoading: true,\r\n    error: null\r\n};\r\n\r\nconst settingSlice = createSlice({\r\n    name: \"setting\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = { ...initialState };\r\n        },\r\n        resived(state, action) {\r\n            state.config = action.payload;\r\n            state.isLoading = false;\r\n        },\r\n        update(state, action) {\r\n            const { name, data } = action.payload;\r\n            const oldConfig = { ...state.config[name] };\r\n            let config = { ...oldConfig, ...data };\r\n            console.log(oldConfig, config);\r\n\r\n            if (data.query) {\r\n                const { query } = data;\r\n                const { query: oldQuery, pagination } = oldConfig;\r\n                console.log(query, oldQuery);\r\n\r\n                if (JSON.stringify(query) !== JSON.stringify(oldQuery)) {\r\n                    config = {\r\n                        ...config,\r\n                        pagination: { ...pagination, currentPage: 1 }\r\n                    };\r\n                }\r\n            }\r\n            state.config[name] = config;\r\n            const key = String().concat(settingSlice.name, \"-\", name);\r\n\r\n            setValue(key, JSON.stringify(config));\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: settingReducer } = settingSlice;\r\nconst { resived, requested, update, requestFailed } = actions;\r\n\r\nexport const loadSetting = () => async (dispatch) => {\r\n    dispatch(requested());\r\n    try {\r\n        const content = {};\r\n        Object.keys(settingConfig).forEach((name) => {\r\n            const key = String().concat(settingSlice.name, \"-\", name);\r\n            let config = JSON.parse(getValue(key));\r\n            if (!config) {\r\n                config = settingConfig[name];\r\n                setValue(key, JSON.stringify(config));\r\n            }\r\n            content[name] = config;\r\n        });\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const updateSetting = (name, data) => async (dispatch) => {\r\n    dispatch(update({ name, data }));\r\n};\r\n\r\nexport const getConfig = () => (state) => state.setting.config;\r\nexport const getConfigByName = (name) => (state) => state.setting.config[name];\r\n\r\nexport default settingReducer;\r\n","export const byRussianPost = {\r\n    value: \"Russian Post\",\r\n    label: \"Посылка через (ПОЧТА РОССИИ)\",\r\n    payment: \"Pay On Delivery\",\r\n    deliveryPrice: 450\r\n};\r\nexport const byCompanySDEK = {\r\n    value: \"Company SDEK\",\r\n    label: \"Посылка через (СДЭК)\",\r\n    payment: \"Sberbank Receipt\",\r\n    deliveryPrice: 550\r\n};\r\nexport const byCourier = {\r\n    value: \"By Courier\",\r\n    label: \"Курьером по городу\",\r\n    payment: \"Cash In Hand\",\r\n    deliveryPrice: 400\r\n};\r\nexport const onPickupPoint = {\r\n    value: \"Pickup Point\",\r\n    label: \"Пункт самовывоза\",\r\n    payment: \"Cash In Hand\",\r\n    deliveryPrice: 50\r\n};\r\n\r\nexport function getDeliveryBy(value) {\r\n    return [byRussianPost, byCompanySDEK, byCourier, onPickupPoint].find(\r\n        (item) => item.value === value\r\n    );\r\n}\r\n\r\nexport default {\r\n    byRussianPost,\r\n    byCompanySDEK,\r\n    byCourier,\r\n    onPickupPoint\r\n};\r\n","import httpService from \"./http.service\";\r\nconst endpoint = \"basket/\";\r\n\r\nconst basketService = {\r\n    get: async () => {\r\n        const { data } = await httpService.get(endpoint);\r\n        return data;\r\n    },\r\n    getItems: async (id) => {\r\n        const { data } = await httpService.get(endpoint + id);\r\n        return data;\r\n    },\r\n    update: async (content) => {\r\n        const { data } = await httpService.put(endpoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(endpoint + id);\r\n        return data;\r\n    },\r\n    deleteAll: async (id) => {\r\n        const { data } = await httpService.delete(endpoint + `all/${id}`);\r\n        return data;\r\n    },\r\n    check: async (content) => {\r\n        const { data } = await httpService.put(endpoint + \"check/\", content);\r\n        return data;\r\n    },\r\n    topay: async (content) => {\r\n        const { data } = await httpService.put(endpoint + \"topay/\", content);\r\n        return data;\r\n    },\r\n    apply: async (content) => {\r\n        const { data } = await httpService.put(endpoint + \"apply/\", content);\r\n        return data;\r\n    },\r\n    disassemble: async (content) => {\r\n        const { data } = await httpService.put(\r\n            endpoint + \"disassemble/\",\r\n            content\r\n        );\r\n        return data;\r\n    }\r\n};\r\nexport default basketService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport { getDeliveryBy } from \"../components/page/basketPage/applyForm/deliveries\";\r\n\r\nimport Service from \"../services/basket.service\";\r\nimport history from \"../utils/history\";\r\n\r\nconst initialState = {\r\n    data: {\r\n        _id: null,\r\n        userId: null,\r\n        status: null,\r\n        deliveryInfo: null,\r\n        docs: [],\r\n        products: [],\r\n        totalQty: 0,\r\n        totalPrice: 0\r\n    },\r\n    docsLoading: true,\r\n    productsLoading: false,\r\n    error: null\r\n};\r\n\r\nconst calcTotals = ({ docs }) => {\r\n    const totals = { totalQty: 0, totalPrice: 0 };\r\n    docs.forEach((item) => {\r\n        const { qty, price } = item;\r\n        totals.totalQty += qty;\r\n        totals.totalPrice += qty * price;\r\n    });\r\n    return totals;\r\n};\r\n\r\nconst basketSlice = createSlice({\r\n    name: \"basket\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state.docsLoading = true;\r\n            state.error = null;\r\n        },\r\n        resived(state, action) {\r\n            if (action.payload) {\r\n                const totals = calcTotals(action.payload);\r\n                state.data = { ...action.payload, ...totals };\r\n            }\r\n            state.docsLoading = false;\r\n        },\r\n        requestedItems(state) {\r\n            state.productsLoading = true;\r\n            state.error = null;\r\n        },\r\n        itemsResived(state, action) {\r\n            state.data.products = action.payload;\r\n            state.productsLoading = false;\r\n        },\r\n        update(state, action) {\r\n            const { docs } = state.data;\r\n            const index = docs.findIndex(\r\n                (doc) => doc._id === action.payload._id\r\n            );\r\n            if (index < 0) {\r\n                docs.push(action.payload);\r\n            } else {\r\n                docs[index] = action.payload;\r\n            }\r\n            const totals = calcTotals({ docs });\r\n            state.data = { ...state.data, docs, ...totals };\r\n            state.docsLoading = false;\r\n        },\r\n        remove(state, action) {\r\n            const { docs, products } = state.data;\r\n            const newdocs = docs.filter(\r\n                (item) => item.product !== action.payload\r\n            );\r\n\r\n            const newprods = products.filter(\r\n                (item) => item.product._id !== action.payload\r\n            );\r\n            const totals = calcTotals({ docs: newdocs });\r\n            state.data = {\r\n                ...state.data,\r\n                docs: newdocs,\r\n                products: newprods,\r\n                ...totals\r\n            };\r\n            state.docsLoading = false;\r\n        },\r\n        clear(state, action) {\r\n            const docs = [];\r\n            const products = [];\r\n            const totals = { totalQty: 0, totalPrice: 0 };\r\n            state.data = { ...state.data, docs, products, ...totals };\r\n            state.docsLoading = false;\r\n        },\r\n        updateInfo(state, action) {\r\n            state.data.deliveryInfo = action.payload;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.docsLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: basketReducer } = basketSlice;\r\nconst {\r\n    update,\r\n    updateInfo,\r\n    remove,\r\n    clear,\r\n    resived,\r\n    requestedItems,\r\n    itemsResived,\r\n    requested,\r\n    requestFailed\r\n} = actions;\r\n\r\nexport const loadBasket = () => async (dispatch) => {\r\n    dispatch(requested());\r\n    try {\r\n        const { content } = await Service.get();\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const updateDlvInfo = (deliveryInfo) => async (dispatch, getState) => {\r\n    dispatch(updateInfo(deliveryInfo));\r\n};\r\n\r\nexport const loadBasketItems = (id) => async (dispatch, getState) => {\r\n    try {\r\n        dispatch(requestedItems());\r\n        const { content } = await Service.getItems(id);\r\n        dispatch(itemsResived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const updateBasket = (payload) => async (dispatch, getState) => {\r\n    try {\r\n        const { _id, docs } = getState().basket.data;\r\n\r\n        const doc = docs.find((doc) => doc.product === payload._id);\r\n        dispatch(requested());\r\n        if (doc) {\r\n            const { content } = await Service.update({\r\n                ...doc,\r\n                qty: payload.qty,\r\n                price: payload.price\r\n            });\r\n            console.log(\"add basket old content\", content);\r\n            dispatch(update(content));\r\n        } else {\r\n            const { content } = await Service.update({\r\n                orderId: _id,\r\n                product: payload._id,\r\n                qty: payload.qty,\r\n                price: payload.price\r\n            });\r\n\r\n            dispatch(update(content));\r\n        }\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const clearBasket = () => async (dispatch, getState) => {\r\n    const { data } = getState().basket;\r\n    try {\r\n        dispatch(requested());\r\n        const { content } = await Service.deleteAll(data._id);\r\n        dispatch(clear(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const removeBasket = (id) => async (dispatch, getState) => {\r\n    dispatch(requested());\r\n    try {\r\n        const { docs } = getState().basket.data;\r\n        const doc = docs.find((item) => item.product === id);\r\n\r\n        dispatch(remove(id));\r\n        await Service.delete(doc._id);\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const removeBasketItem = (id) => async (dispatch, getState) => {\r\n    dispatch(requested());\r\n    try {\r\n        const { docs } = getState().basket.data;\r\n        const doc = docs.find((item) => item.product === id);\r\n        dispatch(remove(id));\r\n        await Service.delete(doc._id);\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const checkBasket = () => async (dispatch, getState) => {\r\n    const { data } = getState().basket;\r\n\r\n    const authUser = getState().auth.authUser;\r\n    if (!authUser) {\r\n        history.push({\r\n            pathname: \"/login\",\r\n            state: {\r\n                from: {\r\n                    pathname: \"/basket/check\"\r\n                }\r\n            }\r\n        });\r\n        return;\r\n    }\r\n\r\n    const basketData = { ...data, userId: authUser._id };\r\n    try {\r\n        dispatch(requested());\r\n        const { content } = await Service.check(basketData);\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const applyBasket = () => async (dispatch, getState) => {\r\n    const { data } = getState().basket;\r\n    const authUser = getState().auth.authUser;\r\n    if (!authUser) {\r\n        history.push({\r\n            pathname: \"/login\",\r\n            state: {\r\n                from: {\r\n                    pathname: \"/basket/apply\"\r\n                }\r\n            }\r\n        });\r\n        return;\r\n    }\r\n    const basketData = { ...data, userId: authUser._id };\r\n\r\n    try {\r\n        dispatch(requested());\r\n        const { content } = await Service.apply(basketData);\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const payOrder = (sumOfPay) => async (dispatch, getState) => {\r\n    const authUser = getState().auth.authUser;\r\n    if (!authUser) {\r\n        history.push({\r\n            pathname: \"/login\",\r\n            state: {\r\n                from: {\r\n                    pathname: \"/basket/topay\"\r\n                }\r\n            }\r\n        });\r\n        return;\r\n    }\r\n    const { data } = getState().basket;\r\n\r\n    const basketData = { ...data, sumOfPay, userId: authUser._id };\r\n\r\n    try {\r\n        dispatch(requested());\r\n        const { content } = await Service.topay(basketData);\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const disassemble = () => async (dispatch, getState) => {\r\n    const authUser = getState().auth.authUser;\r\n    if (!authUser) {\r\n        history.push({\r\n            pathname: \"/login\",\r\n            state: {\r\n                from: {\r\n                    pathname: \"/basket/topay\"\r\n                }\r\n            }\r\n        });\r\n        return;\r\n    }\r\n    const { data } = getState().basket;\r\n\r\n    try {\r\n        dispatch(requested());\r\n        const { content } = await Service.disassemble(data);\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const getBasket = () => (state) => state.basket.data;\r\nexport const getBasketQty = (id) => (state) => {\r\n    const { docs } = state.basket.data;\r\n    if (docs) {\r\n        const doc = docs.find((item) => item.product === id);\r\n        if (doc) return doc.qty;\r\n    }\r\n    return null;\r\n};\r\nexport const getTotals = () => (state) => {\r\n    const { deliveryInfo, totalQty, totalPrice } = state.basket.data;\r\n    if (!deliveryInfo) {\r\n        return {\r\n            totalQty,\r\n            totalPrice,\r\n            deliveryPrice: 0,\r\n            fullPrice: 0\r\n        };\r\n    }\r\n\r\n    const { delivery } = deliveryInfo;\r\n    const { deliveryPrice } = getDeliveryBy(delivery);\r\n    return {\r\n        totalQty,\r\n        totalPrice,\r\n        deliveryPrice,\r\n        fullPrice: totalPrice + deliveryPrice\r\n    };\r\n};\r\n\r\nexport const getBasketError = () => (state) => state.basket.error;\r\n\r\nexport default basketReducer;\r\n","import httpService from \"./http.service\";\r\nconst userEndpoint = \"user/\";\r\n\r\nconst UserService = {\r\n    update: async (id, content) => {\r\n        const { data } = await httpService.put(userEndpoint + id, content);\r\n        return data;\r\n    },\r\n    get: async (id) => {\r\n        const { data } = await httpService.get(userEndpoint + id);\r\n        return data;\r\n    },\r\n    fetchAll: async (params) => {\r\n        const { data } = await httpService.get(userEndpoint, {\r\n            params\r\n        });\r\n        return data;\r\n    },\r\n    create: async (content) => {\r\n        const { data } = await httpService.post(userEndpoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(userEndpoint + id);\r\n        return data;\r\n    }\r\n};\r\nexport default UserService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport UserService from \"../services/user.service\";\r\n\r\nconst initialState = {\r\n    docs: [],\r\n    totalDocs: 0,\r\n    isLoading: true,\r\n    isUpdated: false,\r\n    error: null\r\n};\r\n\r\nconst usersSlice = createSlice({\r\n    name: \"users\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state.isLoading = true;\r\n            state.isUpdated = false;\r\n            state.error = null;\r\n        },\r\n        resived(state, action) {\r\n            const { docs, totalDocs } = action.payload;\r\n            state.docs = docs;\r\n            state.totalDocs = totalDocs;\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        },\r\n        update(state, action) {\r\n            const index = state.docs.findIndex(\r\n                (item) => item.id === action.payload.id\r\n            );\r\n            state.docs[index] = {\r\n                ...state.docs[index],\r\n                ...action.payload\r\n            };\r\n            state.isUpdated = true;\r\n        },\r\n        removeUpdated(state, action) {\r\n            state.isUpdated = false;\r\n        }\r\n    }\r\n});\r\n\r\nconst { name, actions, reducer: usersReducer } = usersSlice;\r\n\r\nconst { update, resived, requested, requestFailed, removeUpdated } = actions;\r\n\r\nexport const loadUsers = (id) => async (dispatch, getState) => {\r\n    dispatch(requested());\r\n    try {\r\n        const { content } = await UserService.fetchAll({\r\n            paramsName: name\r\n        });\r\n\r\n        if (id) {\r\n            const user = content.docs.find((doc) => doc._id === id);\r\n            if (!user) {\r\n                const { content: user } = await UserService.get(id);\r\n                if (user) {\r\n                    content.docs.push(user);\r\n                    content.totalDocs += 1;\r\n                }\r\n            }\r\n        }\r\n        dispatch(resived(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const updateUser = (user) => async (dispatch, getState) => {\r\n    dispatch(requested());\r\n    try {\r\n        const { content } = await UserService.update(user._id, user);\r\n        dispatch(update(content));\r\n        setTimeout(() => {\r\n            dispatch(removeUpdated());\r\n        }, 1500);\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const getUsers = () => (state) => state.users.docs;\r\nexport const getUser = (id) => (state) => {\r\n    return state.users.docs.find((doc) => doc._id === id);\r\n};\r\n\r\nexport const getUsersState = () => (state) => {\r\n    const { isLoading, isUpdated, error } = state.users;\r\n    return { isLoading, isUpdated, error };\r\n};\r\n\r\nexport const getUsersLoading = () => (state) => state.users.isLoading;\r\nexport const getUsersError = () => (state) => state.users.error;\r\n\r\nexport default usersReducer;\r\n","import httpService from \"./http.service\";\r\nconst endpoint = \"label/\";\r\n\r\nconst LabelService = {\r\n    update: async (id, content) => {\r\n        const { data } = await httpService.put(endpoint + id, content);\r\n        return data;\r\n    },\r\n    get: async (id) => {\r\n        const { data } = await httpService.get(endpoint + id);\r\n        return data;\r\n    },\r\n    fetchAll: async () => {\r\n        const { data } = await httpService.get(endpoint);\r\n        return data;\r\n    },\r\n    create: async (content) => {\r\n        const { data } = await httpService.post(endpoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(endpoint + id);\r\n        return data;\r\n    }\r\n};\r\nexport default LabelService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport LabelService from \"../services/label.service\";\r\nimport isOutdated from \"../utils/isOutdated\";\r\n\r\nconst initialState = {\r\n    entities: [],\r\n    isLoading: true,\r\n    error: null\r\n};\r\n\r\nconst labelSlice = createSlice({\r\n    name: \"labels\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = initialState;\r\n        },\r\n        resived(state, action) {\r\n            state.entities = action.payload;\r\n            state.lastFetch = Date.now();\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: labelsReducer } = labelSlice;\r\nconst { resived, requested, requestFailed } = actions;\r\n\r\nexport const loadLabels = () => async (dispatch, getState) => {\r\n    const { lastFetch } = getState().labels;\r\n    if (isOutdated(lastFetch)) {\r\n        dispatch(requested());\r\n        try {\r\n            const { content } = await LabelService.fetchAll();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    }\r\n};\r\n\r\nexport const getLabels = () => (state) => state.labels.entities;\r\nexport const getLabel = (id) => (state) =>\r\n    state.labels.entities.find((item) => item._id === id);\r\nexport const getLabelLoading = () => (state) => state.labels.isLoading;\r\nexport const getLabelError = () => (state) => state.labels.error;\r\n\r\nexport default labelsReducer;\r\n","import httpService from \"./http.service\";\r\nconst endpoint = \"origin/\";\r\n\r\nconst originService = {\r\n    fetchAll: async () => {\r\n        const { data } = await httpService.get(endpoint);\r\n        return data;\r\n    }\r\n};\r\nexport default originService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport originService from \"../services/origin.service\";\r\nimport isOutdated from \"../utils/isOutdated\";\r\n\r\nconst initialState = { entities: [], isLoading: true, error: null };\r\n\r\nconst originSlice = createSlice({\r\n    name: \"origins\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = initialState;\r\n        },\r\n        resived(state, action) {\r\n            state.entities = action.payload;\r\n            state.lastFetch = Date.now();\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: originsReducer } = originSlice;\r\nconst { resived, requested, requestFailed } = actions;\r\n\r\nexport const loadOrigins = () => async (dispatch, getState) => {\r\n    const { lastFetch } = getState().origins;\r\n    if (isOutdated(lastFetch)) {\r\n        dispatch(requested());\r\n        try {\r\n            const { content } = await originService.fetchAll();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    }\r\n};\r\n\r\nexport const getOrigins = () => (state) => state.origins.entities;\r\nexport const getOrigin = (id) => (state) =>\r\n    state.origins.entities.find((item) => item._id === id);\r\nexport const getOriginLoading = () => (state) => state.origins.isLoading;\r\nexport const getOriginError = () => (state) => state.origins.error;\r\n\r\nexport default originsReducer;\r\n","import httpService from \"./http.service\";\r\nconst endpoint = \"style/\";\r\n\r\nconst originService = {\r\n    fetchAll: async () => {\r\n        const { data } = await httpService.get(endpoint);\r\n        return data;\r\n    }\r\n};\r\nexport default originService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport styleService from \"../services/style.service\";\r\nimport isOutdated from \"../utils/isOutdated\";\r\n\r\nconst initialState = { entities: [], isLoading: true, error: null };\r\n\r\nconst styleSlice = createSlice({\r\n    name: \"styles\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state = initialState;\r\n        },\r\n        resived(state, action) {\r\n            state.entities = action.payload;\r\n            state.lastFetch = Date.now();\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: stylesReducer } = styleSlice;\r\nconst { resived, requested, requestFailed } = actions;\r\n\r\nexport const loadStyles = () => async (dispatch, getState) => {\r\n    const { lastFetch } = getState().styles;\r\n    if (isOutdated(lastFetch)) {\r\n        dispatch(requested());\r\n        try {\r\n            const { content } = await styleService.fetchAll();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    }\r\n};\r\n\r\nexport const getStyles = () => (state) => state.styles.entities;\r\nexport const getStyle = (id) => (state) =>\r\n    state.styles.entities.find((item) => item._id === id);\r\nexport const getStyleLoading = () => (state) => state.styles.isLoading;\r\nexport const getStyleError = () => (state) => state.styles.error;\r\n\r\nexport default stylesReducer;\r\n","import httpService from \"./http.service\";\r\nconst endPoint = \"reminder/\";\r\n\r\nconst reminderService = {\r\n    update: async (id, content) => {\r\n        const { data } = await httpService.put(endPoint + id, content);\r\n        return data;\r\n    },\r\n    get: async (id) => {\r\n        const { data } = await httpService.get(endPoint + id);\r\n        return data;\r\n    },\r\n    fetchAll: async () => {\r\n        const { data } = await httpService.get(endPoint);\r\n        return data;\r\n    },\r\n    create: async (content) => {\r\n        const { data } = await httpService.post(endPoint, content);\r\n        return data;\r\n    },\r\n    delete: async (id) => {\r\n        const { data } = await httpService.delete(endPoint + id);\r\n        return data;\r\n    },\r\n    deleteAll: async (id) => {\r\n        const { data } = await httpService.delete(endPoint);\r\n        return data;\r\n    }\r\n};\r\nexport default reminderService;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nimport Service from \"../services/reminder.service\";\r\nimport history from \"../utils/history\";\r\nimport isOutdated from \"../utils/isOutdated\";\r\n\r\n// docs = [\"1\",\"2\" ...]\r\nconst initialState = {\r\n    docs: [],\r\n    isLoading: true,\r\n    error: null\r\n};\r\n\r\nconst basketSlice = createSlice({\r\n    name: \"reminder\",\r\n    initialState,\r\n    reducers: {\r\n        requested(state) {\r\n            state.isLoading = true;\r\n            state.error = null;\r\n        },\r\n        resived(state, action) {\r\n            state.docs = action.payload;\r\n            state.lastFetch = Date.now();\r\n            state.isLoading = false;\r\n        },\r\n        update(state, action) {\r\n            const { titleId } = action.payload;\r\n            const index = state.docs.findIndex(\r\n                (doc) => doc.titleId === titleId\r\n            );\r\n            if (index < 0) {\r\n                state.docs.push(action.payload);\r\n            } else {\r\n                state.docs[index] = action.payload;\r\n            }\r\n            state.isLoading = false;\r\n        },\r\n        remove(state, action) {\r\n            const docs = state.docs.filter(\r\n                (item) => item.titleId !== action.payload\r\n            );\r\n            state.docs = docs;\r\n            state.isLoading = false;\r\n        },\r\n        requestFailed(state, action) {\r\n            state.isLoading = false;\r\n            state.error = action.payload;\r\n        }\r\n    }\r\n});\r\n\r\nconst { actions, reducer: remindersReducer } = basketSlice;\r\nconst { update, remove, resived, requested, requestFailed } = actions;\r\n\r\nexport const loadReminders = () => async (dispatch, getState) => {\r\n    const { lastFetch, docs } = getState().reminder;\r\n    const { authUser } = getState().auth;\r\n    const needRefresh = isOutdated(lastFetch) || docs.length === 0;\r\n\r\n    if (authUser && needRefresh) {\r\n        dispatch(requested());\r\n        try {\r\n            const { content } = await Service.fetchAll();\r\n            dispatch(resived(content));\r\n        } catch (error) {\r\n            dispatch(requestFailed(error.message));\r\n        }\r\n    }\r\n};\r\n\r\nexport const updateReminder = (payload) => async (dispatch, getState) => {\r\n    if (!getState().auth.authUser) {\r\n        history.push(\"/login\");\r\n        return;\r\n    }\r\n\r\n    dispatch(requested());\r\n    try {\r\n        const { content } = await Service.update(payload.titleId, payload);\r\n        dispatch(update(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const addReminder = (payload) => async (dispatch, getState) => {\r\n    if (!getState().auth.authUser) {\r\n        history.push(\"/login\");\r\n        return;\r\n    }\r\n\r\n    dispatch(requested());\r\n    try {\r\n        const { content } = await Service.create(payload);\r\n        dispatch(update(content));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const removeReminder = (id) => async (dispatch, getState) => {\r\n    dispatch(requested());\r\n    try {\r\n        await Service.delete(id);\r\n        dispatch(remove(id));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const clearReminders = () => async (dispatch, getState) => {\r\n    dispatch(requested());\r\n    try {\r\n        await Service.deleteAll();\r\n        dispatch(resived([]));\r\n    } catch (error) {\r\n        dispatch(requestFailed(error.message));\r\n    }\r\n};\r\n\r\nexport const getReminders = () => (state) => state.reminder.docs;\r\nexport const getReminder = (id) => (state) => {\r\n    return state.reminder.docs.find((item) => item.titleId === id);\r\n};\r\n\r\nexport const getReminderLoading = () => (state) => state.reminder.isLoading;\r\nexport const getReminderError = () => (state) => state.reminder.error;\r\n\r\nexport default remindersReducer;\r\n","import { configureStore, combineReducers } from \"@reduxjs/toolkit\";\r\n\r\nimport authReducer from \"./auth\";\r\nimport categoriesReducer from \"./categories\";\r\nimport formatsReducer from \"./formats\";\r\nimport logger from \"./middleware/logger\";\r\nimport productsReducer from \"./products\";\r\nimport rolesReducer from \"./roles\";\r\nimport settingReducer from \"./setting\";\r\nimport basketReducer from \"./basket\";\r\nimport usersReducer from \"./users\";\r\nimport labelsReducer from \"./labels\";\r\nimport originsReducer from \"./origin\";\r\nimport stylesReducer from \"./style\";\r\nimport remindersReducer from \"./reminders\";\r\n\r\nconst rootReducer = combineReducers({\r\n    auth: authReducer,\r\n    roles: rolesReducer,\r\n    users: usersReducer,\r\n    categories: categoriesReducer,\r\n    formats: formatsReducer,\r\n    labels: labelsReducer,\r\n    origins: originsReducer,\r\n    styles: stylesReducer,\r\n    products: productsReducer,\r\n    setting: settingReducer,\r\n    basket: basketReducer,\r\n    reminder: remindersReducer\r\n});\r\n\r\nfunction createStore() {\r\n    return configureStore({\r\n        reducer: rootReducer,\r\n        middleware: (getDefaultMiddleware) => {\r\n            if (process.env.NODE_ENV !== \"production\") {\r\n                getDefaultMiddleware().concat(logger);\r\n            }\r\n        },\r\n        devTools: process.env.NODE_ENV !== \"production\"\r\n    });\r\n}\r\n\r\nexport default createStore;\r\n","export default __webpack_public_path__ + \"static/media/favicon.a08518ad.ico\";","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getBasket } from \"../../../store/basket\";\r\n\r\nconst MenuBasket = () => {\r\n    const { totalQty } = useSelector(getBasket());\r\n    const productLabel = totalQty > 99 ? \"99+\" : totalQty;\r\n    return (\r\n        <Link className=\"nav-link \" aria-current=\"page\" to=\"/basket\">\r\n            <i className=\"bi bi-cart me-1\" />\r\n            <span>Корзина</span>\r\n            {totalQty > 0 && (\r\n                <span className=\"badge rounded-pill bg-primary ms-1\">\r\n                    {productLabel}\r\n                </span>\r\n            )}\r\n        </Link>\r\n    );\r\n};\r\n\r\nexport default MenuBasket;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getAuth } from \"../../../store/auth\";\r\n\r\nconst MenuAdmin = () => {\r\n    const { isAdmin } = useSelector(getAuth());\r\n    return (\r\n        isAdmin && (\r\n            <Link className=\"nav-link \" aria-current=\"page\" to=\"/admin\">\r\n                Меню администратора\r\n                <i className=\"bi bi-award ms-1\" />\r\n            </Link>\r\n        )\r\n    );\r\n};\r\n\r\nexport default MenuAdmin;\r\n","import React, { useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { getAuth } from \"../../../store/auth\";\r\n\r\nfunction MenuProfile() {\r\n    const { authUser } = useSelector(getAuth());\r\n    const [isOpen, setOpen] = useState(false);\r\n    const toggleMenu = () => {\r\n        setOpen((prevState) => !prevState);\r\n    };\r\n\r\n    if (authUser) {\r\n        return (\r\n            <div className=\"dropdown\" onClick={toggleMenu}>\r\n                <div className=\"btn dropdown-toggle d-flex align-items-center nav-link\">\r\n                    <div className=\"me-2\">{authUser.name}</div>\r\n                    <i className=\"bi bi-person\"></i>\r\n                </div>\r\n                <div\r\n                    className={\"w-100 dropdown-menu\" + (isOpen ? \" show\" : \"\")}\r\n                >\r\n                    <Link\r\n                        to={`/users/${authUser._id}`}\r\n                        className=\"dropdown-item nav-link\"\r\n                    >\r\n                        Профиль\r\n                    </Link>\r\n                    <Link to=\"/logout\" className=\"dropdown-item nav-link\">\r\n                        Выход\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Link className=\"nav-link\" aria-current=\"page\" to=\"/login\">\r\n            Войти\r\n        </Link>\r\n    );\r\n}\r\n\r\nexport default MenuProfile;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { appTitle } from \"../../../config.json\";\r\nimport logo from \"../../../assets/brand/favicon.ico\";\r\nimport MenuBasket from \"./menuBasket\";\r\nimport MenuAdmin from \"./menuAdmin\";\r\nimport MenuProfile from \"./menuProfile\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getAuth } from \"../../../store/auth\";\r\n\r\nconst NavBar = () => {\r\n    const { authUser, isAdmin } = useSelector(getAuth());\r\n    return (\r\n        <header className=\"sticky-top\">\r\n            <nav className=\"navbar card bg-light-gray\">\r\n                <div className=\"container-fluid\">\r\n                    <ul className=\"nav\">\r\n                        <li className=\"nav-item\">\r\n                            <Link\r\n                                className=\"nav-link \"\r\n                                aria-current=\"page\"\r\n                                to=\"/\"\r\n                            >\r\n                                <img\r\n                                    src={logo}\r\n                                    alt=\"\"\r\n                                    width=\"24\"\r\n                                    height=\"24\"\r\n                                    className=\"me-1\"\r\n                                />\r\n                                {appTitle}\r\n                            </Link>\r\n                        </li>\r\n                        {authUser && isAdmin && (\r\n                            <li className=\"nav-item\">\r\n                                <MenuAdmin />\r\n                            </li>\r\n                        )}\r\n                    </ul>\r\n                    <div className=\"nav d-flex\">\r\n                        <MenuBasket />\r\n                        <MenuProfile />\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        </header>\r\n    );\r\n};\r\n\r\nexport default NavBar;\r\n","export const names = {\r\n    clear: \"clearBasket\",\r\n    goto: \"gotoPay\"\r\n};\r\nexport default {\r\n    name: \"basket\",\r\n    caption: { name: \"КОРЗИНА\", icon: \"bi-cart-check\" }\r\n    // items: [\r\n    //     {\r\n    //         path: names.clear,\r\n    //         name: \"Очистить корзину\",\r\n    //         icon: \"bi-x-lg\"\r\n    //     },\r\n    //     {\r\n    //         path: names.goto,\r\n    //         name: \"Перейти к оплате\",\r\n    //         icon: \"bi-credit-card\"\r\n    //     }\r\n    // ]\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst WorkScreen = ({ children }) => {\r\n    return (\r\n        <div className=\"p-2\">\r\n            <div className=\"d-flex\">{children}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nWorkScreen.propTypes = {\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default WorkScreen;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst ContentWrapper = ({ menu, children }) => {\r\n    return (\r\n        <div className=\"content_wrapper card bg-light p-2\">\r\n            <div className=\"card-header\">\r\n                <i className={`bi ${menu.icon} me-2`} />\r\n                {menu.name}\r\n            </div>\r\n            <div className=\"card-body\">{children}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nContentWrapper.propTypes = {\r\n    menu: PropTypes.object.isRequired,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default ContentWrapper;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { updateSetting } from \"../../../store/setting\";\r\n\r\nconst TableHeader = ({ name, onReload, columns, headered }) => {\r\n    const selectedSort = useSelector(\r\n        (state) => state.setting.config[name].sort\r\n    );\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const handleSort = (sort) => {\r\n        let newsort = { ...selectedSort };\r\n        if (selectedSort.sort === sort) {\r\n            newsort.order = selectedSort.order === 1 ? -1 : 1;\r\n        } else {\r\n            newsort = { sort, order: 1 };\r\n        }\r\n        dispatch(\r\n            updateSetting(name, {\r\n                sort: {\r\n                    ...newsort\r\n                }\r\n            })\r\n        );\r\n        if (onReload) onReload();\r\n    };\r\n\r\n    const renderSort = (column) => {\r\n        if (column.sortable) {\r\n            if (selectedSort.sort === column.name) {\r\n                if (selectedSort.order === 1) {\r\n                    return (\r\n                        <span className=\"text-nowrap g-1\">\r\n                            <i className=\"small bi bi-caret-up-fill\" />\r\n                            {column.caption}\r\n                        </span>\r\n                    );\r\n                } else {\r\n                    return (\r\n                        <span className=\"text-nowrap g-1\">\r\n                            <i className=\"small bi bi-caret-down-fill\" />\r\n                            {column.caption}\r\n                        </span>\r\n                    );\r\n                }\r\n            } else {\r\n                return (\r\n                    <span className=\"text-nowrap g-1\">\r\n                        <i className=\"bi bi-chevron-expand\" />\r\n                        {column.caption}\r\n                    </span>\r\n                );\r\n            }\r\n        }\r\n        return <span className=\"text-nowrap g-1\">{column.caption}</span>;\r\n    };\r\n\r\n    const headerClick = (column) => {\r\n        if (!headered || !column.sortable) return;\r\n        handleSort(column.name);\r\n    };\r\n    return (\r\n        <thead>\r\n            <tr>\r\n                {columns.map((column, index) => {\r\n                    return (\r\n                        <th\r\n                            key={index + 1}\r\n                            {...{\r\n                                name: headered ? column.name : undefined,\r\n                                role:\r\n                                    headered && column.sortable\r\n                                        ? \"button\"\r\n                                        : undefined,\r\n                                onClick: () => headerClick(column),\r\n                                scope: \"col\"\r\n                            }}\r\n                            style={\r\n                                column.width\r\n                                    ? { width: `${column.width}px` }\r\n                                    : { width: \"auto\" }\r\n                            }\r\n                        >\r\n                            {headered && renderSort(column)}\r\n                        </th>\r\n                    );\r\n                })}\r\n                <th style={{ width: \"auto\" }}></th>\r\n            </tr>\r\n        </thead>\r\n    );\r\n};\r\n\r\nTableHeader.defaultProps = {\r\n    headered: true\r\n};\r\n\r\nTableHeader.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    columns: PropTypes.array.isRequired,\r\n    headered: PropTypes.bool,\r\n    onReload: PropTypes.func\r\n};\r\n\r\nexport default TableHeader;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport _ from \"lodash\";\r\n\r\nconst TableBody = ({ data, columns, loading }) => {\r\n    const renderContent = (item, column, index) => {\r\n        if (column.component) {\r\n            const component = column.component;\r\n            if (typeof component === \"function\") {\r\n                return component({ ...item, index });\r\n            }\r\n            return component;\r\n        }\r\n        return _.get(item, column.name);\r\n    };\r\n    return (\r\n        <tbody>\r\n            {loading || data.length === 0 ? (\r\n                <tr>\r\n                    <td colSpan={columns.length + 1}>\r\n                        <div className=\"w-100 text-center text-primary\">\r\n                            {loading ? (\r\n                                <>\r\n                                    <span\r\n                                        className=\"spinner-border spinner-border-sm\"\r\n                                        role=\"status\"\r\n                                        aria-hidden=\"true\"\r\n                                    />\r\n                                    <span className=\"ms-2\">\r\n                                        Загрузка данных...\r\n                                    </span>\r\n                                </>\r\n                            ) : (\r\n                                <span className=\"text-danger\">Нет данных</span>\r\n                            )}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            ) : (\r\n                data.map((item) => (\r\n                    <tr key={item._id}>\r\n                        {columns.map((column, index) => (\r\n                            <td key={index + 1}>\r\n                                {renderContent(item, column, index)}\r\n                            </td>\r\n                        ))}\r\n                        <td></td>\r\n                    </tr>\r\n                ))\r\n            )}\r\n        </tbody>\r\n    );\r\n};\r\n\r\nTableBody.propTypes = {\r\n    data: PropTypes.array.isRequired,\r\n    loading: PropTypes.bool.isRequired,\r\n    columns: PropTypes.array.isRequired\r\n};\r\n\r\nexport default TableBody;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst sizeItems = [\r\n    { value: 10, label: \"10 / стр. \" },\r\n    { value: 50, label: \"50 / стр.\" },\r\n    { value: 100, label: \"100 / стр.\" },\r\n    { value: 200, label: \"200 / стр.\" },\r\n    { value: 500, label: \"500 / стр.\" }\r\n];\r\n\r\nconst SelectPageSize = ({ value, onChangePageSize, name }) => {\r\n    const handleChange = ({ target }) => {\r\n        onChangePageSize(Number(target.value));\r\n    };\r\n    return (\r\n        <div className=\"page-item\">\r\n            <select\r\n                className=\"form-select\"\r\n                id={name}\r\n                name={name}\r\n                value={value}\r\n                onChange={handleChange}\r\n            >\r\n                {sizeItems.map((option) => (\r\n                    <option value={option.value} key={option.value}>\r\n                        {option.label}\r\n                    </option>\r\n                ))}\r\n            </select>\r\n        </div>\r\n    );\r\n};\r\n\r\nSelectPageSize.propTypes = {\r\n    value: PropTypes.number,\r\n    onChangePageSize: PropTypes.func.isRequired,\r\n    name: PropTypes.string\r\n};\r\nexport default SelectPageSize;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\nimport SelectPageSize from \"./selectPageSize\";\r\n\r\nconst Paginator = ({ name, pager, setPage, setPageSize }) => {\r\n    if (!pager) return null;\r\n    return (\r\n        <div className=\"d-flex justify-content-center\">\r\n            <div className=\"pagination\">\r\n                {pager.pages && pager.pages.length > 1 && (\r\n                    <>\r\n                        <div\r\n                            className={classNames({\r\n                                \"page-item\": true,\r\n                                disabled: pager.currentPage === 1\r\n                            })}\r\n                        >\r\n                            <a\r\n                                className=\"page-link\"\r\n                                onClick={() => setPage(1)}\r\n                                role=\"button\"\r\n                            >\r\n                                В начало\r\n                            </a>\r\n                        </div>\r\n                        <div\r\n                            className={classNames({\r\n                                \"page-item me-2\": true,\r\n                                disabled: pager.currentPage === 1\r\n                            })}\r\n                        >\r\n                            <a\r\n                                className=\"page-link\"\r\n                                onClick={() => setPage(pager.currentPage - 1)}\r\n                                role=\"button\"\r\n                            >\r\n                                &laquo;\r\n                            </a>\r\n                        </div>\r\n                        {pager.pages.map((page, index) => (\r\n                            <div\r\n                                key={index + 1}\r\n                                className={classNames({\r\n                                    \"page-item\": true,\r\n                                    active: page === pager.currentPage\r\n                                })}\r\n                            >\r\n                                <a\r\n                                    className=\"page-link\"\r\n                                    onClick={() => setPage(page)}\r\n                                    role=\"button\"\r\n                                >\r\n                                    {page}\r\n                                </a>\r\n                            </div>\r\n                        ))}\r\n                        <div\r\n                            className={classNames({\r\n                                \"page-item ms-2\": true,\r\n                                disabled: pager.currentPage === pager.totalPages\r\n                            })}\r\n                        >\r\n                            <a\r\n                                className=\"page-link\"\r\n                                onClick={() => setPage(pager.currentPage + 1)}\r\n                                role=\"button\"\r\n                            >\r\n                                &raquo;\r\n                            </a>\r\n                        </div>\r\n                        <div\r\n                            className={classNames({\r\n                                \"page-item\": true,\r\n                                disabled: pager.currentPage === pager.totalPages\r\n                            })}\r\n                        >\r\n                            <a\r\n                                className=\"page-link\"\r\n                                onClick={() => setPage(pager.totalPages)}\r\n                                role=\"button\"\r\n                            >\r\n                                В конец\r\n                            </a>\r\n                        </div>\r\n                    </>\r\n                )}\r\n                {pager.totalItems > 0 && (\r\n                    <div\r\n                        className={classNames({\r\n                            \"page-item disabled me-2\": true,\r\n                            \"ms-2\": pager.totalPages > 1\r\n                        })}\r\n                    >\r\n                        <span className=\"page-link\">\r\n                            {pager.endIndex + 1}/{pager.totalItems}\r\n                        </span>\r\n                    </div>\r\n                )}\r\n                <SelectPageSize\r\n                    value={pager.pageSize}\r\n                    onChangePageSize={setPageSize}\r\n                    name={name}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nPaginator.propTypes = {\r\n    name: PropTypes.string,\r\n    pager: PropTypes.object,\r\n    setPage: PropTypes.func.isRequired,\r\n    setPageSize: PropTypes.func.isRequired\r\n};\r\n\r\nexport default Paginator;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport { range } from \"lodash\";\r\nimport { updateSetting } from \"../../../store/setting\";\r\nimport Paginator from \"./paginator\";\r\n\r\nclass PaginationWrapper extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.name = this.props.name;\r\n        this.config = this.props.config[this.name];\r\n        this.pagination = this.config.pagination;\r\n        this.state = {\r\n            endIndex: 0,\r\n            totalItems: this.props.totalDocs,\r\n            pageSize: this.pagination.pageSize,\r\n            pages: []\r\n        };\r\n        this.saveSetting = this.saveSetting.bind(this);\r\n        this.setPage = this.setPage.bind(this);\r\n        this.getPager = this.getPager.bind(this);\r\n        this.setPageSize = this.setPageSize.bind(this);\r\n        this.selectPage = this.selectPage.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.totalDocs) {\r\n            this.setPage(1);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        // const { pagination } = this.props.config[this.name];\r\n\r\n        if (this.props.totalDocs !== prevProps.totalDocs) {\r\n            this.setPage(1);\r\n        }\r\n        // if (this.state.currentPage !== prevState.currentPage) {\r\n        //     this.setPage(1);\r\n        // }\r\n    }\r\n\r\n    saveSetting() {\r\n        if (this.pagination) {\r\n            this.props.updateSetting(this.name, {\r\n                pagination: this.pagination\r\n            });\r\n        }\r\n    }\r\n\r\n    setPage(page) {\r\n        const { totalDocs } = this.props;\r\n        if (page < 1) {\r\n            return;\r\n        }\r\n        const pager = this.getPager(totalDocs, page, this.pagination.pageSize);\r\n        this.pagination = {\r\n            ...this.pagination,\r\n            currentPage: page\r\n        };\r\n        this.saveSetting();\r\n\r\n        this.setState(pager);\r\n    }\r\n\r\n    getPager(totalItems, currentPage, pageSize) {\r\n        currentPage = currentPage || this.pagination.page;\r\n\r\n        pageSize = pageSize || this.pagination.pageSize;\r\n\r\n        const showPages = 10;\r\n        const halfPages = showPages / 2;\r\n\r\n        const totalPages = Math.ceil(totalItems / pageSize);\r\n\r\n        let startPage, endPage;\r\n        if (totalPages <= showPages) {\r\n            startPage = 1;\r\n            endPage = totalPages;\r\n        } else {\r\n            if (currentPage <= halfPages) {\r\n                startPage = 1;\r\n                endPage = showPages;\r\n            } else if (currentPage + halfPages >= totalPages) {\r\n                startPage = totalPages - (showPages - 1);\r\n                endPage = totalPages;\r\n            } else {\r\n                startPage = currentPage - (halfPages - 1);\r\n                endPage = currentPage + halfPages;\r\n            }\r\n        }\r\n\r\n        const startIndex = (currentPage - 1) * pageSize;\r\n        const endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\r\n\r\n        const pages = range(startPage, endPage + 1);\r\n\r\n        return {\r\n            totalItems,\r\n            currentPage,\r\n            pageSize,\r\n            totalPages,\r\n            startPage,\r\n            endPage,\r\n            startIndex,\r\n            endIndex,\r\n            pages\r\n        };\r\n    }\r\n\r\n    setPageSize(value) {\r\n        this.pagination = {\r\n            ...this.pagination,\r\n            pageSize: value\r\n        };\r\n        this.setPage(1);\r\n        this.saveSetting();\r\n        this.props.onChange();\r\n    }\r\n\r\n    selectPage(page) {\r\n        if (this.pagination.currentPage === page) return;\r\n        this.setPage(page);\r\n        this.props.onChange();\r\n    }\r\n\r\n    render() {\r\n        const { paginator, loading, children } = this.props;\r\n        const { name, selectPage, setPageSize } = this;\r\n        const pager = this.state;\r\n        return (\r\n            <div>\r\n                {paginator && (\r\n                    <Paginator\r\n                        name={name}\r\n                        pager={pager}\r\n                        setPage={selectPage}\r\n                        setPageSize={setPageSize}\r\n                    />\r\n                )}\r\n                {children}\r\n                {paginator && !loading && pager.pages.length > 1 && (\r\n                    <Paginator\r\n                        name={this.name}\r\n                        pager={pager}\r\n                        setPage={this.selectPage}\r\n                        setPageSize={this.setPageSize}\r\n                    />\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPaginationWrapper.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    totalDocs: PropTypes.number,\r\n    loading: PropTypes.bool,\r\n    onChange: PropTypes.func.isRequired,\r\n    config: PropTypes.object,\r\n    updateSetting: PropTypes.func,\r\n    paginator: PropTypes.bool,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nPaginationWrapper.defaultProps = {\r\n    initialPage: 1,\r\n    pageSize: 10,\r\n    loading: false,\r\n    paginator: true\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    config: state.setting.config\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    updateSetting\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PaginationWrapper);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\nimport TableHeader from \"./tableHeader\";\r\nimport TableBody from \"./tableBody\";\r\nimport PaginationWrapper from \"../pagination/paginationWrapper\";\r\nimport { updateSetting } from \"../../../store/setting\";\r\nimport { debounce } from \"lodash\";\r\n\r\nclass Table extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // this.state = { inputs: null };\r\n        this.name = this.props.name;\r\n        this.config = this.props.config[this.name];\r\n        this.inputs = null;\r\n        this.focused = null;\r\n\r\n        this.setInputs.bind(this);\r\n        this.handleKeyDown.bind(this);\r\n        this.handleFocus.bind(this);\r\n    }\r\n\r\n    setInputs() {\r\n        this.inputs = Array.prototype.slice.call(\r\n            document.querySelectorAll(\"input.table-input\")\r\n        );\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setInputs();\r\n        // const { inputs } = this;\r\n\r\n        // if (inputs && inputs.length > 0) {\r\n        //     inputs[0].focus();\r\n        //     inputs[0].select();\r\n        // }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (\r\n            this.props.data.length !== prevProps.data.length ||\r\n            this.props.loading !== prevProps.loading\r\n        ) {\r\n            this.setInputs();\r\n            if (!this.props.loading) {\r\n                const { inputs } = this;\r\n                if (inputs && inputs.length > 0) {\r\n                    inputs[0].focus();\r\n                    inputs[0].select();\r\n                } else window.scrollTo(0, 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleKeyDown(event, self) {\r\n        const { inputs, focused } = self;\r\n        if (!inputs || inputs.length === 0) return;\r\n        // console.log(event.keyCode);\r\n        if ([9, 13, 40].includes(event.keyCode)) {\r\n            event.preventDefault();\r\n            const index = (inputs.indexOf(focused) + 1) % inputs.length;\r\n            const input = inputs[index];\r\n            input.focus();\r\n            input.select();\r\n        }\r\n        if ([38].includes(event.keyCode)) {\r\n            event.preventDefault();\r\n            const index = (inputs.indexOf(focused) - 1) % inputs.length;\r\n            // console.log(index);\r\n            const input = inputs[index >= 0 ? index : inputs.length - 1];\r\n            input.focus();\r\n            input.select();\r\n        }\r\n    }\r\n\r\n    handleFocus(event, self) {\r\n        self.focused = event.target;\r\n        // console.log(\"handleFocus\", event, self);\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            name,\r\n            onReload,\r\n            columns,\r\n            data,\r\n            totalDocs,\r\n            loading,\r\n            headered,\r\n            bordered,\r\n            striped,\r\n            paginator\r\n        } = this.props;\r\n\r\n        const onPageChange = debounce(onReload, 250);\r\n\r\n        return (\r\n            <PaginationWrapper\r\n                {...{ name, totalDocs, loading, paginator }}\r\n                onChange={onPageChange}\r\n            >\r\n                <table\r\n                    className={classNames({\r\n                        \"table table-hover\": true,\r\n                        \"table-bordered\": bordered,\r\n                        \"table-striped\": striped\r\n                    })}\r\n                    onKeyDown={(e) => this.handleKeyDown(e, this)}\r\n                    onFocus={(e) => this.handleFocus(e, this)}\r\n                >\r\n                    <TableHeader {...{ headered, name, onReload, columns }} />\r\n                    <TableBody {...{ columns, data, loading }} />\r\n                </table>\r\n            </PaginationWrapper>\r\n        );\r\n    }\r\n}\r\n\r\nTable.defaultProps = {\r\n    headered: true,\r\n    bordered: false,\r\n    striped: true,\r\n    paginator: true,\r\n    loading: false,\r\n    totalDocs: 0\r\n};\r\n\r\nTable.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    data: PropTypes.array,\r\n    totalDocs: PropTypes.number,\r\n    loading: PropTypes.bool,\r\n    columns: PropTypes.array,\r\n    headered: PropTypes.bool,\r\n    bordered: PropTypes.bool,\r\n    striped: PropTypes.bool,\r\n    paginator: PropTypes.bool,\r\n    onReload: PropTypes.func,\r\n    config: PropTypes.object,\r\n    updateSetting: PropTypes.func\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    config: state.setting.config\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    updateSetting\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Table);\r\n","import Table from \"./table\";\r\nexport default Table;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport imgBarcode from \"../../assets/defaults/barcode.png\";\r\n\r\nconst Barcode = ({ barcode }) => {\r\n    return (\r\n        <div className=\"text-muted small\">\r\n            <img src={imgBarcode} alt=\"\" />\r\n            <div>{barcode}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nBarcode.propTypes = {\r\n    barcode: PropTypes.string\r\n};\r\nexport default Barcode;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAHCAYAAADXhRcnAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAC9JREFUeNpiYGBg+A8EDNeuXQPTMD6Ifvz48f+qqio4H1kOJM7EQAEY1UwiAAgwADgUIPuQ4BhsAAAAAElFTkSuQmCC\"","export default \"data:image/jpeg;base64,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\"","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport defPicture from \"../../../../assets/defaults/audio-cd.jpg\";\r\n\r\nconst ProductPicture = ({ size, data }) => {\r\n    const { _id, title } = data;\r\n    const { image, name } = title;\r\n    const pictureSrc = image\r\n        ? `https://bridgenote.com/images/covers/${image}`\r\n        : defPicture;\r\n    return (\r\n        <Link to={`/${_id}`}>\r\n            <div className={`cover-${size} media`}>\r\n                <div className=\"media-left\">\r\n                    <img\r\n                        className={`media-object img-thumbnail cover-${size}`}\r\n                        src={pictureSrc}\r\n                        title={name}\r\n                        alt={_id}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Link>\r\n    );\r\n};\r\n\r\nProductPicture.defautProps = {\r\n    size: \"small\"\r\n};\r\n\r\nProductPicture.propTypes = {\r\n    size: PropTypes.string,\r\n    data: PropTypes.object.isRequired\r\n};\r\nexport default ProductPicture;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst statuses = {\r\n    basket: \"В корзине\",\r\n    checked: \"Подтверждён\",\r\n    needpay: \"Требуется оплата\",\r\n    new: \"Принят в работу\",\r\n    assembled: \"Собран, готов к отправке\",\r\n    pendingPayment: \"Ожидает оплаты\",\r\n    sent: \"Отпарвлен\",\r\n    delivered: \"Доставлен\",\r\n    cancelled: \"Отменён\",\r\n    partly: \"Подтверждён частично\",\r\n    unavailable: \"Недоступен\"\r\n};\r\n\r\nconst StatusText = ({ status, classname }) => {\r\n    return (\r\n        <span className={`badge text-bg-${classname}`}>{statuses[status]}</span>\r\n    );\r\n};\r\n\r\nStatusText.propTypes = {\r\n    status: PropTypes.string,\r\n    classname: PropTypes.string\r\n};\r\nStatusText.displayName = \"StatusText\";\r\n\r\nexport default StatusText;\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\n\r\nimport {\r\n    updateBasket,\r\n    getBasketQty,\r\n    removeBasketItem\r\n} from \"../../../../store/basket\";\r\nimport {\r\n    addReminder,\r\n    getReminder,\r\n    removeReminder,\r\n    updateReminder\r\n} from \"../../../../store/reminders\";\r\nimport StatusText from \"../../../common/form/statusText\";\r\n\r\nconst BasketQty = ({ item, name }) => {\r\n    const { title, priceRub } = item;\r\n    const inputB = useRef(null);\r\n    const inputR = useRef(null);\r\n    let qty = String(useSelector(getBasketQty(item._id)) || \"\");\r\n    const savedQty = Number(qty || 0);\r\n    const reminder = useSelector(getReminder(title._id));\r\n\r\n    const [reminderNeedFocus, setReminderNeedFocus] = useState(false);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (reminderNeedFocus) {\r\n            setReminderNeedFocus(false);\r\n            inputR.current.focus();\r\n            inputR.current.select();\r\n        }\r\n    }, [reminder]);\r\n\r\n    const checkValue = (value) => {\r\n        const result = Math.max(0, Number(value || \"0\"));\r\n        qty = result || \"\";\r\n        return result;\r\n    };\r\n    const handleChange = ({ target }) => {\r\n        const value = target.value.replace(/[^\\d]/, \"\");\r\n        updateOnServer(checkValue(value));\r\n    };\r\n\r\n    const removeThis = () => {\r\n        inputB.current.focus();\r\n        const numQty = 0;\r\n        updateOnServer(numQty);\r\n    };\r\n\r\n    const handleBlur = () => {\r\n        if (qty === \"0\") {\r\n            qty = \"\";\r\n            return;\r\n        } else if (!qty) return;\r\n\r\n        updateOnServer(Math.max(0, Number(qty)));\r\n    };\r\n\r\n    function updateOnServer(numQty) {\r\n        if (savedQty === numQty) return;\r\n\r\n        if (numQty === 0) {\r\n            dispatch(removeBasketItem(item._id));\r\n        } else {\r\n            dispatch(\r\n                updateBasket({\r\n                    _id: item._id,\r\n                    qty: numQty,\r\n                    price: priceRub\r\n                })\r\n            );\r\n        }\r\n    }\r\n\r\n    const handleToggle = ({ target }) => {\r\n        if (target.nodeName !== \"SPAN\") {\r\n            target = target.parentNode;\r\n        }\r\n\r\n        const { action } = reminder || { action: \"nothing\" };\r\n\r\n        if (target.nodeName !== \"SPAN\") return;\r\n        if (target.id === \"nothing\" && !reminder) return;\r\n        if (action === target.id) return;\r\n\r\n        if (target.id === \"nothing\") {\r\n            dispatch(removeReminder(title._id));\r\n            return;\r\n        }\r\n\r\n        const need = item.needQty ? item.needQty - item.qty : 1;\r\n\r\n        let data = {\r\n            ...reminder,\r\n            titleId: title._id,\r\n            action: target.id,\r\n            need,\r\n            price: priceRub\r\n        };\r\n\r\n        switch (target.id) {\r\n            case \"to-order\":\r\n                setReminderNeedFocus(true);\r\n                break;\r\n            case \"notify-me\":\r\n                data = { ...data, need: 0, price: 0 };\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        if (!reminder) {\r\n            dispatch(addReminder(data));\r\n        } else {\r\n            dispatch(updateReminder(data));\r\n        }\r\n    };\r\n\r\n    const needBlur = () => {\r\n        let { need, action } = reminder;\r\n        if (isNaN(need)) {\r\n            need = 1;\r\n        }\r\n\r\n        need = Math.max(1, Number(need));\r\n        const data = { titleId: title._id, action, need, price: priceRub };\r\n        dispatch(updateReminder(data));\r\n    };\r\n\r\n    const needChange = ({ target }) => {\r\n        let { need, action } = reminder;\r\n        let text = target.value.replace(/[^\\d]/, \"\");\r\n        if (isNaN(text)) {\r\n            text = 1;\r\n        }\r\n\r\n        if (need === text) return;\r\n        need = Math.max(1, Number(text));\r\n        const data = { titleId: title._id, action, need, price: priceRub };\r\n        dispatch(updateReminder(data));\r\n    };\r\n\r\n    const inputTitle = \"Изменить количество в корзине.\";\r\n\r\n    switch (item.status) {\r\n        case \"basket\": {\r\n            return (\r\n                <div className=\"input-group flex-nowrap\">\r\n                    <input\r\n                        ref={inputB}\r\n                        type=\"text\"\r\n                        className=\"form-control table-input text-center\"\r\n                        placeholder=\"нет\"\r\n                        value={qty}\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                        title={inputTitle}\r\n                    />\r\n                    <span\r\n                        className=\"input-group-text\"\r\n                        title=\"Удалить\"\r\n                        role=\"button\"\r\n                        onClick={removeThis}\r\n                    >\r\n                        <i className=\"bi bi-x-circle\" />\r\n                    </span>\r\n                </div>\r\n            );\r\n        }\r\n        case \"checked\": {\r\n            return (\r\n                <div className=\"g-3\">\r\n                    <div\r\n                        className=\"form-control bg-secondary bg-opacity-10 text-center\"\r\n                        title=\"Изменить нельзя\"\r\n                    >\r\n                        {item.qty}\r\n                    </div>\r\n                    <StatusText status={item.status} classname=\"light\" />\r\n                </div>\r\n            );\r\n        }\r\n        case \"partly\":\r\n        case \"unavailable\": {\r\n            return (\r\n                <div className=\"g-3\">\r\n                    <span\r\n                        className=\"form-control form-control-sm bg-secondary bg-opacity-10 text-center\"\r\n                        title=\"Изменить нельзя\"\r\n                    >\r\n                        {item.qty}/{item.needQty}\r\n                    </span>\r\n                    <StatusText status={item.status} classname=\"warning\" />\r\n                    <div\r\n                        className=\"btn-group btn-group-sm mt-1 w-100\"\r\n                        role=\"group\"\r\n                        onClick={handleToggle}\r\n                    >\r\n                        <span\r\n                            id=\"notify-me\"\r\n                            className={classNames({\r\n                                \"btn btn-outline-primary\": true,\r\n                                active:\r\n                                    reminder && reminder.action === \"notify-me\"\r\n                            })}\r\n                            title=\"Оповестить меня, в случае постуаления\"\r\n                        >\r\n                            <i className=\"bi bi-envelope\" />\r\n                        </span>\r\n                        <span\r\n                            id=\"to-order\"\r\n                            className={classNames({\r\n                                \"btn btn-outline-danger\": true,\r\n                                active:\r\n                                    reminder && reminder.action === \"to-order\"\r\n                            })}\r\n                            title=\"При поступлении добавить в заказ, и оповестить меня\"\r\n                        >\r\n                            <i className=\"bi bi-bag\" />\r\n                        </span>\r\n                        {reminder && reminder.action === \"to-order\" && (\r\n                            <input\r\n                                ref={inputR}\r\n                                type=\"text\"\r\n                                className=\"form-control form-control-sm text-center\"\r\n                                value={reminder.need}\r\n                                onChange={needChange}\r\n                                onBlur={needBlur}\r\n                                title=\"Введите количество чтобы добавить товар в заказ\"\r\n                            />\r\n                        )}\r\n\r\n                        {reminder && (\r\n                            <span\r\n                                id=\"nothing\"\r\n                                className=\"btn btn-outline-secondary\"\r\n                                title=\"Ничего не нужно\"\r\n                            >\r\n                                <i className=\"bi bi-x-circle\" />\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        default:\r\n            return (\r\n                <div className=\"g-3\">\r\n                    <div\r\n                        className=\"form-control bg-secondary bg-opacity-10 text-center\"\r\n                        title=\"Изменить нельзя\"\r\n                    >\r\n                        {item.qty}\r\n                    </div>\r\n                    <StatusText status={item.status} classname=\"success\" />\r\n                </div>\r\n            );\r\n    }\r\n};\r\n\r\nBasketQty.propTypes = {\r\n    item: PropTypes.object.isRequired,\r\n    name: PropTypes.string.isRequired\r\n};\r\nexport default BasketQty;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst ProductPrice = ({ price }) => {\r\n    return <span className=\"text-nowrap \">{price} руб.</span>;\r\n};\r\n\r\nProductPrice.propTypes = {\r\n    price: PropTypes.string.isRequired\r\n};\r\nexport default ProductPrice;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst ProductName = ({ data }) => {\r\n    const { _id, article } = data;\r\n    const { artist, name } = data.title;\r\n    return (\r\n        <div className=\"small\" title=\"Показать полную информацию\">\r\n            <Link className=\"text-decoration-none\" to={`/${_id}`}>\r\n                <div className=\"text-muted text-decoration-none\">\r\n                    art: {article}\r\n                </div>\r\n                <div className=\"text-truncate\">{artist.name}</div>\r\n                <div className=\"text-truncate\">{name}</div>\r\n            </Link>\r\n        </div>\r\n    );\r\n};\r\n\r\nProductName.propTypes = {\r\n    data: PropTypes.object.isRequired\r\n};\r\nexport default ProductName;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Table from \"../../../common/table\";\r\nimport Barcode from \"../../../ui/barcode\";\r\nimport ProductPicture from \"../../productListPage/table/productPicture\";\r\nimport BasketQty from \"./basketQty\";\r\nimport ProductPrice from \"../../productListPage/table/productPrice\";\r\nimport ProductName from \"../../productListPage/table/productName\";\r\n// import StatusText from \"../../../common/form/statusText\";\r\n\r\nconst BasketTable = ({ name, data, totalDocs, loading, onReload, ...rest }) => {\r\n    const getItemData = (item) => {\r\n        const { qty, needQty, status, price, product } = item;\r\n        const { _id, count, title } = product;\r\n        const { format, barcode, label, style, origin } = title;\r\n        const nf = Intl.NumberFormat();\r\n\r\n        return {\r\n            _id,\r\n            title,\r\n            qty,\r\n            needQty,\r\n            status,\r\n            price,\r\n            priceFmt: nf.format(price),\r\n            count,\r\n            format,\r\n            label,\r\n            barcode,\r\n            style,\r\n            origin\r\n        };\r\n    };\r\n\r\n    // const prouctQty = (data, name) => {\r\n    //     if (rest.readOnly) {\r\n    //         console.log(\"prouctQty\", data.qty, data.needQty, data.status);\r\n    //         return (\r\n    //             <div className=\"g-3\">\r\n    //                 <div className=\"form-control bg-secondary bg-opacity-10 text-center\">\r\n    //                     {data.qty}\r\n    //                     {data.needQty ? `/${data.needQty}` : \"\"}\r\n    //                 </div>\r\n    //                 <StatusText status={data.status} classname=\"warning\" />\r\n    //             </div>\r\n    //         );\r\n    //     }\r\n    //     return <BasketQty data={data} name={name} />;\r\n    // };\r\n    const columns = [\r\n        {\r\n            name: \"image\",\r\n            width: 85,\r\n            component: (item) => <ProductPicture data={getItemData(item)} />\r\n        },\r\n        {\r\n            caption: \"Корзина\",\r\n            name: \"add\",\r\n            width: 190,\r\n            component: (item) => (\r\n                <BasketQty item={getItemData(item)} name={name} />\r\n            )\r\n        },\r\n        {\r\n            caption: \"Цена\",\r\n            name: \"price\",\r\n            sortable: true,\r\n            width: 115,\r\n            component: (item) => (\r\n                <ProductPrice price={getItemData(item).priceFmt} />\r\n            )\r\n        },\r\n        {\r\n            caption: \"Наименоване\",\r\n            name: \"name\",\r\n            sortable: true,\r\n            width: 300,\r\n            component: (item) => <ProductName data={getItemData(item)} />\r\n        },\r\n        {\r\n            caption: \"Формат\",\r\n            name: \"format\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getItemData(item).format.name}</div>\r\n            )\r\n        },\r\n        {\r\n            caption: \"Штрихкод\",\r\n            name: \"barcode\",\r\n            component: (item) => <Barcode barcode={getItemData(item).barcode} />\r\n        },\r\n        {\r\n            caption: \"Лейбл\",\r\n            name: \"label\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getItemData(item).label.name}</div>\r\n            )\r\n        },\r\n        {\r\n            caption: \"Страна\",\r\n            name: \"origin\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getItemData(item).origin}</div>\r\n            )\r\n        },\r\n        {\r\n            caption: \"Жанр\",\r\n            name: \"style\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getItemData(item).style}</div>\r\n            )\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <Table\r\n            {...{\r\n                name,\r\n                columns,\r\n                data,\r\n                totalDocs,\r\n                loading,\r\n                onReload,\r\n                headered: false,\r\n                paginator: false,\r\n                striped: false,\r\n                ...rest\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nBasketTable.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    data: PropTypes.array.isRequired,\r\n    totalDocs: PropTypes.number,\r\n    loading: PropTypes.bool.isRequired,\r\n    onReload: PropTypes.func.isRequired\r\n};\r\nexport default BasketTable;\r\n","import {\r\n    byRussianPost,\r\n    byCompanySDEK,\r\n    byCourier,\r\n    onPickupPoint\r\n} from \"./deliveries\";\r\n\r\nexport const payOnDelivery = {\r\n    value: \"Pay On Delivery\",\r\n    label: \"Наложенный платеж\",\r\n    visible: [byRussianPost.value]\r\n};\r\nexport const acquiring = {\r\n    value: \"Acquiring\",\r\n    label: \"Банковской картой\",\r\n    visible: [\r\n        byRussianPost.value,\r\n        byCompanySDEK.value,\r\n        byCourier.value,\r\n        onPickupPoint.value\r\n    ]\r\n};\r\nexport const sberbankReceipt = {\r\n    value: \"Sberbank Receipt\",\r\n    label: \"Квитанция СБЕРБАНКа\",\r\n    visible: [\r\n        byRussianPost.value,\r\n        byCompanySDEK.value,\r\n        byCourier.value,\r\n        onPickupPoint.value\r\n    ]\r\n};\r\nexport const cashInHand = {\r\n    value: \"Cash In Hand\",\r\n    label: \"Наличными представителю\",\r\n    visible: [byCourier.value, onPickupPoint.value]\r\n};\r\n\r\nexport default {\r\n    payOnDelivery,\r\n    acquiring,\r\n    sberbankReceipt,\r\n    cashInHand\r\n};\r\n","export const isRequired = \"isRequired\";\r\nexport const isEmail = \"isEmail\";\r\nexport const isPhone = \"isPhone\";\r\nexport const isCardNumber = \"isCardNumber\";\r\nexport const isMonthYear = \"isMonthYear\";\r\nexport const isCVC = \"isCVC\";\r\nexport const isIndex = \"isIndex\";\r\nexport const isCapitalSymbol = \"isCapitalSymbol\";\r\nexport const isContainDigit = \"isContainDigit\";\r\nexport const isLessThan = \"min\";\r\nexport const requiredIF = \"requiredIF\";\r\n\r\nexport const validateMethods = {\r\n    isRequired,\r\n    isEmail,\r\n    isPhone,\r\n    isCardNumber,\r\n    isMonthYear,\r\n    isCVC,\r\n    isIndex,\r\n    isCapitalSymbol,\r\n    isContainDigit,\r\n    isLessThan,\r\n    requiredIF\r\n};\r\n\r\nexport function validator(testData, config) {\r\n    const errors = {};\r\n\r\n    function validate(validateMethod, data, config) {\r\n        let nextCheck = false;\r\n        let notValid;\r\n        switch (validateMethod) {\r\n            case requiredIF: {\r\n                if (Array.isArray(config.values)) {\r\n                    if (config.values.includes(testData[config.inField])) {\r\n                        if (typeof data === \"boolean\") {\r\n                            notValid = !data;\r\n                        } else {\r\n                            notValid = data.trim() === \"\";\r\n                        }\r\n\r\n                        if (!notValid) nextCheck = true;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n            case isRequired: {\r\n                if (typeof data === \"boolean\") {\r\n                    notValid = !data;\r\n                } else {\r\n                    notValid = data.trim() === \"\";\r\n                }\r\n\r\n                break;\r\n            }\r\n            case isEmail: {\r\n                const regExp =\r\n                    /^((\"[\\w-\\s]+\")|([\\w-]+(?:\\.[\\w-]+)*)|(\"[\\w-\\s]+\")([\\w-]+(?:\\.[\\w-]+)*))(@((?:[\\w-]+\\.)*\\w[\\w-]{0,66})\\.([a-z]{2,6}(?:\\.[a-z]{2})?)$)|(@\\[?((25[0-5]\\.|2[0-4][0-9]\\.|1[0-9]{2}\\.|[0-9]{1,2}\\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\\]?$)/i;\r\n                notValid = !regExp.test(data);\r\n                break;\r\n            }\r\n            case isPhone: {\r\n                const regExp =\r\n                    /^[\\+]?[0-9]{1,4} [(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/g;\r\n                notValid = !regExp.test(data);\r\n                break;\r\n            }\r\n            case isCardNumber: {\r\n                const regExp = /^[0-9]{4} [0-9]{4} [0-9]{4} [0-9]{4}$/g;\r\n                notValid = !regExp.test(data);\r\n                break;\r\n            }\r\n            case isMonthYear: {\r\n                const regExp = /^[0-9]{3}$/g;\r\n                notValid = !regExp.test(data);\r\n                break;\r\n            }\r\n            case isCVC: {\r\n                const regExp = /^[0-9]{2}\\/[0-9]{2}$/g;\r\n                notValid = !regExp.test(data);\r\n                break;\r\n            }\r\n            case isIndex: {\r\n                const rusRegExp = /^\\d{6}$/g;\r\n                const usRegExp = /^\\d{5}[-\\s]\\d{4}$/g;\r\n                notValid = !(rusRegExp.test(data) || usRegExp.test(data));\r\n                break;\r\n            }\r\n            case isCapitalSymbol: {\r\n                const capitalRegExp = /[A-ZА-Я]+/g;\r\n                notValid = !capitalRegExp.test(data);\r\n                break;\r\n            }\r\n            case isContainDigit: {\r\n                const digitRegExp = /\\d+/g;\r\n                notValid = !digitRegExp.test(data);\r\n                break;\r\n            }\r\n            case isLessThan: {\r\n                notValid = data.length < config.value;\r\n                break;\r\n            }\r\n            default:\r\n                break;\r\n        }\r\n\r\n        return { error: notValid && config.message, nextCheck };\r\n    }\r\n\r\n    for (const fieldName in testData) {\r\n        const nestedConfig = config[fieldName];\r\n\r\n        for (const method in nestedConfig) {\r\n            const { error, nextCheck } = validate(\r\n                method,\r\n                testData[fieldName],\r\n                nestedConfig[method]\r\n            );\r\n\r\n            if (error && !errors[fieldName]) {\r\n                errors[fieldName] = error;\r\n            }\r\n\r\n            if (method === requiredIF) {\r\n                if (nextCheck) continue;\r\n                else break;\r\n            }\r\n        }\r\n    }\r\n\r\n    return errors;\r\n}\r\n","import React, { forwardRef, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst TextEdit = forwardRef((props, ref) => {\r\n    const { type, label, name, value, onChange, error, readOnly, ...rest } =\r\n        props;\r\n\r\n    const [showPassword, setShowPassword] = useState(false);\r\n\r\n    const handleChange = ({ target }) => {\r\n        if (readOnly) return;\r\n        // if (rest.nameCase) {\r\n        //     target.value = target.value.replace(\"  \", \" \");\r\n        // }\r\n        onChange({ name: target.name, value: target.value });\r\n    };\r\n    const getInputClasses = () => {\r\n        return readOnly\r\n            ? \"form-control bg-secondary bg-opacity-10\"\r\n            : \"form-control\" + (error ? \" is-invalid\" : \"\");\r\n    };\r\n\r\n    const toggleShowPassword = () => {\r\n        setShowPassword((prevState) => !prevState);\r\n        if (ref) {\r\n            ref.current.focus();\r\n            ref.current.select();\r\n        }\r\n    };\r\n\r\n    const style = rest.nameCase ? { textTransform: \"capitalize\" } : undefined;\r\n\r\n    return (\r\n        <div key={rest.key} className={rest.className}>\r\n            <label htmlFor={name}>\r\n                <span className=\"text-truncate\">{label}</span>\r\n            </label>\r\n            <div className=\"input-group has-validation\">\r\n                <input\r\n                    type={showPassword ? \"text\" : type}\r\n                    id={name}\r\n                    name={name}\r\n                    value={value}\r\n                    onChange={handleChange}\r\n                    className={getInputClasses()}\r\n                    readOnly={readOnly}\r\n                    placeholder={rest.placeholder || label}\r\n                    title={rest.placeholder || label}\r\n                    ref={ref}\r\n                    autoCapitalize={rest.autoCapitalize}\r\n                    style={style}\r\n                />\r\n                {type === \"password\" && (\r\n                    <div\r\n                        className=\"btn btn-sm btn-outline-secondary\"\r\n                        type=\"button\"\r\n                        onClick={toggleShowPassword}\r\n                    >\r\n                        <i\r\n                            className={\r\n                                \"bi bi-eye\" + (showPassword ? \"-slash\" : \"\")\r\n                            }\r\n                        ></i>\r\n                    </div>\r\n                )}\r\n                {error && (\r\n                    <div\r\n                        className=\"invalid-feedback text-truncate\"\r\n                        title={error}\r\n                    >\r\n                        {error}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\nTextEdit.defaultProps = {\r\n    type: \"text\"\r\n};\r\nTextEdit.propTypes = {\r\n    type: PropTypes.string,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    error: PropTypes.string,\r\n    readOnly: PropTypes.bool\r\n};\r\n\r\nTextEdit.displayName = \"TextEdit\";\r\n\r\nexport default TextEdit;\r\n","import React, { forwardRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst MaskEdit = forwardRef((props, ref) => {\r\n    const { label, type, name, value, onChange, error, readOnly, ...rest } =\r\n        props;\r\n\r\n    const handleChange = ({ target }) => {\r\n        if (readOnly) return;\r\n\r\n        onChange({ name: target.name, value: target.value });\r\n    };\r\n\r\n    const getInputClasses = () => {\r\n        return readOnly\r\n            ? \"form-control bg-secondary bg-opacity-10\"\r\n            : \"form-control\" + (error ? \" is-invalid\" : \"\");\r\n    };\r\n\r\n    const handleOnInput = (e) => {\r\n        switch (type) {\r\n            case \"phone\":\r\n                onPhoneInput(e);\r\n                break;\r\n            case \"index\":\r\n                onIndexInput(e);\r\n                break;\r\n            case \"card\":\r\n                onCardInput(e);\r\n                break;\r\n            case \"monYear\":\r\n                onMonYearInput(e);\r\n                break;\r\n            case \"cvc\":\r\n                onCvcInput(e);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    function handleOnPaste(e) {\r\n        const input = e.target;\r\n        const inputNumbersValue = getInputNumbersValue(input);\r\n\r\n        const pasted = e.clipboardData || window.clipboardData;\r\n        if (pasted) {\r\n            const pastedText = pasted.getData(\"Text\");\r\n            if ([\"phone\", \"index\", \"card\"].includes(type)) {\r\n                if (/\\D/g.test(pastedText)) {\r\n                    input.value = inputNumbersValue;\r\n                }\r\n            } else {\r\n                input.value = pastedText;\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleOnKeyDown = (e) => {\r\n        if (e.keyCode === 8) {\r\n            let inputValue = e.target.value.replace(/\\D/g, \"\");\r\n            if (inputValue.length > 0) {\r\n                inputValue = inputValue.substring(0, inputValue.length);\r\n                e.target.value = inputValue;\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div key={rest.key} className={rest.className}>\r\n            <label htmlFor={name}>\r\n                <span className=\"text-truncate\">{label}</span>\r\n            </label>\r\n            <div className=\"input-group has-validation\">\r\n                <input\r\n                    type={type === \"cvc\" ? \"password\" : \"tel\"}\r\n                    inputMode=\"numeric\"\r\n                    autoComplete=\"cc-number\"\r\n                    id={name}\r\n                    name={name}\r\n                    value={value}\r\n                    onChange={handleChange}\r\n                    onInput={handleOnInput}\r\n                    onPaste={handleOnPaste}\r\n                    onKeyDown={handleOnKeyDown}\r\n                    className={getInputClasses()}\r\n                    readOnly={readOnly}\r\n                    placeholder={rest.placeholder || label}\r\n                    title={rest.title || rest.placeholder || label}\r\n                    ref={ref}\r\n                />\r\n\r\n                {error && (\r\n                    <div\r\n                        className=\"invalid-feedback text-truncate\"\r\n                        title={error}\r\n                    >\r\n                        {error}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nMaskEdit.defaultProps = {\r\n    type: \"phone\"\r\n};\r\n\r\nMaskEdit.propTypes = {\r\n    type: PropTypes.string,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    error: PropTypes.string,\r\n    readOnly: PropTypes.bool\r\n};\r\n\r\nMaskEdit.displayName = \"MaskEdit\";\r\n\r\nexport default MaskEdit;\r\n\r\nfunction getInputNumbersValue(input) {\r\n    return input.value.replace(/\\D/g, \"\");\r\n}\r\n\r\nfunction onPhoneInput(e) {\r\n    const input = e.target;\r\n    let inputNumbersValue = getInputNumbersValue(input);\r\n    const selectionStart = input.selectionStart;\r\n    let formattedInputValue = \"\";\r\n\r\n    if (!inputNumbersValue) {\r\n        return (input.value = \"\");\r\n    }\r\n\r\n    if (input.value.length !== selectionStart) {\r\n        // Editing in the middle of input, not last symbol\r\n        if (e.data && /\\D/g.test(e.data)) {\r\n            // Attempt to input non-numeric symbol\r\n            input.value = inputNumbersValue;\r\n        }\r\n        return;\r\n    }\r\n\r\n    if ([\"7\", \"8\", \"9\"].indexOf(inputNumbersValue[0]) > -1) {\r\n        /* ru */\r\n        if (inputNumbersValue[0] === \"9\") {\r\n            inputNumbersValue = \"7\" + inputNumbersValue;\r\n        }\r\n\r\n        const firstSymbols = inputNumbersValue[0] === \"8\" ? \"8\" : \"+7\";\r\n        formattedInputValue = input.value = firstSymbols + \" \";\r\n        if (inputNumbersValue.length > 1) {\r\n            formattedInputValue += \"(\" + inputNumbersValue.substring(1, 4);\r\n        }\r\n\r\n        if (inputNumbersValue.length >= 5) {\r\n            formattedInputValue += \") \" + inputNumbersValue.substring(4, 7);\r\n        }\r\n\r\n        if (inputNumbersValue.length >= 8) {\r\n            formattedInputValue += \"-\" + inputNumbersValue.substring(7, 11);\r\n        }\r\n    } else {\r\n        if (input.value[0] === \"+\") {\r\n            formattedInputValue = input.value;\r\n        } else {\r\n            formattedInputValue = \"+\" + input.value;\r\n        }\r\n        formattedInputValue = formattedInputValue.substring(0, 18);\r\n    }\r\n    input.value = formattedInputValue;\r\n}\r\n\r\nfunction onIndexInput(e) {\r\n    const input = e.target;\r\n    console.log(\"onIndexInput\", input);\r\n\r\n    const inputNumbersValue = getInputNumbersValue(input);\r\n    console.log(\"onIndexInput\", inputNumbersValue);\r\n    const selectionStart = input.selectionStart;\r\n\r\n    if (!inputNumbersValue) {\r\n        return (input.value = \"\");\r\n    }\r\n\r\n    if (input.value.length !== selectionStart) {\r\n        // Editing in the middle of input, not last symbol\r\n        if (e.data && /\\D/g.test(e.data)) {\r\n            // Attempt to input non-numeric symbol\r\n            input.value = inputNumbersValue;\r\n        }\r\n        return;\r\n    }\r\n    input.value = inputNumbersValue.substring(0, 6);\r\n}\r\n\r\nfunction onCardInput(e) {\r\n    const input = e.target;\r\n    const inputNumbersValue = getInputNumbersValue(input);\r\n    const selectionStart = input.selectionStart;\r\n    let formattedInputValue = \"\";\r\n\r\n    if (!inputNumbersValue) {\r\n        return (input.value = \"\");\r\n    }\r\n\r\n    if (input.value.length !== selectionStart) {\r\n        // Editing in the middle of input, not last symbol\r\n        if (e.data && /\\D/g.test(e.data)) {\r\n            // Attempt to input non-numeric symbol\r\n            input.value = inputNumbersValue;\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (inputNumbersValue.length >= 1) {\r\n        formattedInputValue += inputNumbersValue.substring(0, 4);\r\n    }\r\n\r\n    if (inputNumbersValue.length >= 4) {\r\n        formattedInputValue += \" \" + inputNumbersValue.substring(4, 8);\r\n    }\r\n\r\n    if (inputNumbersValue.length >= 8) {\r\n        formattedInputValue += \" \" + inputNumbersValue.substring(8, 12);\r\n    }\r\n\r\n    if (inputNumbersValue.length >= 12) {\r\n        formattedInputValue += \" \" + inputNumbersValue.substring(12, 16);\r\n    }\r\n\r\n    formattedInputValue = formattedInputValue.substring(0, 19);\r\n\r\n    input.value = formattedInputValue;\r\n}\r\nfunction onCvcInput(e) {\r\n    const input = e.target;\r\n    const inputNumbersValue = getInputNumbersValue(input);\r\n    const selectionStart = input.selectionStart;\r\n    let formattedInputValue = \"\";\r\n\r\n    if (!inputNumbersValue) {\r\n        return (input.value = \"\");\r\n    }\r\n\r\n    if (input.value.length !== selectionStart) {\r\n        // Editing in the middle of input, not last symbol\r\n        if (e.data && /\\D/g.test(e.data)) {\r\n            // Attempt to input non-numeric symbol\r\n            input.value = inputNumbersValue;\r\n        }\r\n        return;\r\n    }\r\n\r\n    formattedInputValue = inputNumbersValue.substring(0, 3);\r\n\r\n    input.value = formattedInputValue;\r\n}\r\n\r\nfunction onMonYearInput(e) {\r\n    const input = e.target;\r\n    const inputNumbersValue = getInputNumbersValue(input);\r\n    const selectionStart = input.selectionStart;\r\n    let formattedInputValue = \"\";\r\n\r\n    if (!inputNumbersValue) {\r\n        return (input.value = \"\");\r\n    }\r\n\r\n    if (input.value.length !== selectionStart) {\r\n        // Editing in the middle of input, not last symbol\r\n        if (e.data && /\\D/g.test(e.data)) {\r\n            // Attempt to input non-numeric symbol\r\n            input.value = inputNumbersValue;\r\n        }\r\n        return;\r\n    }\r\n\r\n    if (inputNumbersValue.length >= 1) {\r\n        if (inputNumbersValue.length === 2) {\r\n            let month = Math.max(\r\n                1,\r\n                Math.min(12, Number.parseInt(inputNumbersValue))\r\n            ).toString();\r\n\r\n            if (month.length === 1) {\r\n                month = \"0\" + month;\r\n            }\r\n            formattedInputValue += month;\r\n        } else {\r\n            formattedInputValue += inputNumbersValue.substring(0, 2);\r\n        }\r\n    }\r\n\r\n    if (inputNumbersValue.length > 2) {\r\n        if (inputNumbersValue.length === 4) {\r\n            const currYear = new Date().getFullYear() - 2000;\r\n            const year = Math.max(\r\n                currYear,\r\n                Math.min(99, Number.parseInt(inputNumbersValue.substring(2, 4)))\r\n            ).toString();\r\n            formattedInputValue += \"/\" + year;\r\n        }\r\n        formattedInputValue += \"/\" + inputNumbersValue.substring(2, 4);\r\n    }\r\n\r\n    formattedInputValue = formattedInputValue.substring(0, 5);\r\n\r\n    input.value = formattedInputValue;\r\n}\r\n","import React, { forwardRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst PlaceIdField = forwardRef((props, ref) => {\r\n    const {\r\n        label,\r\n        value,\r\n        onChange,\r\n        defaultOption,\r\n        options,\r\n        error,\r\n        name,\r\n        readOnly,\r\n        ...rest\r\n    } = props;\r\n\r\n    const isSelect = Array.isArray(options) && options.length > 0;\r\n    const handleChange = ({ target }) => {\r\n        if (readOnly) return;\r\n        onChange({ name: target.name, value: target.value });\r\n    };\r\n    const getInputClasses = () => {\r\n        if (isSelect) {\r\n            return readOnly\r\n                ? \"form-select bg-secondary bg-opacity-10\"\r\n                : \"form-select\" + (error ? \" is-invalid\" : \"\");\r\n        } else {\r\n            return readOnly\r\n                ? \"form-control bg-secondary bg-opacity-10\"\r\n                : \"form-control\" + (error ? \" is-invalid\" : \"\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={rest.className}>\r\n            <label htmlFor={name}>\r\n                <span className=\"text-truncate\">{label}</span>\r\n            </label>\r\n            {!isSelect && (\r\n                <input\r\n                    type=\"text\"\r\n                    id={name}\r\n                    name={name}\r\n                    value={value}\r\n                    onChange={handleChange}\r\n                    className={getInputClasses()}\r\n                    readOnly={readOnly}\r\n                    placeholder={rest.placeholder || label}\r\n                    title={rest.placeholder || label}\r\n                    style={{ textTransform: \"capitalize\" }}\r\n                />\r\n            )}\r\n\r\n            {isSelect && (\r\n                <select\r\n                    className={getInputClasses()}\r\n                    id={name}\r\n                    name={name}\r\n                    value={value}\r\n                    onChange={handleChange}\r\n                    placeholder={rest.placeholder || label}\r\n                    readOnly={readOnly}\r\n                    title={rest.placeholder || label}\r\n                >\r\n                    <option disabled value=\"\">\r\n                        {defaultOption}\r\n                    </option>\r\n                    {options &&\r\n                        options.length > 0 &&\r\n                        options.map((option) => (\r\n                            <option value={option.value} key={option.value}>\r\n                                {option.label}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            )}\r\n\r\n            {error && (\r\n                <div className=\"invalid-feedback text-truncate\">{error}</div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nPlaceIdField.defaultProps = {\r\n    defaultOption: \"Выбрать...\"\r\n};\r\n\r\nPlaceIdField.propTypes = {\r\n    defaultOption: PropTypes.string,\r\n    label: PropTypes.string,\r\n    value: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    error: PropTypes.string,\r\n    options: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\r\n    name: PropTypes.string,\r\n    readOnly: PropTypes.bool\r\n};\r\nPlaceIdField.displayName = \"PlaceIdField\";\r\n\r\nexport default PlaceIdField;\r\n","import React, { forwardRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst SelectEdit = forwardRef((props, ref) => {\r\n    const {\r\n        label,\r\n        value,\r\n        onChange,\r\n        defaultOption,\r\n        options,\r\n        error,\r\n        name,\r\n        readOnly,\r\n        ...rest\r\n    } = props;\r\n\r\n    const handleChange = ({ target }) => {\r\n        if (readOnly) return;\r\n        onChange({ name: target.name, value: target.value });\r\n    };\r\n\r\n    const getInputClasses = () => {\r\n        return readOnly\r\n            ? \"form-select bg-secondary bg-opacity-10\"\r\n            : \"form-select\" + (error ? \" is-invalid\" : \"\");\r\n    };\r\n\r\n    const optionsArray =\r\n        !Array.isArray(options) && typeof options === \"object\"\r\n            ? Object.values(options)\r\n            : options;\r\n\r\n    return (\r\n        <div key={rest.key} className={rest.className}>\r\n            <label htmlFor={name}>\r\n                <span className=\"text-truncate\">{label}</span>\r\n            </label>\r\n            <select\r\n                className={getInputClasses()}\r\n                id={name}\r\n                name={name}\r\n                value={value}\r\n                onChange={handleChange}\r\n                placeholder={rest.placeholder || label}\r\n                readOnly={readOnly}\r\n                title={rest.placeholder || label}\r\n            >\r\n                <option disabled value=\"\">\r\n                    {defaultOption}\r\n                </option>\r\n                {optionsArray.length > 0 &&\r\n                    optionsArray.map((option) => (\r\n                        <option value={option.value} key={option.value}>\r\n                            {option.label}\r\n                        </option>\r\n                    ))}\r\n            </select>\r\n            {error && (\r\n                <div className=\"invalid-feedback text-truncate\">{error}</div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nSelectEdit.defaultProps = {\r\n    defaultOption: \"Выбрать...\"\r\n};\r\n\r\nSelectEdit.propTypes = {\r\n    defaultOption: PropTypes.string,\r\n    label: PropTypes.string,\r\n    value: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    error: PropTypes.string,\r\n    options: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\r\n    name: PropTypes.string,\r\n    readOnly: PropTypes.bool\r\n};\r\nSelectEdit.displayName = \"TextEdit\";\r\n\r\nexport default SelectEdit;\r\n","import React, { forwardRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst MemoEdit = forwardRef((props, ref) => {\r\n    const { label, type, name, value, onChange, error, readOnly, ...rest } =\r\n        props;\r\n\r\n    const handleChange = ({ target }) => {\r\n        if (readOnly) return;\r\n        onChange({ name: target.name, value: target.value });\r\n    };\r\n    const getInputClasses = () => {\r\n        return readOnly\r\n            ? \"form-control bg-secondary bg-opacity-10\"\r\n            : \"form-control\" + (error ? \" is-invalid\" : \"\");\r\n    };\r\n\r\n    return (\r\n        <div key={rest.key} className={rest.className}>\r\n            <label htmlFor={name}>\r\n                <span className=\"text-truncate\">{label}</span>\r\n            </label>\r\n            <div className=\"input-group has-validation\">\r\n                <textarea\r\n                    id={name}\r\n                    name={name}\r\n                    value={value}\r\n                    onChange={handleChange}\r\n                    className={getInputClasses()}\r\n                    readOnly={readOnly}\r\n                    placeholder={rest.placeholder || label}\r\n                    title={rest.placeholder || label}\r\n                />\r\n\r\n                {error && (\r\n                    <div\r\n                        className=\"invalid-feedback text-truncate\"\r\n                        title={error}\r\n                    >\r\n                        {error}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\nMemoEdit.defaultProps = {\r\n    type: \"text\"\r\n};\r\nMemoEdit.propTypes = {\r\n    type: PropTypes.string,\r\n    label: PropTypes.string,\r\n    name: PropTypes.string,\r\n    value: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    error: PropTypes.string,\r\n    readOnly: PropTypes.bool\r\n};\r\n\r\nMemoEdit.displayName = \"MemoEdit\";\r\n\r\nexport default MemoEdit;\r\n","import React from \"react\";\r\n\r\nimport payments from \"./payments\";\r\nimport deliveries from \"./deliveries\";\r\nimport {\r\n    isLessThan,\r\n    isPhone,\r\n    isIndex,\r\n    isRequired,\r\n    requiredIF\r\n} from \"../../../../utils/validator\";\r\nimport TextEdit from \"../../../common/form/textEdit\";\r\nimport MaskEdit from \"../../../common/form/maskEdit\";\r\nimport PlaceIdField from \"./placeIdField\";\r\nimport SelectEdit from \"../../../common/form/selectEdit\";\r\nimport MemoEdit from \"../../../common/form/memoEdit\";\r\n\r\nconst methonds = {\r\n    [isRequired]: { message: \"Обязательная информация!\" },\r\n    [isPhone]: { message: \"Телефоный номер введён не корректно!\" },\r\n    [isIndex]: { message: \"Почтовый индекс введён не корректно!\" },\r\n    [isLessThan]: {\r\n        message: \"В строке должно быть минимум 3 символа!\",\r\n        value: 3\r\n    },\r\n    [requiredIF]: {\r\n        message: \"Обязательная информация!\",\r\n        inField: \"\",\r\n        values: []\r\n    }\r\n};\r\n\r\nconst getMethods = (name, rest) => {\r\n    if (Array.isArray(name)) {\r\n        let result = {};\r\n        for (let i = 0; i < name.length; i++) {\r\n            const arrName = name[i];\r\n            const method = methonds[arrName];\r\n            const other = (rest && rest[i]) || {};\r\n            result = { ...result, [arrName]: { ...method, ...other } };\r\n        }\r\n        return result;\r\n    } else {\r\n        const method = methonds[name];\r\n        return {\r\n            [name]: { ...method, ...rest }\r\n        };\r\n    }\r\n};\r\n\r\nexport default {\r\n    placeId: {\r\n        title: \"Место доставки\",\r\n        value: \"\",\r\n        component: (attr) => <PlaceIdField {...attr} />,\r\n        placeholder: \"Например: Дом/ Работа/ К тёще... (их может быть много)\",\r\n        required: getMethods([isRequired, isLessThan])\r\n    },\r\n    persone: {\r\n        title: \"Контактное лицо\",\r\n        value: \"\",\r\n        component: (attr) => <TextEdit {...attr} nameCase={true} />,\r\n        placeholder: \"Например: ФИО, если доставка не вам\",\r\n        required: getMethods(isRequired),\r\n        group: \"persone\"\r\n    },\r\n    phone: {\r\n        title: \"Телефон для связи\",\r\n        value: \"\",\r\n        component: (attr) => <MaskEdit {...attr} type=\"phone\" />,\r\n        // component: (attr) => (<TextEdit {...attr} />),\r\n        placeholder: \"Телефон для связи\",\r\n        required: getMethods([isRequired, isPhone]),\r\n        group: \"persone\",\r\n        size: 4\r\n    },\r\n    delivery: {\r\n        title: \"Способ доставки\",\r\n        value: deliveries.byRussianPost.value,\r\n        component: (attr) => <SelectEdit {...attr} />,\r\n        src: deliveries,\r\n        required: getMethods(isRequired),\r\n        group: \"option\"\r\n    },\r\n    payment: {\r\n        title: \"Способ оплаты\",\r\n        value: payments.payOnDelivery.value,\r\n        component: (attr) => <SelectEdit {...attr} />,\r\n        src: payments,\r\n        required: getMethods(isRequired),\r\n        group: \"option\"\r\n    },\r\n    index: {\r\n        title: \"Почтовый индекс\",\r\n        value: \"\",\r\n        component: (attr) => <MaskEdit {...attr} type=\"index\" />,\r\n        placeholder: \"Требуется, если доставка в другой город\",\r\n        required: getMethods(\r\n            [requiredIF, isIndex],\r\n            [\r\n                {\r\n                    values: [\r\n                        deliveries.byRussianPost.value,\r\n                        deliveries.byCompanySDEK.value\r\n                    ],\r\n                    inField: \"delivery\"\r\n                },\r\n                null\r\n            ]\r\n        ),\r\n        group: \"address\",\r\n        size: 3\r\n    },\r\n    address: {\r\n        title: \"Адрес доставки\",\r\n        value: \"\",\r\n        component: (attr) => <TextEdit {...attr} />,\r\n        placeholder: \"Требуется, если доставка не в пункт самовывоза\",\r\n        required: getMethods(requiredIF, {\r\n            values: [\r\n                deliveries.byRussianPost.value,\r\n                deliveries.byCompanySDEK.value,\r\n                deliveries.byCourier.value\r\n            ],\r\n            inField: \"delivery\"\r\n        }),\r\n        group: \"address\"\r\n    },\r\n    note: {\r\n        title: \"Примечание\",\r\n        value: \"\",\r\n        component: (attr) => <MemoEdit {...attr} />,\r\n        placeholder: \"Например: Домофон, другой номер телефона, ...\"\r\n    }\r\n};\r\n","import defMap from \"./applyMap\";\r\n\r\nexport const valueOfName = (name) => {\r\n    const value = defMap[name].value;\r\n    if (typeof value === \"string\") {\r\n        return value;\r\n    }\r\n\r\n    return value.value;\r\n};\r\n\r\nexport const createGroups = (data) => {\r\n    const result = {};\r\n    Object.keys(data).forEach((key) => {\r\n        if (data[key].group) {\r\n            const group = result[data[key].group] || [];\r\n            group.push(key);\r\n            result[data[key].group] = group;\r\n        } else {\r\n            result[key] = key;\r\n        }\r\n    });\r\n\r\n    return result;\r\n};\r\n\r\nexport const validatorConfig = {};\r\nexport const defaultData = {};\r\n\r\nexport const createDefaults = () => {\r\n    if (Object.keys(defaultData).length > 0) return;\r\n    Object.keys(defMap).forEach((key) => {\r\n        defaultData[key] = valueOfName(key);\r\n        creatValidConfiguration(key);\r\n    });\r\n};\r\n\r\nfunction addValidatorConfig(name, data) {\r\n    if (validatorConfig[name]?.message) return;\r\n\r\n    validatorConfig[name] = { ...data };\r\n}\r\n\r\nfunction creatValidConfiguration(name) {\r\n    const item = defMap[name];\r\n\r\n    if (item.required) {\r\n        addValidatorConfig(name, item.required);\r\n    }\r\n}\r\n","export function sklonenie(number, txt) {\r\n    const cases = [2, 0, 1, 1, 1, 2];\r\n    return txt[\r\n        number % 100 > 4 && number % 100 < 20\r\n            ? 2\r\n            : cases[number % 10 < 5 ? number % 10 : 5]\r\n    ];\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { disassemble } from \"../../../../store/basket\";\r\nimport { sklonenie } from \"../../../../utils/sklonenie\";\r\n\r\nconst fiveMinutes = 5 * 60 * 1000;\r\n\r\nclass CheckAlerter extends Component {\r\n    timerId;\r\n    diff;\r\n    diffDays;\r\n    diffHours;\r\n    diffMinutes;\r\n    constructor(props) {\r\n        super(props);\r\n        const { checkedAt } = this.props.data;\r\n\r\n        this.state = {\r\n            checkedAt: checkedAt,\r\n            refresh: false\r\n        };\r\n\r\n        this.refreshContent = this.refreshContent.bind(this);\r\n        this.initDeadline = this.initDeadline.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.timerId = setInterval(this.refreshContent, fiveMinutes);\r\n        this.initDeadline();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        clearInterval(this.timerId);\r\n    }\r\n\r\n    initDeadline() {\r\n        const { checkedAt } = this.state;\r\n        const deadline = new Date(checkedAt).setDate(\r\n            new Date(checkedAt).getDate() + 3\r\n        );\r\n        const diff = deadline - new Date();\r\n        this.diffDays = diff > 0 ? Math.floor(diff / 1000 / 60 / 60 / 24) : 0;\r\n        this.diffHours = diff > 0 ? Math.floor(diff / 1000 / 60 / 60) % 24 : 0;\r\n        this.diffMinutes = diff > 0 ? Math.floor(diff / 1000 / 60) % 60 : 0;\r\n        if (diff <= 0) {\r\n            this.props.disassemble();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.state.refresh !== prevState.refresh) {\r\n            this.initDeadline();\r\n        }\r\n    }\r\n\r\n    refreshContent() {\r\n        this.setState((prevState) => ({\r\n            ...prevState,\r\n            refresh: !prevState.refresh\r\n        }));\r\n    }\r\n\r\n    hoursLeft(hours) {\r\n        return hours + \" \" + sklonenie(hours, [\"час\", \"часа\", \"часов\"]);\r\n    }\r\n\r\n    minutesLeft(minutes) {\r\n        return (\r\n            minutes + \" \" + sklonenie(minutes, [\"минуту\", \"минуты\", \"минут\"])\r\n        );\r\n    }\r\n\r\n    className() {\r\n        const { diffDays, diffHours } = this;\r\n        let result = \"alert alert-\";\r\n        if (diffDays >= 2 && diffHours > 22) {\r\n            return (result += \"success\");\r\n        }\r\n        if (diffDays >= 1 && diffHours >= 12) {\r\n            return (result += \"warning\");\r\n        }\r\n        return (result += \"danger\");\r\n    }\r\n\r\n    showText() {\r\n        const { diffDays, diffHours, diffMinutes, hoursLeft, minutesLeft } =\r\n            this;\r\n\r\n        const iconInfo = <i className=\"bi bi-info-circle me-2\" />;\r\n        const iconWhatAbout = <i className=\"bi bi-question-circle-fill me-2\" />;\r\n        const iconExclamation = <i className=\"bi bi-exclamation-circle me-2\" />;\r\n        const iconExclamationHard = (\r\n            <i className=\"bi bi-exclamation-circle-fill me-2\" />\r\n        );\r\n        const iconKirdyk = <i className=\"bi bi-x-circle me-2\" />;\r\n\r\n        if (diffDays >= 2 && diffHours > 22) {\r\n            return (\r\n                <span>\r\n                    {iconInfo}Заказ проверен и зарезервирован за вами.\r\n                    Пожалуйста, оформите заказ в течении 3 дней, иначе он будет\r\n                    расформирован...\r\n                </span>\r\n            );\r\n        }\r\n\r\n        if (diffDays === 2) {\r\n            return (\r\n                <span>\r\n                    {iconExclamation}Заказ проверен и зарезервирован за вами.\r\n                    Пожалуйста, оформите заказ в течении 2 дней, иначе он будет\r\n                    расформирован...\r\n                </span>\r\n            );\r\n        }\r\n\r\n        if (diffDays === 1 && diffHours >= 12) {\r\n            return (\r\n                <span>\r\n                    {iconExclamation}Напоминаем! Заказ будет расформирован через\r\n                    1 день и {hoursLeft(diffHours)} если не оформите его...\r\n                </span>\r\n            );\r\n        }\r\n\r\n        if (diffDays === 1) {\r\n            if (diffHours > 0) {\r\n                return (\r\n                    <span>\r\n                        {iconExclamationHard}Напоминаем! Заказ будет\r\n                        расформирован через 1 день и {hoursLeft(diffHours)} если\r\n                        не оформите его...\r\n                    </span>\r\n                );\r\n            }\r\n\r\n            return (\r\n                <span>\r\n                    {iconExclamationHard}Напоминаем! Заказ будет расформирован\r\n                    через 1 день, если не оформите его...\r\n                </span>\r\n            );\r\n        }\r\n\r\n        if (diffDays === 0) {\r\n            if (diffHours > 0) {\r\n                return (\r\n                    <span>\r\n                        {iconWhatAbout}ВНИМАНИЕ!!! Заказ будет расформирован\r\n                        через {hoursLeft(diffHours)} и{\" \"}\r\n                        {minutesLeft(diffMinutes)} если не успеете оформить\r\n                        его...\r\n                    </span>\r\n                );\r\n            }\r\n\r\n            if (diffMinutes > 0) {\r\n                return (\r\n                    <span>\r\n                        {iconWhatAbout}ВНИМАНИЕ!!! Заказ будет расформирован\r\n                        через {minutesLeft(diffMinutes)} если не успеете\r\n                        оформить его...\r\n                    </span>\r\n                );\r\n            }\r\n            return <span>{iconKirdyk}Заказ расформирован</span>;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.authUser) return null;\r\n        return (\r\n            <div className={this.className()} role=\"alert\">\r\n                {this.showText()}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nCheckAlerter.propTypes = {\r\n    data: PropTypes.object,\r\n    authUser: PropTypes.object,\r\n    disassemble: PropTypes.func\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const { authUser } = state.auth;\r\n    const { data } = state.basket;\r\n    return {\r\n        data,\r\n        authUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    disassemble\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckAlerter);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport payments from \"./payments\";\r\nimport deliveries from \"./deliveries\";\r\nimport { updateDlvInfo } from \"../../../../store/basket\";\r\nimport fieldsMap from \"./applyMap\";\r\nimport {\r\n    createDefaults,\r\n    createGroups,\r\n    defaultData,\r\n    validatorConfig\r\n} from \"./utils\";\r\nimport { validator } from \"../../../../utils/validator\";\r\nimport CheckAlerter from \"./alerter\";\r\n\r\nclass ApplyForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        createDefaults();\r\n        const { deliveryInfo } = this.props.data;\r\n        this.state = {\r\n            deliveryInfo: { ...(deliveryInfo || defaultData) },\r\n            errors: {}\r\n        };\r\n\r\n        this.applyRefs = React.createRef();\r\n        this.handleCange = this.handleCange.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const { persone } = this.state.deliveryInfo;\r\n        const { authUser } = this.props;\r\n        if (authUser && persone === \"\") {\r\n            this.handleCange({\r\n                name: \"persone\",\r\n                value: authUser.name\r\n            });\r\n        }\r\n        this.validate();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { persone } = this.state.deliveryInfo;\r\n        const { authUser } = this.props;\r\n        const currName = authUser?.name || \"\";\r\n        const prevName = prevProps.authUser?.name || \"\";\r\n        if (currName !== prevName) {\r\n            if (currName !== \"\" && persone === \"\") {\r\n                this.handleCange({\r\n                    name: \"persone\",\r\n                    value: currName\r\n                });\r\n            }\r\n        }\r\n\r\n        if (\r\n            JSON.stringify(this.state.deliveryInfo) !==\r\n            JSON.stringify(prevState.deliveryInfo)\r\n        ) {\r\n            const isValid = this.validate();\r\n\r\n            this.handleCange({\r\n                name: \"isValid\",\r\n                value: isValid\r\n            });\r\n\r\n            this.props.updateDlvInfo({\r\n                ...this.state.deliveryInfo,\r\n                isValid\r\n            });\r\n        }\r\n    }\r\n\r\n    handleCange({ name, value }) {\r\n        const deliveryInfo = { ...this.state.deliveryInfo, [name]: value };\r\n        switch (name) {\r\n            case \"delivery\":\r\n                switch (value) {\r\n                    case deliveries.byRussianPost.value:\r\n                        deliveryInfo.payment = deliveries.byRussianPost.payment;\r\n                        break;\r\n                    case deliveries.byCompanySDEK.value:\r\n                        deliveryInfo.payment = deliveries.byCompanySDEK.payment;\r\n                        break;\r\n                    case deliveries.byCourier.value:\r\n                        deliveryInfo.payment = deliveries.byCourier.payment;\r\n                        break;\r\n                    case deliveries.onPickupPoint.value:\r\n                        deliveryInfo.payment = deliveries.onPickupPoint.payment;\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                break;\r\n\r\n            case \"payment\":\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.setState((prevState) => ({\r\n            ...prevState,\r\n            deliveryInfo\r\n        }));\r\n    }\r\n\r\n    setErrors(errors) {\r\n        this.setState((prevState) => ({\r\n            ...prevState,\r\n            errors: { ...errors }\r\n        }));\r\n    }\r\n\r\n    validate() {\r\n        const errors = validator(this.state.deliveryInfo, validatorConfig);\r\n        this.setErrors(errors);\r\n        return Object.keys(errors).length === 0;\r\n    }\r\n\r\n    getOptions(name) {\r\n        switch (name) {\r\n            case \"delivery\": {\r\n                return Object.keys(deliveries).map((key, index) => ({\r\n                    value: deliveries[key].value,\r\n                    label: deliveries[key].label\r\n                }));\r\n            }\r\n            case \"payment\": {\r\n                const { delivery } = this.state.deliveryInfo;\r\n                return Object.keys(payments)\r\n                    .map((key, index) => ({\r\n                        value: payments[key].value,\r\n                        label: payments[key].label,\r\n                        visible: payments[key].visible\r\n                    }))\r\n                    .filter((p) => p.visible.includes(delivery));\r\n            }\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    getReadOnly(name) {\r\n        const { status } = this.props.data;\r\n        if (status === \"needpay\") return true;\r\n        switch (name) {\r\n            case \"index\": {\r\n                const { delivery } = this.state.deliveryInfo;\r\n                return [\r\n                    deliveries.byCourier.value,\r\n                    deliveries.onPickupPoint.value\r\n                ].includes(delivery);\r\n            }\r\n            case \"address\": {\r\n                const { delivery } = this.state.deliveryInfo;\r\n                return deliveries.onPickupPoint.value === delivery;\r\n            }\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n\r\n    getValue(name) {\r\n        switch (name) {\r\n            case \"index\": {\r\n                const { delivery } = this.state.deliveryInfo;\r\n                if (\r\n                    [\r\n                        deliveries.byCourier.value,\r\n                        deliveries.onPickupPoint.value\r\n                    ].includes(delivery)\r\n                ) {\r\n                    return \"-\";\r\n                }\r\n                return this.state.deliveryInfo[name] || \"\";\r\n            }\r\n            case \"address\": {\r\n                const { delivery } = this.state.deliveryInfo;\r\n                if (deliveries.onPickupPoint.value === delivery) {\r\n                    return deliveries.onPickupPoint.label;\r\n                }\r\n                return this.state.deliveryInfo[name] || \"\";\r\n            }\r\n            default:\r\n                return this.state.deliveryInfo[name] || \"\";\r\n        }\r\n    }\r\n\r\n    createItem(name, gKey, classes) {\r\n        const classname = () => {\r\n            const result = classes || \"mb-1\";\r\n            return result;\r\n        };\r\n        const item = fieldsMap[name];\r\n        const label = item.title;\r\n\r\n        const attr = {\r\n            key: gKey.key,\r\n            name,\r\n            label,\r\n            className: classname(item),\r\n            value: this.getValue(name),\r\n            onChange: this.handleCange,\r\n            placeholder: item.placeholder || label,\r\n            error: this.state.errors[name],\r\n            options: this.getOptions(name),\r\n            readOnly: this.getReadOnly(name)\r\n        };\r\n\r\n        return item.component(attr);\r\n    }\r\n\r\n    groupWrapper(key, group, gKey) {\r\n        gKey.key += 1;\r\n        if (Array.isArray(group)) {\r\n            return (\r\n                <div className=\"mb-1\" key={key}>\r\n                    <div className=\"row g-3\">\r\n                        {group.map((key, index) => {\r\n                            const item = fieldsMap[key];\r\n                            const classCol = item.size\r\n                                ? \"col-\" + item.size\r\n                                : \"col\";\r\n                            gKey.key += index;\r\n                            return this.createItem(key, gKey, classCol);\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return this.createItem(key, gKey);\r\n        }\r\n    }\r\n\r\n    createControls() {\r\n        const groups = createGroups(fieldsMap);\r\n        const gKey = {\r\n            key: 0\r\n        };\r\n        return (\r\n            <>\r\n                {Object.keys(groups).map((key, index) => {\r\n                    const group = groups[key];\r\n\r\n                    return this.groupWrapper(key, group, gKey);\r\n                })}\r\n            </>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const { step, data } = this.props;\r\n        if (data.status === \"basket\") return null;\r\n\r\n        return (\r\n            <div className=\"px-0\">\r\n                {step === \"check\" && data.status === \"basket\" && (\r\n                    <div className=\"form-control bg-success bg-opacity-10 text-md-center text-success\">\r\n                        <span className=\"spinner-border spinner-border-sm  me-2\" />\r\n                        Корзина на проверке...\r\n                    </div>\r\n                )}\r\n                {step === \"apply\" && (\r\n                    <div className=\"form-control bg-success bg-opacity-10 text-md-center text-success\">\r\n                        <span className=\"spinner-border spinner-border-sm  me-2\" />\r\n                        Заказ в обработке...\r\n                    </div>\r\n                )}\r\n                <div>\r\n                    <div className=\"card-header\">\r\n                        <i className=\"bi bi-check2-square me-2\" />\r\n                        {data.status === \"checked\"\r\n                            ? \"Корзина проверена.\"\r\n                            : \"Заказ принят.\"}\r\n                    </div>\r\n                    <div className=\"col-md-8\">\r\n                        <div className=\"card-body px-0\">\r\n                            <CheckAlerter />\r\n                            {this.createControls()}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nApplyForm.propTypes = {\r\n    data: PropTypes.object,\r\n    step: PropTypes.string.isRequired,\r\n    authUser: PropTypes.object,\r\n    updateDlvInfo: PropTypes.func\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const { authUser } = state.auth;\r\n    const { data } = state.basket;\r\n    return {\r\n        data,\r\n        authUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    updateDlvInfo\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ApplyForm);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\n\r\nconst defaultItem = {\r\n    path: \"path\",\r\n    name: \"name\",\r\n    icon: \"bi-gear\",\r\n    component: undefined\r\n};\r\nconst defaultMenu = {\r\n    name: \"product\",\r\n    caption: { name: \"Покупки\", icon: \"bi-cart\" },\r\n    items: [defaultItem]\r\n};\r\n\r\nconst SideBarWrapper = ({\r\n    backBtn,\r\n    menu,\r\n    selected,\r\n    onItemSelect,\r\n    menuAfterChildren,\r\n    children\r\n}) => {\r\n    menu = menu || { ...defaultMenu, items: undefined };\r\n    selected = selected || { path: \"1234567890\" };\r\n    return (\r\n        <div className=\"sidebar_wrapper p-2 card me-2\">\r\n            <div className=\"card-header d-flex px-3 justify-content-between\">\r\n                <span>\r\n                    <i className={`bi ${menu.caption.icon} me-2`} />\r\n                    {menu.caption.name}{\" \"}\r\n                </span>\r\n                {backBtn}\r\n            </div>\r\n            <div className=\"card-body px-0\">\r\n                {menuAfterChildren && children}\r\n                {menu.items && (\r\n                    <div\r\n                        className={classNames({\r\n                            \"list-group \": true,\r\n                            \"mb-2\": !menuAfterChildren,\r\n                            \"mt-2\": menuAfterChildren\r\n                        })}\r\n                    >\r\n                        {menu.items.map((item, index) => (\r\n                            <div\r\n                                key={item.path}\r\n                                className={\r\n                                    item.component\r\n                                        ? undefined\r\n                                        : classNames({\r\n                                              //   \"mt-2\": index > 0,\r\n                                              \"list-group-item\": true,\r\n                                              active:\r\n                                                  item.path === selected.path\r\n                                          })\r\n                                }\r\n                                onClick={\r\n                                    item.component\r\n                                        ? undefined\r\n                                        : () => onItemSelect(item)\r\n                                }\r\n                                role=\"button\"\r\n                            >\r\n                                {item.component ? (\r\n                                    item.component\r\n                                ) : (\r\n                                    <>\r\n                                        <i className={`bi ${item.icon} me-2`} />\r\n                                        {item.name}\r\n                                    </>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n                {!menuAfterChildren && children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nSideBarWrapper.propTypes = {\r\n    backBtn: PropTypes.node,\r\n    menu: PropTypes.object,\r\n    selected: PropTypes.object,\r\n    onItemSelect: PropTypes.func,\r\n    menuAfterChildren: PropTypes.bool,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default SideBarWrapper;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst BackButton = ({ caption, tooltip, to, ...rest }) => {\r\n    const history = useHistory();\r\n    return (\r\n        <button\r\n            className={`btn btn-sm btn-outline-secondary${\r\n                rest.className ? \" \" + rest.className : \"\"\r\n            }`}\r\n            onClick={() => (to ? history.push(to) : history.goBack())}\r\n            title={tooltip || \"Вернуться к предыдущей странице\"}\r\n        >\r\n            <i className={`bi bi-caret-left${caption ? \" me-1\" : \"\"}`} />\r\n            {caption}\r\n        </button>\r\n    );\r\n};\r\n\r\nBackButton.propTypes = {\r\n    caption: PropTypes.string,\r\n    to: PropTypes.string,\r\n    tooltip: PropTypes.string\r\n};\r\n\r\nexport default BackButton;\r\n","import { Modal } from \"bootstrap\";\r\n\r\nimport { appTitle } from \"../config.json\";\r\nimport logo from \"../assets/brand/favicon.ico\";\r\n\r\nconst gialogYesNo = \"dialog_YN__\";\r\nconst buttonOK = \"button_OK__\";\r\n\r\nexport function yesNo(message, onAccept) {\r\n    const root = document.querySelector(\"#root\");\r\n    const dialog = messageDialog(gialogYesNo, message, onAccept);\r\n    dialog.addEventListener(\"click\", ({ target }) => {\r\n        if (target.name === buttonOK) {\r\n            document.querySelector(`#${gialogYesNo}`).remove();\r\n            onAccept();\r\n        }\r\n    });\r\n    root.appendChild(dialog);\r\n    const modalElement = new Modal(dialog);\r\n    modalElement.toggle();\r\n}\r\n\r\nfunction createNode(tagName, props, parent = undefined) {\r\n    const node = document.createElement(tagName);\r\n    for (const key of Object.keys(props)) {\r\n        const att = document.createAttribute(key);\r\n        att.value = props[key];\r\n        node.setAttributeNode(att);\r\n    }\r\n    if (parent) parent.appendChild(node);\r\n    return node;\r\n}\r\n\r\nfunction messageDialog(dialogId, message, onAccept) {\r\n    const root = createNode(\"div\", {\r\n        class: \"modal fade\",\r\n        id: dialogId,\r\n        tabindex: \"-1\",\r\n        \"aria-hidden\": \"true\"\r\n    });\r\n\r\n    let comtent = createNode(\r\n        \"div\",\r\n        {\r\n            class: \"modal-dialog modal-dialog-centered\"\r\n        },\r\n        root\r\n    );\r\n\r\n    comtent = createNode(\r\n        \"div\",\r\n        {\r\n            class: \"modal-content\"\r\n        },\r\n        comtent\r\n    );\r\n\r\n    const header = createNode(\r\n        \"div\",\r\n        {\r\n            class: \"modal-header\"\r\n        },\r\n        comtent\r\n    );\r\n\r\n    const title = createNode(\r\n        \"h5\",\r\n        {\r\n            class: \"modal-title\",\r\n            id: \"exampleModalLabel\"\r\n        },\r\n        header\r\n    );\r\n\r\n    createNode(\r\n        \"img\",\r\n        {\r\n            class: \"me-1\",\r\n            src: logo,\r\n            alt: \"\",\r\n            width: 24,\r\n            height: 24\r\n        },\r\n        title\r\n    );\r\n\r\n    createNode(\"span\", {}, title).innerText = appTitle;\r\n\r\n    createNode(\r\n        \"button\",\r\n        {\r\n            class: \"btn-close\",\r\n            type: \"button\",\r\n            \"data-bs-dismiss\": \"modal\",\r\n            \"aria-label\": \"Close\"\r\n        },\r\n        header\r\n    );\r\n\r\n    const body = createNode(\r\n        \"div\",\r\n        {\r\n            class: \"modal-body text-center\"\r\n        },\r\n        comtent\r\n    );\r\n    createNode(\"span\", {}, body).innerText = message;\r\n    const footer = createNode(\r\n        \"div\",\r\n        {\r\n            class: \"modal-footer justify-content-center\"\r\n        },\r\n        comtent\r\n    );\r\n\r\n    let btn = createNode(\r\n        \"button\",\r\n        {\r\n            type: \"button\",\r\n            class: \"btn btn-outline-primary\",\r\n            name: buttonOK,\r\n            \"data-bs-dismiss\": \"modal\"\r\n        },\r\n        footer\r\n    );\r\n    btn.innerText = \"Да\";\r\n    // btn.onClick = onAccept;\r\n\r\n    btn = createNode(\r\n        \"button\",\r\n        {\r\n            type: \"button\",\r\n            class: \"btn btn-outline-secondary\",\r\n            \"data-bs-dismiss\": \"modal\"\r\n        },\r\n        footer\r\n    );\r\n    btn.innerText = \"Нет\";\r\n\r\n    return root;\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { yesNo } from \"../../../dialogs/messageDialog\";\r\n\r\nconst UndoBasketButton = ({ status, onAccept }) => {\r\n    if (![\"basket\", \"checked\"].includes(status)) return null;\r\n    const question =\r\n        status === \"basket\"\r\n            ? \"Вы действительно желаете очистить вашу корзину?\"\r\n            : \"Вы действительно желаете отменить резервирование и вернуть товар в корзину?\";\r\n\r\n    const caption =\r\n        status === \"basket\" ? \"Очистить корзину\" : \"Отменить резервирование\";\r\n    const title =\r\n        status === \"basket\"\r\n            ? \"Удалить все товары из корзины\"\r\n            : \"Отменить резервирование и вернуть товар в корзину\";\r\n    const undo = status === \"basket\" ? \"clear\" : \"undoCheck\";\r\n\r\n    return (\r\n        <div>\r\n            <button\r\n                type=\"button\"\r\n                className=\"btn btn-outline-danger w-100 list-group-item-danger mt-3\"\r\n                role=\"button\"\r\n                onClick={() => {\r\n                    yesNo(question, () => onAccept(undo));\r\n                }}\r\n                title={title}\r\n            >\r\n                <i className=\"bi bi-x-lg me-2\" /> {caption}\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nUndoBasketButton.propTypes = {\r\n    status: PropTypes.string.isRequired,\r\n    onAccept: PropTypes.func.isRequired\r\n};\r\n\r\nexport default UndoBasketButton;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\n\r\nimport { yesNo } from \"../../../dialogs/messageDialog\";\r\nimport { acquiring } from \"./applyForm/payments\";\r\n\r\nconst ApplyBasketButton = ({ step, onAccept }) => {\r\n    const data = useSelector((state) => state.basket.data);\r\n    const { status, deliveryInfo } = data;\r\n    if (status === \"needpay\") return null;\r\n\r\n    const question =\r\n        \"Вы действительно желаете отправить корзину на проверку, и перейти к оформлению и оплате?\";\r\n\r\n    const tooltip =\r\n        status === \"basket\"\r\n            ? \"Перейти к офортлению покупки\"\r\n            : \"Завершить оформление\" +\r\n              (deliveryInfo.payment === acquiring.value\r\n                  ? \" и перейти к оплате покупки\"\r\n                  : \"\");\r\n\r\n    const caption =\r\n        status === \"basket\"\r\n            ? \"Перейти к офортлению\"\r\n            : deliveryInfo.payment === acquiring.value\r\n            ? \"Перейти к оплате покупки\"\r\n            : \"Завершить оформление\";\r\n\r\n    const isDisabled = !(step === \"basket\" || deliveryInfo?.isValid);\r\n\r\n    const todo =\r\n        status === \"basket\"\r\n            ? \"check\"\r\n            : status === \"checked\"\r\n            ? \"apply\"\r\n            : \"topay\";\r\n\r\n    return (\r\n        <div>\r\n            <button\r\n                className=\"btn btn-outline-success w-100 list-group-item-success mt-3\"\r\n                role=\"button\"\r\n                onClick={() => {\r\n                    if (status === \"basket\") {\r\n                        yesNo(question, () => onAccept(todo));\r\n                    } else {\r\n                        onAccept(todo);\r\n                    }\r\n                }}\r\n                title={tooltip}\r\n                disabled={isDisabled}\r\n            >\r\n                <i\r\n                    className={classNames({\r\n                        \"bi me-2\": true,\r\n                        \"bi-check-square\": status === \"basket\",\r\n                        \"bi-credit-card\": status !== \"basket\"\r\n                    })}\r\n                />\r\n                {caption}\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nApplyBasketButton.propTypes = {\r\n    step: PropTypes.string.isRequired,\r\n    onAccept: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ApplyBasketButton;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getTotals } from \"../../../store/basket\";\r\n\r\nconst BasketTotals = ({ basket }) => {\r\n    const { totalQty, totalPrice, deliveryPrice, fullPrice } = useSelector(\r\n        getTotals()\r\n    );\r\n    const nf = Intl.NumberFormat();\r\n    const { deliveryInfo, status } = basket;\r\n    const totalInfo = () => {\r\n        if (status === \"basket\" || !deliveryInfo) return null;\r\n        return (\r\n            <>\r\n                <div className=\"row g-3 mt-1\">\r\n                    <span className=\"col-5 text-end\">Доставка:</span>\r\n                    <span className=\"col text-end bg-secondary bg-opacity-10 form-control form-control-sm\">\r\n                        <strong>{nf.format(deliveryPrice)}</strong>\r\n                    </span>\r\n                    <span className=\"col-2\">руб.</span>\r\n                </div>\r\n                <hr />\r\n                <div className=\"row g-3\">\r\n                    <span className=\"col-5 text-end\">К оплате:</span>\r\n                    <span className=\"col text-end bg-secondary bg-opacity-10 form-control form-control-sm\">\r\n                        <strong>{nf.format(fullPrice)}</strong>\r\n                    </span>\r\n                    <span className=\"col-2\">руб.</span>\r\n                </div>\r\n            </>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"card\">\r\n            <div className=\"card-header\">\r\n                <i className=\"bi bi-box-seam me-2\" />\r\n                Итого заказно\r\n            </div>\r\n            <div className=\"card-body px-1\">\r\n                <div className=\"row g-3\">\r\n                    <span className=\"col-5 text-end\">Количество:</span>\r\n                    <span className=\"col text-end bg-secondary bg-opacity-10 form-control form-control-sm\">\r\n                        <strong>{totalQty}</strong>\r\n                    </span>\r\n                    <span className=\"col-2\">шт.</span>\r\n                </div>\r\n                <div className=\"row g-3 mt-1\">\r\n                    <span className=\"col-5 text-end\">Стоимость:</span>\r\n                    <span className=\"col text-end bg-secondary bg-opacity-10 form-control form-control-sm\">\r\n                        <strong>{nf.format(totalPrice)}</strong>\r\n                    </span>\r\n                    <span className=\"col-2\">руб.</span>\r\n                </div>\r\n                {totalInfo()}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nBasketTotals.propTypes = {\r\n    basket: PropTypes.object.isRequired\r\n};\r\n\r\nexport default BasketTotals;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport { updateDlvInfo, payOrder } from \"../../../../store/basket\";\r\nimport MaskEdit from \"../../../common/form/maskEdit\";\r\nimport { validator } from \"../../../../utils/validator\";\r\n\r\nconst validatorConfig = {\r\n    cardNumber: {\r\n        isRequired: {\r\n            message: \"Требует заполнения\"\r\n        },\r\n        isCardNumber: {\r\n            message: \"Некорректный номер карты\"\r\n        }\r\n    },\r\n    dateEnd: {\r\n        isRequired: {\r\n            message: \"Требует заполнения\"\r\n        },\r\n        isMonthYear: {\r\n            message: \"Введите правильную дату\"\r\n        }\r\n    },\r\n    cvcCode: {\r\n        isRequired: {\r\n            message: \"Требует заполнения\"\r\n        },\r\n        isCVC: {\r\n            message: \"Введите правильный CVC\"\r\n        }\r\n    }\r\n};\r\n\r\nclass PayForm extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const { deliveryInfo } = this.props.data;\r\n        this.state = {\r\n            deliveryInfo: { ...deliveryInfo },\r\n            creditCard: { cardNumber: \"\", dateEnd: \"\", cvcCode: \"\" },\r\n            errors: {}\r\n        };\r\n        this.isValid = false;\r\n\r\n        this.applyRefs = React.createRef();\r\n        this.handleCange = this.handleCange.bind(this);\r\n    }\r\n\r\n    handleCange({ name, value }) {\r\n        const creditCard = { ...this.state.creditCard, [name]: value };\r\n        this.setState((prevState) => ({\r\n            ...prevState,\r\n            creditCard\r\n        }));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.validate();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (\r\n            JSON.stringify(this.state.creditCard) !==\r\n            JSON.stringify(prevState.creditCard)\r\n        ) {\r\n            this.isValid = this.validate();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {}\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        if (this.validate()) {\r\n            this.props.payOrder();\r\n        }\r\n    }\r\n\r\n    setErrors(errors) {\r\n        this.setState((prevState) => ({\r\n            ...prevState,\r\n            errors: { ...errors }\r\n        }));\r\n    }\r\n\r\n    validate() {\r\n        const errors = validator(this.state.creditCard, validatorConfig);\r\n        this.setErrors(errors);\r\n        return Object.keys(errors).length === 0;\r\n    }\r\n\r\n    render() {\r\n        const { data } = this.props;\r\n        if (data.status !== \"needpay\") return null;\r\n\r\n        const className =\r\n            \"card\" + (this.props.className ? \" \" + this.props.className : \"\");\r\n        const { creditCard, errors } = this.state;\r\n        return (\r\n            <div className={className}>\r\n                <div className=\"card-header\">\r\n                    <i className=\"bi bi-credit-card-2-back me-2\" />\r\n                    Данные карты.\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <form onSubmit={this.handleSubmit}>\r\n                        <div className=\"row mb-1\">\r\n                            <MaskEdit\r\n                                {...{\r\n                                    label: \"Номер кредитной карты\",\r\n                                    type: \"card\",\r\n                                    name: \"cardNumber\",\r\n                                    value: creditCard.cardNumber,\r\n                                    onChange: this.handleCange,\r\n                                    error: errors.cardNumber,\r\n                                    placeholder: \"0000 0000 0000 0000\",\r\n                                    title: \"Номер кредитной карты\"\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <div className=\"row mb-3 g-3\">\r\n                            <div className=\"col-6\">\r\n                                <MaskEdit\r\n                                    {...{\r\n                                        label: \"Дата\",\r\n                                        type: \"monYear\",\r\n                                        name: \"dateEnd\",\r\n                                        value: creditCard.dateEnd,\r\n                                        onChange: this.handleCange,\r\n                                        error: errors.dateEnd,\r\n                                        placeholder: \"ММ/ГГ\",\r\n                                        title: \"Срок действия карты\"\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                            <div className=\"col-6\">\r\n                                <MaskEdit\r\n                                    {...{\r\n                                        label: \"CVV/CVC\",\r\n                                        type: \"cvc\",\r\n                                        name: \"cvcCode\",\r\n                                        value: creditCard.cvcCode,\r\n                                        onChange: this.handleCange,\r\n                                        error: errors.dateEnd,\r\n                                        placeholder: \"CVC код\",\r\n                                        title: \"CVV/CVC код\"\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            className=\"btn btn-primary w-100\"\r\n                            type=\"submit\"\r\n                            disabled={!this.isValid}\r\n                            title=\"Оплатить покупку\"\r\n                        >\r\n                            <i className=\"bi bi-credit-card-2-back me-2\" />\r\n                            Оплатить покупку\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nPayForm.propTypes = {\r\n    data: PropTypes.object,\r\n    authUser: PropTypes.object,\r\n    updateDlvInfo: PropTypes.func,\r\n    payOrder: PropTypes.func,\r\n    className: PropTypes.string\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const { authUser } = state.auth;\r\n    const { data } = state.basket;\r\n    return {\r\n        data,\r\n        authUser\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    updateDlvInfo,\r\n    payOrder\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(PayForm);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport history from \"../../../utils/history\";\r\n\r\nimport { getBasket, clearBasket, disassemble } from \"../../../store/basket\";\r\nimport SideBarWrapper from \"../../common/wrappers/sideBar\";\r\nimport BackButton from \"../../common/backButton\";\r\n// import { yesNo } from \"../../../dialogs/messageDialog\";\r\n// import { names } from \"./menu\";\r\nimport UndoBasketButton from \"./undoBasketButton\";\r\nimport ApplyBasketButton from \"./applyBasketButton\";\r\nimport BasketTotals from \"./basketTotals\";\r\nimport PayForm from \"./payForm/payForm\";\r\n\r\nconst BasketSidebar = ({ menu, step, onCheckAndPay }) => {\r\n    const basket = useSelector(getBasket());\r\n    const dispatch = useDispatch();\r\n\r\n    // const nf = Intl.NumberFormat();\r\n\r\n    const handleUndoBasket = (todo) => {\r\n        if (todo === \"clear\") {\r\n            dispatch(clearBasket());\r\n            setTimeout(() => {\r\n                if (history.location.pathname.includes(\"basket\")) {\r\n                    history.push(\"/\");\r\n                }\r\n            }, [3000]);\r\n        } else {\r\n            dispatch(disassemble());\r\n            onCheckAndPay(todo);\r\n        }\r\n    };\r\n\r\n    // const onItemSelect = (item) => {\r\n    //     switch (item.path) {\r\n    //         case names.clear:\r\n    //             yesNo(\"Вы действительно желаете очистить вашу корзину?\", handleUndoBasket);\r\n    //             break;\r\n    //         case names.goto:\r\n    // yesNo(\r\n    //     \"Вы действительно желаете отправить корзину на проверку, и перейти к оплате?\",\r\n    //     handleCheckAndPay\r\n    // );\r\n    // break;\r\n    //         default:\r\n    //             break;\r\n    //     }\r\n    // };\r\n\r\n    return (\r\n        <SideBarWrapper\r\n            {...{\r\n                menu,\r\n                // onItemSelect,\r\n                // menuAfterChildren: true,\r\n                backBtn: <BackButton to=\"/\" tooltip=\"Вернуться к покупкам\" />\r\n            }}\r\n        >\r\n            {basket.totalQty > 0 && (\r\n                <div>\r\n                    <BasketTotals basket={basket} />\r\n                    <UndoBasketButton\r\n                        status={basket.status}\r\n                        onAccept={handleUndoBasket}\r\n                    />\r\n                    <ApplyBasketButton step={step} onAccept={onCheckAndPay} />\r\n                    <PayForm className=\"mt-3\" />\r\n                </div>\r\n            )}\r\n        </SideBarWrapper>\r\n    );\r\n};\r\n\r\nBasketSidebar.propTypes = {\r\n    step: PropTypes.string.isRequired,\r\n    menu: PropTypes.object.isRequired,\r\n    onCheckAndPay: PropTypes.func.isRequired\r\n};\r\n\r\nexport default BasketSidebar;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport menu from \"./menu\";\r\nimport {\r\n    applyBasket,\r\n    checkBasket,\r\n    loadBasket,\r\n    loadBasketItems,\r\n    payOrder\r\n} from \"../../../store/basket\";\r\nimport WorkScreen from \"../../common/wrappers/workScreen\";\r\nimport ContentWrapper from \"../../common/wrappers/content\";\r\nimport BasketTable from \"./table/basketTable\";\r\nimport ApplyForm from \"./applyForm/applyForm\";\r\nimport BasketSidebar from \"./basketSidebar\";\r\n\r\nclass BasketPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            step: \"show\"\r\n        };\r\n        this.handleReload = this.handleReload.bind(this);\r\n        this.setCurrStep = this.setCurrStep.bind(this);\r\n        this.setStepName = this.setStepName.bind(this);\r\n        this.handleCheckAndPay = this.handleCheckAndPay.bind(this);\r\n    }\r\n\r\n    setCurrStep() {\r\n        const { data } = this.props;\r\n        let step = \"show\";\r\n        switch (data.status) {\r\n            case \"basket\":\r\n                break;\r\n            case \"checked\":\r\n                step = \"check\";\r\n                break;\r\n            case \"needpay\":\r\n                step = \"needpay\";\r\n                break;\r\n            default:\r\n                step = \"undoCheck\";\r\n                break;\r\n        }\r\n        this.setStepName(step);\r\n        this.handleReload();\r\n    }\r\n\r\n    setStepName(step) {\r\n        this.setState((state) => ({ ...state, step }));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setCurrStep();\r\n    }\r\n\r\n    handleCheckAndPay(todo) {\r\n        this.setStepName(todo);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        const { step } = this.state;\r\n        const { data, checkBasket, applyBasket, payOrder } = this.props;\r\n        const { status } = data;\r\n        try {\r\n            if (step !== prevState.step) {\r\n                if (status === \"basket\" && step === \"check\") {\r\n                    checkBasket();\r\n                } else if (status === \"checked\") {\r\n                    if (step === \"apply\") {\r\n                        applyBasket();\r\n                    }\r\n                } else if (status === \"needpay\" && step === \"topay\") {\r\n                    payOrder();\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n\r\n        if (status !== prevProps.data.status) {\r\n            setTimeout(() => {\r\n                this.handleReload();\r\n            }, [250]);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {}\r\n\r\n    handleReload() {\r\n        const { data, loadBasketItems } = this.props;\r\n        if (data._id) {\r\n            loadBasketItems(data._id);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { step } = this.state;\r\n        const { data, productsLoading } = this.props;\r\n        const { products } = data;\r\n\r\n        return (\r\n            <WorkScreen>\r\n                <BasketSidebar\r\n                    menu={menu}\r\n                    step={step}\r\n                    onCheckAndPay={this.handleCheckAndPay}\r\n                />\r\n                <ContentWrapper menu={menu.caption}>\r\n                    <ApplyForm step={step} />\r\n                    <BasketTable\r\n                        name={menu.name}\r\n                        data={products || []}\r\n                        loading={productsLoading}\r\n                        onReload={this.handleReload}\r\n                        readOnly={data.status !== \"basket\"}\r\n                    />\r\n                </ContentWrapper>\r\n            </WorkScreen>\r\n        );\r\n    }\r\n}\r\n\r\nBasketPage.propTypes = {\r\n    data: PropTypes.object,\r\n    docsLoading: PropTypes.bool,\r\n    productsLoading: PropTypes.bool,\r\n    applyBasket: PropTypes.func,\r\n    checkBasket: PropTypes.func,\r\n    loadBasket: PropTypes.func,\r\n    loadBasketItems: PropTypes.func,\r\n    payOrder: PropTypes.func\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const { data, docsLoading, productsLoading } = state.basket;\r\n    return {\r\n        data,\r\n        docsLoading,\r\n        productsLoading\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    applyBasket,\r\n    checkBasket,\r\n    loadBasket,\r\n    loadBasketItems,\r\n    payOrder\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BasketPage);\r\n","import BasketPage from \"./basketPage\";\r\nexport default BasketPage;\r\n","import React from \"react\";\r\nimport BasketPage from \"../components/page/basketPage\";\r\n\r\nconst Basket = () => {\r\n    return <BasketPage />;\r\n};\r\n\r\nexport default Basket;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\n\r\nconst NavTabs = ({ maket, selectedTab, onSelect, children }) => {\r\n    const onItemSelect = (value) => {\r\n        if (onSelect) onSelect(value);\r\n    };\r\n    return (\r\n        <div className=\"card\">\r\n            <div className=\"card-header\">\r\n                <div className=\"nav nav-tabs card-header-tabs \">\r\n                    {/* nav nav-tabs */}\r\n                    {Object.keys(maket).map((key) => (\r\n                        <div key={key} className=\"nav-item\">\r\n                            <span\r\n                                className={classNames({\r\n                                    \"nav-link\": true,\r\n                                    active: selectedTab === key\r\n                                })}\r\n                                aria-current=\"page\"\r\n                                onClick={() => onItemSelect(key)}\r\n                                role=\"button\"\r\n                            >\r\n                                {maket[key]}\r\n                            </span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"card-body\">{children}</div>\r\n        </div>\r\n    );\r\n};\r\n\r\nNavTabs.propTypes = {\r\n    maket: PropTypes.object.isRequired,\r\n    selectedTab: PropTypes.string.isRequired,\r\n    onSelect: PropTypes.func,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default NavTabs;\r\n","import React, { forwardRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst CheckEdit = forwardRef((props, ref) => {\r\n    const { name, value, onChange, children, error, readOnly, ...rest } = props;\r\n    const handleChange = () => {\r\n        if (readOnly) return;\r\n        onChange({ name: name, value: !value });\r\n    };\r\n    const getInputClasses = () => {\r\n        return readOnly\r\n            ? \"form-check-input bg-secondary bg-opacity-10\"\r\n            : \"form-check-input\" + (error ? \" is-invalid\" : \"\");\r\n    };\r\n    return (\r\n        <div className=\"form-check mb-4\">\r\n            <input\r\n                className={getInputClasses()}\r\n                type=\"checkbox\"\r\n                value=\"\"\r\n                id={name}\r\n                onChange={handleChange}\r\n                checked={value}\r\n                title={rest.placeholder}\r\n                ref={ref}\r\n            />\r\n            <label htmlFor={name}>\r\n                <span className=\"text-truncate\">{children}</span>\r\n            </label>\r\n\r\n            {error && (\r\n                <div className=\"invalid-feedback text-truncate\">{error}</div>\r\n            )}\r\n        </div>\r\n    );\r\n});\r\n\r\nCheckEdit.propTypes = {\r\n    name: PropTypes.string,\r\n    value: PropTypes.bool,\r\n    onChange: PropTypes.func,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ]),\r\n    error: PropTypes.string,\r\n    readOnly: PropTypes.bool\r\n};\r\n\r\nCheckEdit.displayName = \"CheckEdit\";\r\n\r\nexport default CheckEdit;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport history from \"../../../utils/history\";\r\n\r\nimport TextEdit from \"../../common/form/textEdit\";\r\nimport CheckBoxEdit from \"../../common/form/checkBoxEdit\";\r\nimport { validator } from \"../../../utils/validator\";\r\nimport {\r\n    // getAuth,\r\n    getAuthError,\r\n    signIn\r\n} from \"../../../store/auth\";\r\nimport BackButton from \"../../common/backButton\";\r\n\r\nconst LoginForm = () => {\r\n    const className = \"mb-2\";\r\n    const error = useSelector(getAuthError());\r\n\r\n    const dispatch = useDispatch();\r\n    const [data, setData] = useState({\r\n        email: \"\",\r\n        password: \"\",\r\n        stayOn: false\r\n    });\r\n    const [errors, setErrors] = useState({});\r\n    const [enterError, setEnterError] = useState(null);\r\n    useEffect(() => {\r\n        // if (authUser) {\r\n        //     history.push(\"/\");\r\n        // } else\r\n        if (error) {\r\n            setEnterError(error);\r\n        }\r\n    }, [\r\n        // authUser,\r\n        error\r\n    ]);\r\n\r\n    const handleChange = (target) => {\r\n        setData((prevState) => ({\r\n            ...prevState,\r\n            [target.name]: target.value\r\n        }));\r\n        setEnterError(null);\r\n    };\r\n    const validatorConfig = {\r\n        email: {\r\n            isRequired: {\r\n                message: \"Электронная почта обязательна для заполнения\"\r\n            }\r\n        },\r\n        password: {\r\n            isRequired: {\r\n                message: \"Пароль обязателен для заполнения\"\r\n            }\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        validate();\r\n    }, [data]);\r\n    const validate = () => {\r\n        const errors = validator(data, validatorConfig);\r\n        setErrors(errors);\r\n        return Object.keys(errors).length === 0;\r\n    };\r\n    const isValid = Object.keys(errors).length === 0;\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const isValid = validate();\r\n        if (!isValid) return;\r\n\r\n        const redirect = history.location.state\r\n            ? history.location.state.from.pathname\r\n            : \"/\";\r\n        dispatch(signIn({ ...data, redirect }));\r\n    };\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <TextEdit\r\n                label=\"Электронная почта\"\r\n                name=\"email\"\r\n                value={data.email}\r\n                onChange={handleChange}\r\n                error={errors.email}\r\n                className={className}\r\n            />\r\n            <TextEdit\r\n                label=\"Пароль\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={data.password}\r\n                onChange={handleChange}\r\n                error={errors.password}\r\n                className={className}\r\n            />\r\n            <CheckBoxEdit\r\n                value={data.stayOn}\r\n                onChange={handleChange}\r\n                name=\"stayOn\"\r\n                className={className}\r\n            >\r\n                Оставаться в системе\r\n            </CheckBoxEdit>\r\n            {enterError && <p className=\"text-danger\">{enterError}</p>}\r\n            <div className=\"btn-group w-100 mx-auto\" role=\"group\">\r\n                <button\r\n                    className=\"btn btn-primary\"\r\n                    type=\"submit\"\r\n                    disabled={!isValid}\r\n                    title=\"Войти в систему\"\r\n                >\r\n                    Войти\r\n                </button>\r\n                <BackButton tooltip=\"Не входить в систему\" caption=\"Назад\" />\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default LoginForm;\r\n","import React, { forwardRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst RadioEdit = forwardRef((props, ref) => {\r\n    const { options, name, onChange, value, label, readOnly, ...rest } = props;\r\n\r\n    const handleChange = ({ target }) => {\r\n        if (readOnly) return;\r\n        onChange({ name: target.name, value: target.value });\r\n    };\r\n\r\n    const getInputClasses = () => {\r\n        return readOnly\r\n            ? \"form-control bg-secondary bg-opacity-10\"\r\n            : \"form-control\";\r\n    };\r\n\r\n    return (\r\n        <div className={rest.className}>\r\n            <label htmlFor={name}>\r\n                <span className=\"text-truncate\">{label}</span>\r\n            </label>\r\n            <div className={getInputClasses()}>\r\n                {options.map((option) => (\r\n                    <div\r\n                        key={option.name + \"_\" + option.value}\r\n                        className=\"form-check form-check-inline\"\r\n                    >\r\n                        <input\r\n                            className=\"form-check-input\"\r\n                            type=\"radio\"\r\n                            name={name}\r\n                            id={option.name + \"_\" + option.value}\r\n                            checked={option.value === value}\r\n                            value={option.value}\r\n                            onChange={handleChange}\r\n                            readOnly={readOnly}\r\n                            // disabled={readOnly}\r\n                        />\r\n                        <label\r\n                            className=\"form-check-label\"\r\n                            htmlFor={option.name + \"_\" + option.value}\r\n                        >\r\n                            {option.name}\r\n                        </label>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nRadioEdit.propTypes = {\r\n    options: PropTypes.array,\r\n    name: PropTypes.string,\r\n    onChange: PropTypes.func,\r\n    value: PropTypes.string,\r\n    label: PropTypes.string,\r\n    readOnly: PropTypes.bool\r\n};\r\n\r\nRadioEdit.displayName = \"RadioEdit\";\r\n\r\nexport default RadioEdit;\r\n","let timer;\r\nexport default (fn, ms) => {\r\n    return function () {\r\n        const fnCall = () => fn.apply(this, arguments);\r\n        clearTimeout(timer);\r\n        timer = setTimeout(fnCall, ms);\r\n    };\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport history from \"../../../utils/history\";\r\n\r\nimport TextEdit from \"../../common/form/textEdit\";\r\nimport RadioEdit from \"../../common/form/radioEdit\";\r\nimport { validator } from \"../../../utils/validator\";\r\n\r\nimport { getAuth, getAuthError, signUp } from \"../../../store/auth\";\r\nimport CheckBoxEdit from \"../../common/form/checkBoxEdit\";\r\nimport BackButton from \"../../common/backButton\";\r\n\r\nconst defaultData = {\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    sex: \"male\",\r\n    role: \"user\",\r\n    stayOn: false\r\n};\r\n\r\nconst RegisterForm = () => {\r\n    const { authUser } = useSelector(getAuth());\r\n    const error = useSelector(getAuthError());\r\n    const dispatch = useDispatch();\r\n\r\n    const [data, setData] = useState(defaultData);\r\n    const [errors, setErrors] = useState({});\r\n\r\n    useEffect(() => {\r\n        if (authUser) {\r\n            history.push(\"/\");\r\n        } else if (error) {\r\n            setErrors({\r\n                email: error\r\n            });\r\n        }\r\n    }, [authUser, error]);\r\n\r\n    const handleChange = (target) => {\r\n        setData((prevState) => ({\r\n            ...prevState,\r\n            [target.name]: target.value\r\n        }));\r\n    };\r\n    const validatorConfig = {\r\n        email: {\r\n            isRequired: {\r\n                message: \"Электронная почта обязательна для заполнения\"\r\n            },\r\n            isEmail: {\r\n                message: \"Email введен некорректно\"\r\n            }\r\n        },\r\n        password: {\r\n            isRequired: {\r\n                message: \"Пароль обязателен для заполнения\"\r\n            },\r\n            isCapitalSymbol: {\r\n                message: \"Пароль должен содержать хотя бы одну заглавную букву\"\r\n            },\r\n            isContainDigit: {\r\n                message: \"Пароль должен содержать хотя бы одно число\"\r\n            },\r\n            min: {\r\n                message: \"Пароль должен состоять минимум из 8 символов\",\r\n                value: 8\r\n            }\r\n        },\r\n        name: {\r\n            isRequired: {\r\n                message: \"Введите имя пользователя\"\r\n            }\r\n        }\r\n    };\r\n    useEffect(() => {\r\n        validate();\r\n    }, [data]);\r\n    const validate = () => {\r\n        const errors = validator(data, validatorConfig);\r\n        setErrors(errors);\r\n        return Object.keys(errors).length === 0;\r\n    };\r\n    const isValid = Object.keys(errors).length === 0;\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const isValid = validate();\r\n        if (!isValid) return;\r\n        const redirect = history.location.state\r\n            ? history.location.state.from.pathname\r\n            : \"/\";\r\n        dispatch(signUp({ ...data, redirect }));\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <TextEdit\r\n                label=\"Имя пользователя\"\r\n                name=\"name\"\r\n                value={data.name}\r\n                onChange={handleChange}\r\n                error={errors.name}\r\n            />\r\n            <TextEdit\r\n                label=\"Электронная почта\"\r\n                name=\"email\"\r\n                value={data.email}\r\n                onChange={handleChange}\r\n                error={errors.email}\r\n            />\r\n            <TextEdit\r\n                label=\"Пароль\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                value={data.password}\r\n                onChange={handleChange}\r\n                error={errors.password}\r\n            />\r\n            <RadioEdit\r\n                options={[\r\n                    { name: \"Мужчина\", value: \"male\" },\r\n                    { name: \"Женщина\", value: \"female\" }\r\n                ]}\r\n                value={data.sex}\r\n                name=\"sex\"\r\n                onChange={handleChange}\r\n                label=\"Укажите ваш пол\"\r\n            />\r\n            <CheckBoxEdit\r\n                value={data.stayOn}\r\n                onChange={handleChange}\r\n                name=\"stayOn\"\r\n            >\r\n                Оставаться в системе\r\n            </CheckBoxEdit>\r\n\r\n            <div className=\"btn-group w-100 mx-auto\" role=\"group\">\r\n                <button\r\n                    className=\"btn btn-primary\"\r\n                    type=\"submit\"\r\n                    disabled={!isValid}\r\n                    title=\"Зарегистрироваться в системе\"\r\n                >\r\n                    Зарегистрировать\r\n                </button>\r\n                <BackButton tooltip=\"Не регистрироваться\" caption=\"Назад\" />\r\n            </div>\r\n        </form>\r\n    );\r\n};\r\n\r\nexport default RegisterForm;\r\n","import React, { useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport NavTabs from \"../components/common/wrappers/navTabs\";\r\nimport LoginForm from \"../components/ui/login/loginForm\";\r\nimport RegisterForm from \"../components/ui/login/registerForm\";\r\n\r\nconst pages = { login: \"Вход\", register: \"Регистрация\" };\r\nconst Login = () => {\r\n    const { type } = useParams();\r\n    const [formType, setFormType] = useState(\r\n        type === \"register\" ? type : \"login\"\r\n    );\r\n    const toggleFormType = (value) => {\r\n        setFormType(value);\r\n    };\r\n    return (\r\n        <div className=\"container mt-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3 p-4\">\r\n                    <NavTabs\r\n                        maket={pages}\r\n                        selectedTab={formType}\r\n                        onSelect={toggleFormType}\r\n                    >\r\n                        {formType === \"register\" ? (\r\n                            <RegisterForm />\r\n                        ) : (\r\n                            <LoginForm />\r\n                        )}\r\n                    </NavTabs>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\n\r\nimport {\r\n    updateBasket,\r\n    getBasketQty,\r\n    removeBasket,\r\n    removeBasketItem\r\n} from \"../../../../store/basket\";\r\nimport {\r\n    addReminder,\r\n    getReminder,\r\n    removeReminder,\r\n    updateReminder\r\n} from \"../../../../store/reminders\";\r\n\r\nconst ProductQty = ({ data, name }) => {\r\n    const { title, priceRub, count } = data;\r\n    const inputB = useRef(null);\r\n    const inputR = useRef(null);\r\n    let qty = String(useSelector(getBasketQty(data._id)) || \"\");\r\n    const savedQty = Number(qty || 0);\r\n    const reminder = useSelector(getReminder(title._id));\r\n\r\n    const [reminderNeedFocus, setReminderNeedFocus] = useState(false);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        if (reminderNeedFocus) {\r\n            setReminderNeedFocus(false);\r\n            inputR.current.focus();\r\n            inputR.current.select();\r\n        }\r\n    }, [reminder]);\r\n\r\n    const checkValue = (value) => {\r\n        const result = Math.min(count, Math.max(0, Number(value || \"0\")));\r\n        qty = result || \"\";\r\n        return result;\r\n    };\r\n    const handleChange = ({ target }) => {\r\n        const value = target.value.replace(/[^\\d]/, \"\");\r\n        updateOnServer(checkValue(value));\r\n    };\r\n\r\n    const removeOne = () => {\r\n        inputB.current.focus();\r\n        const numQty =\r\n            name === \"basket\" ? 0 : checkValue(Number(qty || \"0\") - 1);\r\n        if (savedQty === numQty) return;\r\n        if (numQty < 0) return;\r\n        updateOnServer(numQty);\r\n    };\r\n\r\n    const addOne = () => {\r\n        inputB.current.focus();\r\n        updateOnServer(checkValue(Number(qty || \"0\") + 1));\r\n    };\r\n\r\n    const handleBlur = () => {\r\n        if (qty === \"0\") {\r\n            qty = \"\";\r\n            return;\r\n        } else if (!qty) return;\r\n\r\n        updateOnServer(Math.min(count, Math.max(0, Number(qty))));\r\n    };\r\n\r\n    function updateOnServer(numQty) {\r\n        if (savedQty === numQty) return;\r\n\r\n        if (numQty === 0) {\r\n            if (name === \"product\") {\r\n                dispatch(removeBasket(data._id));\r\n            } else {\r\n                dispatch(removeBasketItem(data._id));\r\n            }\r\n        } else {\r\n            dispatch(\r\n                updateBasket({\r\n                    _id: data._id,\r\n                    qty: numQty,\r\n                    price: priceRub\r\n                })\r\n            );\r\n        }\r\n    }\r\n\r\n    const handleToggle = ({ target }) => {\r\n        if (target.nodeName !== \"SPAN\") {\r\n            target = target.parentNode;\r\n        }\r\n\r\n        const { action } = reminder || { action: \"nothing\" };\r\n        if (target.nodeName === \"SPAN\") {\r\n            if (target.id === \"nothing\" && !reminder) return;\r\n            if (action === target.id) return;\r\n\r\n            if (target.id === \"nothing\") {\r\n                dispatch(removeReminder(title._id));\r\n                return;\r\n            }\r\n\r\n            let data = {\r\n                ...reminder,\r\n                titleId: title._id,\r\n                action: target.id\r\n            };\r\n            switch (target.id) {\r\n                case \"to-order\":\r\n                    data = { ...data, need: 1, price: priceRub };\r\n                    setReminderNeedFocus(true);\r\n                    break;\r\n                case \"notify-me\":\r\n                    data = { ...data, need: 0, price: 0 };\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (!reminder) {\r\n                dispatch(addReminder(data));\r\n            } else {\r\n                dispatch(updateReminder(data));\r\n            }\r\n        }\r\n    };\r\n\r\n    const needBlur = () => {\r\n        let { need, action } = reminder;\r\n        if (isNaN(need)) {\r\n            need = 1;\r\n        }\r\n\r\n        need = Math.max(1, Number(need));\r\n        const data = { titleId: title._id, action, need, price: priceRub };\r\n        dispatch(updateReminder(data));\r\n    };\r\n\r\n    const needChange = ({ target }) => {\r\n        let { need, action } = reminder;\r\n        let text = target.value.replace(/[^\\d]/, \"\");\r\n        if (isNaN(text)) {\r\n            text = 1;\r\n        }\r\n\r\n        if (need === text) return;\r\n        need = Math.max(1, Number(text));\r\n        const data = { titleId: title._id, action, need, price: priceRub };\r\n        dispatch(updateReminder(data));\r\n    };\r\n\r\n    const inputTitle =\r\n        name === \"product\"\r\n            ? \"Введите количество чтобы добавить товар в корзину\"\r\n            : \"Изменить количество в корзине.\";\r\n\r\n    if (count > 0) {\r\n        return (\r\n            <div className=\"input-group flex-nowrap\">\r\n                {name === \"product\" && (\r\n                    <span\r\n                        className=\"input-group-text\"\r\n                        title=\"Удалить 1\"\r\n                        role=\"button\"\r\n                        onClick={removeOne}\r\n                    >\r\n                        <i className=\"bi bi-dash-circle\"></i>\r\n                    </span>\r\n                )}\r\n                <input\r\n                    ref={inputB}\r\n                    type=\"text\"\r\n                    className=\"form-control table-input text-center\"\r\n                    placeholder=\"нет\"\r\n                    min={0}\r\n                    max={count}\r\n                    value={qty}\r\n                    onChange={handleChange}\r\n                    onBlur={handleBlur}\r\n                    title={inputTitle}\r\n                />\r\n                {name === \"product\" && (\r\n                    <span\r\n                        className=\"input-group-text\"\r\n                        title=\"Добавить 1\"\r\n                        role=\"button\"\r\n                        onClick={addOne}\r\n                    >\r\n                        <i className=\"bi bi-plus-circle\"></i>\r\n                    </span>\r\n                )}\r\n                {name === \"basket\" && (\r\n                    <span\r\n                        className=\"input-group-text\"\r\n                        title=\"Удалить\"\r\n                        role=\"button\"\r\n                        onClick={removeOne}\r\n                    >\r\n                        <i className=\"bi bi-x-circle\" />\r\n                    </span>\r\n                )}\r\n            </div>\r\n        );\r\n    } else {\r\n        return (\r\n            <div\r\n                className=\"btn-group mt-2 w-100\"\r\n                role=\"group\"\r\n                onClick={handleToggle}\r\n            >\r\n                <span\r\n                    id=\"notify-me\"\r\n                    className={classNames({\r\n                        \"btn btn-outline-primary\": true,\r\n                        active: reminder && reminder.action === \"notify-me\"\r\n                    })}\r\n                    title=\"Оповестить меня, в случае постуаления\"\r\n                >\r\n                    <i className=\"bi bi-envelope\" />\r\n                </span>\r\n\r\n                <span\r\n                    id=\"to-order\"\r\n                    className={classNames({\r\n                        \"btn btn-outline-danger\": true,\r\n                        active: reminder && reminder.action === \"to-order\"\r\n                    })}\r\n                    title=\"При поступлении добавить в заказ, и оповестить меня\"\r\n                >\r\n                    <i className=\"bi bi-bag\" />\r\n                </span>\r\n                {reminder && reminder.action === \"to-order\" && (\r\n                    <input\r\n                        ref={inputR}\r\n                        type=\"text\"\r\n                        className=\"form-control text-center\"\r\n                        value={reminder.need}\r\n                        onChange={needChange}\r\n                        onBlur={needBlur}\r\n                        title=\"Введите количество чтобы добавить товар в заказ\"\r\n                    />\r\n                )}\r\n\r\n                {reminder && (\r\n                    <span\r\n                        id=\"nothing\"\r\n                        className=\"btn btn-outline-secondary\"\r\n                        title=\"Ничего не нужно\"\r\n                    >\r\n                        <i className=\"bi bi-x-circle\" />\r\n                    </span>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n};\r\n\r\nProductQty.propTypes = {\r\n    data: PropTypes.object.isRequired,\r\n    name: PropTypes.string.isRequired\r\n};\r\nexport default ProductQty;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Table from \"../../../common/table\";\r\nimport ProductName from \"./productName\";\r\nimport ProductPicture from \"./productPicture\";\r\nimport Barcode from \"../../../ui/barcode\";\r\nimport ProductPrice from \"./productPrice\";\r\nimport ProductQty from \"./productQty\";\r\n\r\nconst ProductTable = ({\r\n    name,\r\n    data,\r\n    totalDocs,\r\n    loading,\r\n    onReload,\r\n    ...rest\r\n}) => {\r\n    const getData = (item) => {\r\n        const { _id, count, title, priceRub } = item;\r\n        const { format, barcode, label, style, origin } = title;\r\n        const nf = Intl.NumberFormat();\r\n\r\n        return {\r\n            _id,\r\n            title,\r\n            count,\r\n            priceRub,\r\n            priceFmt: nf.format(priceRub),\r\n            format,\r\n            label,\r\n            barcode,\r\n            style,\r\n            origin\r\n        };\r\n    };\r\n\r\n    const columns = [\r\n        {\r\n            name: \"image\",\r\n            width: 85,\r\n            component: (item) => <ProductPicture data={getData(item)} />\r\n        },\r\n        {\r\n            caption: \"Корзина\",\r\n            name: \"add\",\r\n            width: 190,\r\n            component: (item) => <ProductQty data={getData(item)} name={name} />\r\n        },\r\n        {\r\n            caption: \"Цена\",\r\n            name: \"price\",\r\n            sortable: true,\r\n            width: 115,\r\n            component: (item) => <ProductPrice price={getData(item).priceFmt} />\r\n        },\r\n        {\r\n            caption: \"Наименоване\",\r\n            name: \"name\",\r\n            sortable: true,\r\n            width: 300,\r\n            component: (item) => <ProductName data={getData(item)} />\r\n        },\r\n        {\r\n            caption: \"Формат\",\r\n            name: \"format\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getData(item).format.name}</div>\r\n            )\r\n        },\r\n        {\r\n            caption: \"Штрихкод\",\r\n            name: \"barcode\",\r\n            component: (item) => <Barcode barcode={getData(item).barcode} />\r\n        },\r\n        {\r\n            caption: \"Лейбл\",\r\n            name: \"label\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getData(item).label.name}</div>\r\n            )\r\n        },\r\n        {\r\n            caption: \"Страна\",\r\n            name: \"origin\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getData(item).origin}</div>\r\n            )\r\n        },\r\n        {\r\n            caption: \"Жанр\",\r\n            name: \"style\",\r\n            sortable: true,\r\n            component: (item) => (\r\n                <div className=\"small\">{getData(item).style}</div>\r\n            )\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <Table\r\n            {...{\r\n                name,\r\n                columns,\r\n                data,\r\n                totalDocs,\r\n                loading,\r\n                onReload,\r\n                ...rest\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nProductTable.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    data: PropTypes.array.isRequired,\r\n    totalDocs: PropTypes.number,\r\n    loading: PropTypes.bool.isRequired,\r\n    onReload: PropTypes.func.isRequired\r\n};\r\nexport default ProductTable;\r\n","import React, { useRef } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst SelectField = ({ name, placeholder, data, value, onChange }) => {\r\n    const selectRef = useRef(null);\r\n    return (\r\n        <div className=\"col-auto\">\r\n            <div className=\"input-group\">\r\n                <select\r\n                    className=\"form-select\"\r\n                    id={name}\r\n                    name={name}\r\n                    value={value || \"\"}\r\n                    onChange={onChange}\r\n                    ref={selectRef}\r\n                >\r\n                    <option disabled value=\"\">\r\n                        {placeholder}\r\n                    </option>\r\n                    {data &&\r\n                        data.length > 0 &&\r\n                        data.map((option, index) => {\r\n                            if (option._id) {\r\n                                return (\r\n                                    <option value={option._id} key={index + 1}>\r\n                                        {option.name}\r\n                                    </option>\r\n                                );\r\n                            } else {\r\n                                return (\r\n                                    <option value={option} key={index + 1}>\r\n                                        {option}\r\n                                    </option>\r\n                                );\r\n                            }\r\n                        })}\r\n                </select>\r\n                <button\r\n                    className=\"input-group-text btn btn-secondary\"\r\n                    title=\"Очистить\"\r\n                    role=\"button\"\r\n                    disabled={!value}\r\n                    onClick={() => {\r\n                        selectRef.current.value = \"\";\r\n                        onChange({ target: selectRef.current });\r\n                    }}\r\n                >\r\n                    <i className=\"bi bi-x-circle\" />\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nSelectField.propTypes = {\r\n    name: PropTypes.string,\r\n    placeholder: PropTypes.string,\r\n    data: PropTypes.array,\r\n    value: PropTypes.string,\r\n    onChange: PropTypes.func\r\n};\r\n\r\nexport default SelectField;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateSetting } from \"../../../../store/setting\";\r\nimport SelectEdit from \"./selectField\";\r\nimport { getLabels } from \"../../../../store/labels\";\r\nimport { getFormats } from \"../../../../store/formats\";\r\nimport { getOrigins } from \"../../../../store/origin\";\r\nimport { getStyles } from \"../../../../store/style\";\r\nimport { getCategory } from \"../../../../store/categories\";\r\nimport debounce from \"../../../../utils/debounce\";\r\n\r\n// let timeout;\r\n// const debounce = (fn, ms) => {\r\n//     return function () {\r\n//         const fnCall = () => fn.apply(this, arguments);\r\n//         clearTimeout(timeout);\r\n//         timeout = setTimeout(fnCall, ms);\r\n//     };\r\n// };\r\n\r\nconst ProductSearch = ({ name, onSearch }) => {\r\n    const dispatch = useDispatch();\r\n    const query = useSelector((state) => state.setting.config[name].query);\r\n    const category = useSelector(getCategory(query.category));\r\n    const formats = useSelector(getFormats());\r\n    const labels = useSelector(getLabels());\r\n    const origins = useSelector(getOrigins());\r\n    const styles = useSelector(getStyles());\r\n    const selects = {\r\n        origin: { placeholder: \"Поиск по стране\", data: origins },\r\n        format: { placeholder: \"Поиск по формату\", data: formats },\r\n        label: { placeholder: \"Поиск по лейблу\", data: labels },\r\n        style: { placeholder: \"Поиск по стилю\", data: styles }\r\n    };\r\n\r\n    const clearFilter = () => {\r\n        const queryArtist = query.artist ? { artist: query.artist } : {};\r\n        dispatch(\r\n            updateSetting(name, {\r\n                query: queryArtist\r\n            })\r\n        );\r\n        onSearch();\r\n    };\r\n\r\n    const debouncedSearch = debounce(onSearch, 1000);\r\n\r\n    const handleSearchQuery = ({ target }) => {\r\n        const newQuery = { ...query };\r\n        if (!target.value) {\r\n            delete newQuery[target.name];\r\n        } else {\r\n            newQuery[target.name] = target.value;\r\n        }\r\n        dispatch(\r\n            updateSetting(name, {\r\n                query: {\r\n                    ...newQuery\r\n                }\r\n            })\r\n        );\r\n        debouncedSearch();\r\n    };\r\n\r\n    const handleCollapse = () => {\r\n        const queryShow = !query.show;\r\n        const needReload = Object.keys(query).reduce(\r\n            (prev, curr) => Object.keys(selects).includes(curr) || prev,\r\n            false\r\n        );\r\n        const newQuery = { ...query, show: queryShow };\r\n        window.scrollTo(0, 0);\r\n\r\n        if (!queryShow) {\r\n            delete newQuery.show;\r\n            Object.keys(selects).forEach((key) => delete newQuery[key]);\r\n        }\r\n        dispatch(\r\n            updateSetting(name, {\r\n                query: {\r\n                    ...newQuery\r\n                }\r\n            })\r\n        );\r\n        if (!queryShow && needReload) {\r\n            onSearch();\r\n        }\r\n    };\r\n\r\n    const isDisabled = () => {\r\n        return Object.keys(query).reduce(\r\n            (previousValue, currentValue) =>\r\n                previousValue && [\"artist\", \"show\"].includes(currentValue),\r\n            true\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div className=\"mb-2\">\r\n            <div className=\"input-group d-flex flex-nowrap w-100\">\r\n                <button\r\n                    title=\"Очистить все фильтры\"\r\n                    className=\"nput-group-text btn btn-secondary text-nowrap\"\r\n                    disabled={isDisabled()}\r\n                    onClick={clearFilter}\r\n                >\r\n                    Очистить фильтр\r\n                </button>\r\n                <input\r\n                    type=\"search\"\r\n                    name=\"search\"\r\n                    placeholder=\"Поиск по артисту и названию альбома...\"\r\n                    className=\"form-control\"\r\n                    onChange={handleSearchQuery}\r\n                    value={query.search || \"\"}\r\n                />\r\n                {category && (\r\n                    <div\r\n                        className=\"input-group-text btn btn-outline-primary px-3\"\r\n                        title={\r\n                            \"Установлен фильтр\\nКликни в крестик чтобы снять его\"\r\n                        }\r\n                        type=\"button\"\r\n                    >\r\n                        <span className=\"me-2\">{category.name}</span>\r\n                        <i\r\n                            className=\"bi bi-x-circle\"\r\n                            title=\"Снять фильтр\"\r\n                            onClick={() =>\r\n                                handleSearchQuery({\r\n                                    target: {\r\n                                        name: \"category\",\r\n                                        value: null\r\n                                    }\r\n                                })\r\n                            }\r\n                        />\r\n                    </div>\r\n                )}\r\n                <div\r\n                    className={`input-group-text btn btn-outline-${\r\n                        query.image ? \"primary\" : \"secondary\"\r\n                    }`}\r\n                    title={`${\r\n                        query.image\r\n                            ? \"Выбрать всё, что есть\"\r\n                            : \"Выбрать только с картинками\"\r\n                    }`}\r\n                    type=\"button\"\r\n                    onClick={() =>\r\n                        handleSearchQuery({\r\n                            target: {\r\n                                name: \"image\",\r\n                                value: !query.image\r\n                            }\r\n                        })\r\n                    }\r\n                >\r\n                    <i\r\n                        className={`bi bi-check-circle${\r\n                            query.image ? \"-fill\" : \"\"\r\n                        }`}\r\n                    ></i>\r\n                    <span className=\"ms-2\">\r\n                        {query.image ? \"С картинками\" : \"Всё\"}\r\n                    </span>\r\n                </div>\r\n\r\n                <div\r\n                    className={`input-group-text btn btn-outline-${\r\n                        query.inStock ? \"primary\" : \"secondary\"\r\n                    }`}\r\n                    title={`${\r\n                        query.inStock\r\n                            ? \"Выбрать всё, что есть\"\r\n                            : \"Выбрать только то, что в наличии\"\r\n                    }`}\r\n                    type=\"button\"\r\n                    onClick={() =>\r\n                        handleSearchQuery({\r\n                            target: {\r\n                                name: \"inStock\",\r\n                                value: !query.inStock\r\n                            }\r\n                        })\r\n                    }\r\n                >\r\n                    <i\r\n                        className={`bi bi-check-circle${\r\n                            query.inStock ? \"-fill\" : \"\"\r\n                        }`}\r\n                    ></i>\r\n                    <span className=\"ms-2\">\r\n                        {query.inStock ? \"Из наличия\" : \"Всё\"}\r\n                    </span>\r\n                </div>\r\n                <div\r\n                    className=\"nput-group-text btn btn-outline-secondary\"\r\n                    title=\"Дополнительная фильтрация\"\r\n                    type=\"button\"\r\n                    onClick={handleCollapse}\r\n                >\r\n                    <i\r\n                        className={`bi bi-caret-${query.show ? \"up\" : \"down\"}`}\r\n                    ></i>\r\n                </div>\r\n            </div>\r\n            <div\r\n                className={`mt-2 collapse ${query.show && \"show\"}`}\r\n                id=\"additionalFilter\"\r\n            >\r\n                {/* <div className=\"row g-3 card card-body d-flex cen flex-nowrap\"> */}\r\n                <div className=\"row g-2\">\r\n                    {Object.keys(selects).map((key, index) => (\r\n                        <SelectEdit\r\n                            key={index + 1}\r\n                            name={key}\r\n                            placeholder={selects[key].placeholder}\r\n                            data={selects[key].data}\r\n                            onChange={handleSearchQuery}\r\n                            value={query[key]}\r\n                        />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nProductSearch.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    onSearch: PropTypes.func.isRequired\r\n};\r\nexport default ProductSearch;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport classNames from \"classnames\";\r\n\r\nimport { getCategories } from \"../../../store/categories\";\r\nimport { updateSetting } from \"../../../store/setting\";\r\nimport SideBarWrapper from \"../../common/wrappers/sideBar\";\r\n\r\nconst CategoryList = ({ name, onItemSelect }) => {\r\n    const categories = useSelector(getCategories());\r\n    const query = useSelector((state) => state.setting.config[name].query);\r\n    const dispatch = useDispatch();\r\n\r\n    const handleSelectQuery = (id) => {\r\n        const newQuery = { ...query };\r\n        if (!id) {\r\n            delete newQuery.category;\r\n        } else {\r\n            newQuery.category = id;\r\n        }\r\n        dispatch(\r\n            updateSetting(name, {\r\n                query: {\r\n                    ...newQuery\r\n                }\r\n            })\r\n        );\r\n        onItemSelect();\r\n    };\r\n\r\n    if (!categories) return null;\r\n    return (\r\n        <SideBarWrapper>\r\n            <div className=\"list-group\">\r\n                <div\r\n                    className={classNames({\r\n                        \"list-group-item btn-secondary\": true,\r\n                        disabled: !query.category\r\n                    })}\r\n                    onClick={() => handleSelectQuery(null)}\r\n                    role=\"button\"\r\n                >\r\n                    ВСЕ КАТЕГОРИИ\r\n                </div>\r\n                {categories.map((item) => (\r\n                    <div\r\n                        key={item._id}\r\n                        className={classNames({\r\n                            \"d-flex justify-content-between list-group-item\": true,\r\n                            active: item._id === query.category\r\n                        })}\r\n                        onClick={() => handleSelectQuery(item._id)}\r\n                        role=\"button\"\r\n                    >\r\n                        <div className=\"text-truncate\">{item.name}</div>\r\n                        <div\r\n                            className={classNames({\r\n                                small: true,\r\n                                \"text-muted\": item._id !== query.category\r\n                            })}\r\n                        >\r\n                            ({item.count})\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </SideBarWrapper>\r\n    );\r\n};\r\n\r\nCategoryList.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    onItemSelect: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CategoryList;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport defPicture from \"../../assets/defaults/audio-cd.jpg\";\r\n\r\nconst ProductPicture = ({ size, picture }) => {\r\n    const pictureSrc = picture\r\n        ? `https://bridgenote.com/images/covers/${picture}`\r\n        : defPicture;\r\n    return (\r\n        <div className={`cover-${size} media`}>\r\n            <div className=\"media-left\">\r\n                <img\r\n                    className={`media-object img-thumbnail cover-${size}`}\r\n                    src={pictureSrc}\r\n                    alt=\"\"\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nProductPicture.propTypes = {\r\n    size: PropTypes.string.isRequired,\r\n    picture: PropTypes.string\r\n};\r\nexport default ProductPicture;\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getBasket } from \"../../../../store/basket\";\r\n\r\nconst ProductMenuBasket = () => {\r\n    const history = useHistory();\r\n    const { totalQty } = useSelector(getBasket());\r\n    const productLabel = totalQty > 99 ? \"99+\" : totalQty;\r\n    return (\r\n        <button\r\n            className=\"btn btn-outline-primary w-100 mb-2\"\r\n            onClick={() => history.push(\"/basket\")}\r\n            title=\"Перейти в корзину\"\r\n        >\r\n            <i className=\"bi bi-cart me-1\" />\r\n            <span>Корзина</span>\r\n            {totalQty > 0 && (\r\n                <span className=\"badge rounded-pill bg-primary ms-1\">\r\n                    {productLabel}\r\n                </span>\r\n            )}\r\n        </button>\r\n    );\r\n};\r\n\r\nexport default ProductMenuBasket;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport ProductPicture from \"../../../ui/productPicture\";\r\n\r\nimport { useHistory } from \"react-router-dom\";\r\nimport ProductQty from \"../table/productQty\";\r\nimport ProductMenuBasket from \"./productMenuBasket\";\r\n\r\nconst ProductCard = ({ product }) => {\r\n    if (!product) {\r\n        return null;\r\n    }\r\n    const history = useHistory();\r\n\r\n    const productScheme = {\r\n        article: { cation: \"Артикул\", field: \"article\" },\r\n        quality: { cation: \"Качество\", field: \"quality\" },\r\n        price_ru: { cation: \"Цена\", field: \"price\" },\r\n        barcode: { cation: \"Штрихкод\", field: \"title.barcode\" },\r\n        artist: { cation: \"Исполнитель\", field: \"title.artist.name\" },\r\n        title: { cation: \"Альбом\", field: \"title.name\" },\r\n        format: { cation: \"Формат\", field: \"title.format.name\" },\r\n        year: { cation: \"Год\", field: \"title.year\" },\r\n        label: { cation: \"Лейбл\", field: \"title.label.name\" },\r\n        style: { cation: \"Жанр\", field: \"title.style\" },\r\n        origin: { cation: \"Страна\", field: \"title.origin\" }\r\n    };\r\n\r\n    const getText = (fields) => {\r\n        let value = product;\r\n        for (const field of String(fields).split(\".\")) {\r\n            value = value[field];\r\n            if (field === \"price_ru\") {\r\n                const nf = Intl.NumberFormat();\r\n                value = nf.format(value) + \" руб.\";\r\n            }\r\n        }\r\n        return <strong>{value}</strong>;\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"card mb-2\">\r\n                <div className=\"card-header d-flex g-2 \">\r\n                    <button\r\n                        className=\"btn btn-sm btn-outline-secondary me-2\"\r\n                        onClick={() => history.push(\"/\")}\r\n                        title=\"Вернуться к общему списку покупок\"\r\n                    >\r\n                        <i className=\"bi bi-caret-left\"></i>\r\n                    </button>\r\n                    <span>\r\n                        <i className=\"bi bi-hand-thumbs-up me-2\" />\r\n                        Информация по товару\r\n                    </span>\r\n                </div>\r\n                <div className=\"card-body\">\r\n                    <div className=\"row g-3 \">\r\n                        <div className=\"col-auto \">\r\n                            <div>\r\n                                <ProductPicture\r\n                                    size=\"big\"\r\n                                    picture={product.title.image}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col\">\r\n                            {Object.keys(productScheme).map((key) => {\r\n                                const cation = productScheme[key].cation;\r\n                                const field = productScheme[key].field;\r\n                                return (\r\n                                    <div className=\"row row-cols-2\" key={key}>\r\n                                        <div\r\n                                            className=\"col text-end\"\r\n                                            style={{ width: \"125px\" }}\r\n                                        >\r\n                                            {`${cation}:`}\r\n                                        </div>\r\n                                        <div className=\"col-6\">\r\n                                            {getText(field)}\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                        <div\r\n                            className=\"card flex-grow-0\"\r\n                            style={{\r\n                                width: \"250px\",\r\n                                padding: 0\r\n                            }}\r\n                        >\r\n                            <div className=\"card-header\">Инструменты</div>\r\n                            <div className=\"card-body \">\r\n                                <ProductMenuBasket />\r\n                                <ProductQty data={product} name=\"product\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"mb-2\">\r\n                <div className=\"card-header fs-4 border-primary text-primary\">\r\n                    <i className=\"bi bi-exclamation-circle-fill me-2\" />\r\n                    <span>{`${product.title.artist.name} - Cписок альюбомов исполнителя `}</span>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nProductCard.propTypes = {\r\n    product: PropTypes.object\r\n};\r\n\r\nexport default ProductCard;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport ProductTable from \"./table/productTable\";\r\nimport { loadCategories } from \"../../../store/categories\";\r\nimport { loadProducts } from \"../../../store/products\";\r\nimport ProductSearch from \"./seacher/productSearch\";\r\n// import ProductLoader from \"./productLoader\";\r\nimport CategoryList from \"./productCategory\";\r\nimport { updateSetting } from \"../../../store/setting\";\r\nimport WorkScreen from \"../../common/wrappers/workScreen\";\r\n// import PaginationWrapper from \"../../common/pagination\";\r\nimport { loadFormats } from \"../../../store/formats\";\r\nimport { loadLabels } from \"../../../store/labels\";\r\nimport { loadOrigins } from \"../../../store/origin\";\r\nimport { loadStyles } from \"../../../store/style\";\r\nimport ProductCard from \"./card/productCard\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport ProductService from \"../../../services/product.service\";\r\n\r\nconst ProductListPage = () => {\r\n    const { productId } = useParams();\r\n    const [product, setProduct] = useState();\r\n    const name = \"product\";\r\n    const query = useSelector((state) => state.setting.config[name].query);\r\n    const dispatch = useDispatch();\r\n    useEffect(() => {\r\n        if (!productId) {\r\n            setProduct();\r\n            if (query.artist) {\r\n                const newQuery = { ...query };\r\n                delete newQuery.artist;\r\n                dispatch(\r\n                    updateSetting(name, {\r\n                        query: {\r\n                            ...newQuery\r\n                        }\r\n                    })\r\n                );\r\n                dispatch(loadProducts());\r\n            }\r\n        } else {\r\n            if (!product || product._id !== Number(productId)) {\r\n                if (product) window.scrollTo(0, 0);\r\n                getProduct(productId);\r\n            } else if (\r\n                !query.artist ||\r\n                query.artist !== product.title.artist._id\r\n            ) {\r\n                const newQuery = { ...query, artist: product.title.artist._id };\r\n                dispatch(\r\n                    updateSetting(name, {\r\n                        query: {\r\n                            ...newQuery\r\n                        }\r\n                    })\r\n                );\r\n                dispatch(loadProducts());\r\n            }\r\n        }\r\n    }, [productId, product]);\r\n\r\n    async function getProduct(productId) {\r\n        const { content } = await ProductService.get(productId);\r\n        setProduct(content);\r\n    }\r\n\r\n    const {\r\n        docs: data,\r\n        totalDocs,\r\n        productLoading: loading,\r\n        productLoaded: loaded\r\n    } = useSelector((state) => state.products);\r\n\r\n    useEffect(() => {\r\n        dispatch(loadLabels());\r\n        if (!loaded) dispatch(loadProducts());\r\n        dispatch(loadCategories());\r\n        dispatch(loadFormats());\r\n        dispatch(loadOrigins());\r\n        dispatch(loadStyles());\r\n    }, []);\r\n\r\n    const onReload = () => {\r\n        dispatch(loadProducts());\r\n    };\r\n\r\n    return (\r\n        <WorkScreen>\r\n            <CategoryList name={name} onItemSelect={onReload} />\r\n            <div className=\"content_wrapper card bg-light p-2\">\r\n                <ProductSearch onSearch={onReload} name={name} />\r\n                <ProductCard product={product} />\r\n                <ProductTable\r\n                    {...{ name, data, totalDocs, loading, onReload }}\r\n                />\r\n            </div>\r\n        </WorkScreen>\r\n    );\r\n};\r\n\r\nexport default ProductListPage;\r\n","import ProductListPage from \"./productListPage\";\r\nexport default ProductListPage;\r\n","import React from \"react\";\r\n\r\nimport ProductListPage from \"../components/page/productListPage\";\r\n\r\nconst Main = () => {\r\n    return <ProductListPage />;\r\n};\r\n\r\nexport default Main;\r\n","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateSetting } from \"../../../store/setting\";\r\n\r\nimport classNames from \"classnames\";\r\nimport { getRoles, loadRoles } from \"../../../store/roles\";\r\n\r\nconst CategoryList = ({ name, onItemSelect }) => {\r\n    const roles = useSelector(getRoles());\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(loadRoles());\r\n    }, []);\r\n\r\n    const query = useSelector((state) => state.setting.config[name].query);\r\n\r\n    const handleSelectQuery = (id) => {\r\n        const newQuery = { ...query };\r\n        if (!id) {\r\n            delete newQuery.category;\r\n        } else {\r\n            newQuery.category = id;\r\n        }\r\n\r\n        dispatch(\r\n            updateSetting(name, {\r\n                query: {\r\n                    ...newQuery\r\n                }\r\n            })\r\n        );\r\n        onItemSelect();\r\n    };\r\n\r\n    return (\r\n        <ul className=\"list-group\">\r\n            <div className=\"card-header list-group-item-success mb-1\">\r\n                <i className=\"bi bi-filter me-2\" />\r\n                Меню фильтрации\r\n            </div>\r\n\r\n            <li\r\n                key=\"item_clear\"\r\n                className={classNames({\r\n                    \"list-group-item btn-secondary\": true,\r\n                    disabled: !query.category\r\n                })}\r\n                onClick={() => handleSelectQuery(null)}\r\n                role=\"button\"\r\n            >\r\n                ВСЕ РОЛИ\r\n            </li>\r\n            {roles.map((item) => (\r\n                <li\r\n                    key={item._id}\r\n                    className={classNames({\r\n                        \"list-group-item\": true,\r\n                        active: item._id === query.category\r\n                    })}\r\n                    onClick={() => handleSelectQuery(item._id)}\r\n                    role=\"button\"\r\n                >\r\n                    {item.name}\r\n                </li>\r\n            ))}\r\n        </ul>\r\n    );\r\n};\r\n\r\nCategoryList.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    onItemSelect: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CategoryList;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getRole } from \"../../../store/roles\";\r\n\r\nconst Role = ({ roleId }) => {\r\n    const { name, color } = useSelector(getRole(roleId));\r\n    return <span className={\"badge bg-\" + color}>{name}</span>;\r\n};\r\nRole.propTypes = {\r\n    roleId: PropTypes.string.isRequired\r\n};\r\n\r\nexport default Role;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst UserPicture = ({ size, data }) => {\r\n    const { _id, image, name } = data;\r\n    return (\r\n        <Link to={`/users/${_id}`}>\r\n            <div className={`cover-${size} media`}>\r\n                <img\r\n                    className={`media-object img-thumbnail cover-${size}`}\r\n                    src={image}\r\n                    title={name}\r\n                    alt={name}\r\n                />\r\n            </div>\r\n        </Link>\r\n    );\r\n};\r\n\r\nUserPicture.defautProps = {\r\n    size: \"small\"\r\n};\r\n\r\nUserPicture.propTypes = {\r\n    size: PropTypes.string,\r\n    data: PropTypes.object.isRequired\r\n};\r\nexport default UserPicture;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Table from \"../../common/table\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Role from \"./role\";\r\nimport UserPicture from \"./user/userPicture\";\r\n\r\nconst UserTable = ({ name, data, totalDocs, loading, onReload, ...rest }) => {\r\n    const columns = [\r\n        {\r\n            caption: \"Фотка\",\r\n            name: \"image\",\r\n            width: 85,\r\n            component: (user) => <UserPicture data={user} />\r\n        },\r\n        {\r\n            caption: \"Имя\",\r\n            name: \"name\",\r\n            sortable: true,\r\n            width: 300,\r\n            component: (user) => (\r\n                <Link to={`/users/${user._id}`}>{user.name}</Link>\r\n            )\r\n        },\r\n        {\r\n            caption: \"E-Mail\",\r\n            name: \"email\",\r\n            sortable: true\r\n        },\r\n        {\r\n            caption: \"Роль\",\r\n            name: \"role\",\r\n            component: (user) => <Role roleId={user.role} />\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <Table\r\n            {...{\r\n                name,\r\n                columns,\r\n                data,\r\n                totalDocs,\r\n                loading,\r\n                onReload,\r\n                ...rest\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nUserTable.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    data: PropTypes.array.isRequired,\r\n    totalDocs: PropTypes.number,\r\n    loading: PropTypes.bool.isRequired,\r\n    onReload: PropTypes.func.isRequired\r\n};\r\n\r\nexport default UserTable;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateSetting } from \"../../../store/setting\";\r\nimport debounce from \"../../../utils/debounce\";\r\n\r\nconst UsersSearch = ({ name, onSearch }) => {\r\n    const dispatch = useDispatch();\r\n    const query = useSelector((state) => state.setting.config[name].query);\r\n    const debouncedSearch = debounce(onSearch, 500);\r\n\r\n    const handleSearchQuery = ({ target }) => {\r\n        const newQuery = { ...query };\r\n        if (!target.value) {\r\n            delete newQuery.search;\r\n        } else {\r\n            newQuery.search = target.value;\r\n        }\r\n\r\n        dispatch(\r\n            updateSetting(name, {\r\n                query: {\r\n                    ...newQuery\r\n                }\r\n            })\r\n        );\r\n        debouncedSearch();\r\n    };\r\n\r\n    const clearFilter = () => {\r\n        dispatch(updateSetting(name, { query: {} }));\r\n        onSearch();\r\n    };\r\n\r\n    const isDisabled = () => {\r\n        console.log(query);\r\n        return Object.keys(query).length === 0;\r\n    };\r\n\r\n    return (\r\n        <div className=\"mb-2\">\r\n            <div className=\"input-group d-flex flex-nowrap w-100\">\r\n                <button\r\n                    title=\"Очистить все фильтры\"\r\n                    className=\"nput-group-text btn btn-secondary text-nowrap\"\r\n                    disabled={isDisabled()}\r\n                    onClick={clearFilter}\r\n                >\r\n                    Очистить фильтр\r\n                </button>\r\n                <input\r\n                    type=\"search\"\r\n                    name=\"search\"\r\n                    placeholder=\"Поиск по имени или e-mail...\"\r\n                    className=\"form-control\"\r\n                    onChange={handleSearchQuery}\r\n                    value={query.search || \"\"}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nUsersSearch.propTypes = {\r\n    name: PropTypes.string.isRequired,\r\n    onSearch: PropTypes.func.isRequired\r\n};\r\nexport default UsersSearch;\r\n","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport UserTable from \"./usersTable\";\r\nimport UsersSearch from \"./usersSearch\";\r\n\r\nimport { loadUsers } from \"../../../store/users\";\r\nimport { loadRoles } from \"../../../store/roles\";\r\n\r\nconst UsersListPage = () => {\r\n    const name = \"users\";\r\n\r\n    const {\r\n        docs: data,\r\n        totalDocs,\r\n        isLoading: loading\r\n    } = useSelector((state) => state.users);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        dispatch(loadRoles());\r\n        dispatch(loadUsers());\r\n    }, []);\r\n\r\n    const onReload = () => {\r\n        dispatch(loadUsers());\r\n    };\r\n\r\n    return (\r\n        <div className=\"content_wrapper card bg-light p-2\">\r\n            <UsersSearch onSearch={onReload} name={name} />\r\n            <UserTable {...{ name, data, totalDocs, loading, onReload }} />\r\n        </div>\r\n    );\r\n};\r\nUsersListPage.propTypes = {\r\n    users: PropTypes.array\r\n};\r\n\r\nexport default UsersListPage;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport SideBarWrapper from \"../../common/wrappers/sideBar\";\r\nimport BackButton from \"../../common/backButton\";\r\n\r\nconst AdminSideBar = ({ menu, selected, onItemSelect, children }) => {\r\n    return (\r\n        <SideBarWrapper\r\n            backBtn={<BackButton />}\r\n            {...{ menu, selected, onItemSelect }}\r\n        >\r\n            {children}\r\n        </SideBarWrapper>\r\n    );\r\n};\r\n\r\nAdminSideBar.propTypes = {\r\n    menu: PropTypes.object.isRequired,\r\n    selected: PropTypes.object.isRequired,\r\n    onItemSelect: PropTypes.func.isRequired,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default AdminSideBar;\r\n","export const pathes = {\r\n    userPath: \"users\",\r\n    productPath: \"products\"\r\n};\r\nexport const menu = {\r\n    name: \"admin\",\r\n    caption: { name: \"Admin\", icon: \"bi-award\" },\r\n    items: [\r\n        {\r\n            path: pathes.userPath,\r\n            name: \"ПОЛЬЗОВАТЕЛИ\",\r\n            icon: \"bi-people-fill\"\r\n        },\r\n        {\r\n            path: pathes.productPath,\r\n            name: \"ТОВАРЫ\",\r\n            icon: \"bi-cart-plus-fill\"\r\n        }\r\n    ]\r\n};\r\n","import AdminPage from \"./adminPage\";\r\nexport default AdminPage;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateSetting } from \"../../../store/setting\";\r\nimport { loadUsers } from \"../../../store/users\";\r\nimport ContentWrapper from \"../../common/wrappers/content\";\r\n\r\nimport WorkScreen from \"../../common/wrappers/workScreen\";\r\nimport CategoryList from \"../usersPages/usersCategory\";\r\nimport UsersListPage from \"../usersPages/usersListPage\";\r\nimport AdminSideBar from \"./adminSideBar\";\r\nimport { pathes, menu } from \"./menu\";\r\n\r\nconst AdminPage = () => {\r\n    const selectedMenu = useSelector(\r\n        (state) => state.setting.config[menu.name].selectedMenu\r\n    );\r\n    const dispatch = useDispatch();\r\n\r\n    const onItemSelect = (item) => {\r\n        dispatch(\r\n            updateSetting(menu.name, {\r\n                selectedMenu: item\r\n            })\r\n        );\r\n    };\r\n\r\n    const onFilter = () => {\r\n        if (selectedMenu.path === pathes.userPath) {\r\n            dispatch(loadUsers());\r\n        }\r\n    };\r\n\r\n    return (\r\n        <WorkScreen>\r\n            <AdminSideBar\r\n                menu={menu}\r\n                selected={selectedMenu}\r\n                onItemSelect={onItemSelect}\r\n            >\r\n                {selectedMenu.path === pathes.userPath && (\r\n                    <div className=\"mt-3\">\r\n                        <CategoryList\r\n                            name={selectedMenu.path}\r\n                            onItemSelect={onFilter}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </AdminSideBar>\r\n            <ContentWrapper menu={selectedMenu}>\r\n                {selectedMenu.path === pathes.userPath && <UsersListPage />}\r\n            </ContentWrapper>\r\n        </WorkScreen>\r\n    );\r\n};\r\n\r\nexport default AdminPage;\r\n","import React from \"react\";\r\nimport AdminPage from \"../components/page/adminPage\";\r\nconst Admin = () => {\r\n    return <AdminPage />;\r\n};\r\n\r\nexport default Admin;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n// import { useSelector } from \"react-redux\";\r\n\r\nimport SideBarWrapper from \"../../../common/wrappers/sideBar\";\r\nimport BackButton from \"../../../common/backButton\";\r\n\r\nconst UserSideBar = ({ user, menu, selected, onItemSelect, children }) => {\r\n    // const { roles } = useSelector((state) => state);\r\n    // const getRole = (id) => {\r\n    //     if (roles.isLoading) {\r\n    //         return \"загрузка\";\r\n    //     }\r\n    //     return roles.entities.find((role) => role._id === id).name;\r\n    // };\r\n    return (\r\n        <SideBarWrapper\r\n            backBtn={<BackButton />}\r\n            {...{ menu, selected, onItemSelect, menuAfterChildren: true }}\r\n        >\r\n            {user && (\r\n                <div className=\"card-header\">{user.name}</div>\r\n                //     <div className=\"card mb-3\">\r\n                //     <div className=\"card-header\">{user.name}</div>\r\n\r\n                //     <div className=\"card-body text-lg\">\r\n                //         <div>{user.email}</div>\r\n                //         <div>{getRole(user.role)}</div>\r\n                //     </div>\r\n                // </div>\r\n            )}\r\n        </SideBarWrapper>\r\n    );\r\n};\r\n\r\nUserSideBar.propTypes = {\r\n    user: PropTypes.object,\r\n    menu: PropTypes.object.isRequired,\r\n    selected: PropTypes.object.isRequired,\r\n    onItemSelect: PropTypes.func.isRequired,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default UserSideBar;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getAuth } from \"../../../../store/auth\";\r\n\r\nconst PasswordControl = ({ userId, onShow, hideIf, children }) => {\r\n    const { authUser } = useSelector(getAuth());\r\n\r\n    const [change, setChange] = useState(false);\r\n    const handleChange = () => {\r\n        setChange((prevSatte) => !prevSatte);\r\n        onShow();\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (hideIf) setChange(false);\r\n    }, [hideIf]);\r\n\r\n    if (authUser && authUser._id === userId) {\r\n        if (change) {\r\n            return (\r\n                <div className=\"row w-100\">\r\n                    <div className=\"col\">{children}</div>\r\n                    <div className=\"col-auto\">\r\n                        <span\r\n                            role=\"button\"\r\n                            className=\"btn btn-close btn-outline-warning\"\r\n                            onClick={handleChange}\r\n                            title=\"Не менять пароль\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"mb-4\">\r\n                    <label htmlFor=\"pass-btn\">Пароль</label>\r\n                    <span\r\n                        id=\"pass-btn\"\r\n                        role=\"button\"\r\n                        className=\"form-control btn btn-warning\"\r\n                        onClick={handleChange}\r\n                    >\r\n                        Изменить пароль\r\n                    </span>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n    return null;\r\n};\r\n\r\nPasswordControl.defaulProps = {\r\n    hideIf: false\r\n};\r\n\r\nPasswordControl.propTypes = {\r\n    userId: PropTypes.string,\r\n    onShow: PropTypes.func,\r\n    hideIf: PropTypes.bool,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default PasswordControl;\r\n","import PropTypes from \"prop-types\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getAuth } from \"../../../../store/auth\";\r\n\r\nconst RoleControl = ({ userId, children }) => {\r\n    const { authUser, isAdmin } = useSelector(getAuth());\r\n\r\n    if (isAdmin && authUser._id !== userId) {\r\n        return children;\r\n    }\r\n    return null;\r\n};\r\n\r\nRoleControl.propTypes = {\r\n    userId: PropTypes.string,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default RoleControl;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Resizer from \"react-image-file-resizer\";\r\n\r\nclass LoadImage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.fileChangedHandler = this.fileChangedHandler.bind(this);\r\n        this.state = {\r\n            image: \"\"\r\n        };\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.data.image !== prevProps.data.image) {\r\n            try {\r\n                this.setState({ image: this.props.data.image });\r\n            } catch (err) {\r\n                console.log(err);\r\n            }\r\n        }\r\n    }\r\n\r\n    fileChangedHandler(event) {\r\n        let fileInput = false;\r\n        if (event.target.files[0]) {\r\n            fileInput = true;\r\n        }\r\n        if (!fileInput) return;\r\n        try {\r\n            Resizer.imageFileResizer(\r\n                event.target.files[0],\r\n                280,\r\n                280,\r\n                \"JPEG\",\r\n                100,\r\n                0,\r\n                (uri) => {\r\n                    // console.log(uri);\r\n                    this.setState({ image: uri });\r\n                    if (this.props.onChange) {\r\n                        this.props.onChange({\r\n                            name: \"image\",\r\n                            value: uri\r\n                        });\r\n                    }\r\n                },\r\n                \"base64\"\r\n            );\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\" cover-big media\">\r\n                <label htmlFor=\"photo\">{this.props.title}</label>\r\n                <img\r\n                    id=\"photo\"\r\n                    className=\"form-control media-object img-thumbnail cover-big\"\r\n                    src={this.state.image}\r\n                    alt={this.props.data.name}\r\n                />\r\n                <div className=\"mt-2\">\r\n                    <input\r\n                        type=\"file\"\r\n                        accept=\"image/*\"\r\n                        multiple=\"false\"\r\n                        style={{ display: \"none\" }}\r\n                        onChange={this.fileChangedHandler}\r\n                        ref={(fileInput) => (this.fileInput = fileInput)}\r\n                    />\r\n                    <button\r\n                        className=\"btn btn-outline-secondary w-100\"\r\n                        onClick={() => this.fileInput.click()}\r\n                        disabled={!this.props.canLoad}\r\n                    >\r\n                        Загрузить {this.props.title.toLowerCase()}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nLoadImage.defaultProps = {\r\n    canLoad: true,\r\n    title: \"Имидж\"\r\n};\r\n\r\nLoadImage.propTypes = {\r\n    title: PropTypes.string,\r\n    canLoad: PropTypes.bool.isRequired,\r\n    data: PropTypes.object.isRequired,\r\n    onChange: PropTypes.func\r\n};\r\n\r\nexport default LoadImage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { validator } from \"../../../../utils/validator\";\r\nimport TextEdit from \"../../../common/form/textEdit\";\r\nimport SelectEdit from \"../../../common/form/selectEdit\";\r\nimport RadioEdit from \"../../../common/form/radioEdit\";\r\n\r\nimport PasswordControl from \"./passwordControl\";\r\nimport RoleControl from \"./roleControl\";\r\n\r\nimport { getRoles, loadRoles } from \"../../../../store/roles\";\r\nimport {\r\n    getUser,\r\n    getUsersState,\r\n    loadUsers,\r\n    updateUser\r\n} from \"../../../../store/users\";\r\nimport { getAuth } from \"../../../../store/auth\";\r\nimport LoadImage from \"../../../common/form/loadImage\";\r\n\r\nconst defaultData = {\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    sex: \"male\",\r\n    role: \"user\",\r\n    image: \"\"\r\n};\r\n\r\nconst validatorConfig = {\r\n    email: {\r\n        isRequired: {\r\n            message: \"Электронная почта обязательна для заполнения\"\r\n        },\r\n        isEmail: {\r\n            message: \"Email введен некорректно\"\r\n        }\r\n    },\r\n    password: {\r\n        isRequired: {\r\n            message: \"Пароль обязателен для заполнения\"\r\n        },\r\n        isCapitalSymbol: {\r\n            message: \"Пароль должен содержать хотя бы одну заглавную букву\"\r\n        },\r\n        isContainDigit: {\r\n            message: \"Пароль должен содержать хотя бы одно число\"\r\n        },\r\n        min: {\r\n            message: \"Пароль должен состоять минимум из 8 символов\",\r\n            value: 8\r\n        }\r\n    },\r\n    name: {\r\n        isRequired: {\r\n            message: \"Введите имя пользователя\"\r\n        }\r\n    },\r\n    role: {\r\n        isRequired: {\r\n            message: \"Введите роль пользователя\"\r\n        }\r\n    }\r\n};\r\n\r\nconst UserEditPage = () => {\r\n    const dispatch = useDispatch();\r\n    const { userId } = useParams();\r\n    const { authUser } = useSelector(getAuth());\r\n    const user = useSelector(getUser(userId));\r\n    const sameUser = authUser && authUser._id === userId;\r\n\r\n    const { isLoading, isUpdated, error } = useSelector(getUsersState());\r\n\r\n    const roles = useSelector(getRoles());\r\n    const [data, setData] = useState(defaultData);\r\n\r\n    useEffect(() => {\r\n        if (!user) {\r\n            dispatch(loadUsers(userId));\r\n        }\r\n        if (roles.length === 0) {\r\n            dispatch(loadRoles());\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setData({ ...user });\r\n        }\r\n    }, [user]);\r\n\r\n    const [errors, setErrors] = useState({});\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const isValid = validate();\r\n        if (!isValid) return;\r\n        dispatch(updateUser(data));\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isLoading) {\r\n            validate();\r\n        }\r\n    }, [data]);\r\n\r\n    const handleChange = (target) => {\r\n        setData((prevState) => ({\r\n            ...prevState,\r\n            [target.name]: target.value\r\n        }));\r\n    };\r\n    const validate = () => {\r\n        const errors = validator(data, validatorConfig);\r\n        setErrors(errors);\r\n        return Object.keys(errors).length === 0;\r\n    };\r\n    const isValid = Object.keys(errors).length === 0;\r\n    const changed = JSON.stringify(user) !== JSON.stringify(data);\r\n\r\n    const handleShowPassword = () => {\r\n        const newData = { ...data };\r\n        if (newData.new_password) {\r\n            delete newData.new_password;\r\n            newData.password = user.password;\r\n        } else {\r\n            newData.password = \"\";\r\n            newData.new_password = true;\r\n        }\r\n        setData(newData);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"col-md-6\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-auto\">\r\n                        <LoadImage\r\n                            title=\"Аватар\"\r\n                            data={data}\r\n                            canLoad={sameUser}\r\n                            onChange={handleChange}\r\n                        />\r\n                    </div>\r\n                    <div className=\"col\">\r\n                        <form onSubmit={handleSubmit}>\r\n                            <TextEdit\r\n                                label=\"Имя\"\r\n                                name=\"name\"\r\n                                value={data.name}\r\n                                onChange={handleChange}\r\n                                error={errors.name}\r\n                                readOnly={!sameUser}\r\n                            />\r\n                            <TextEdit\r\n                                label=\"Электронная почта\"\r\n                                name=\"email\"\r\n                                value={data.email}\r\n                                onChange={handleChange}\r\n                                error={errors.email}\r\n                                readOnly={!sameUser}\r\n                            />\r\n                            <PasswordControl\r\n                                userId={data._id}\r\n                                onShow={handleShowPassword}\r\n                                hideIf={isUpdated}\r\n                            >\r\n                                <TextEdit\r\n                                    label=\"Новый пароль\"\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    value={data.password}\r\n                                    onChange={handleChange}\r\n                                    error={errors.password}\r\n                                />\r\n                            </PasswordControl>\r\n                            <RoleControl userId={data._id}>\r\n                                <SelectEdit\r\n                                    label=\"Роль пользователя\"\r\n                                    defaultOption=\"Выбрать...\"\r\n                                    defaultValue={data.role}\r\n                                    options={roles.map((role) => ({\r\n                                        label: role.name,\r\n                                        value: role._id\r\n                                    }))}\r\n                                    onChange={handleChange}\r\n                                    name=\"role\"\r\n                                    value={data.role}\r\n                                    error={errors.role}\r\n                                    readOnly={sameUser}\r\n                                />\r\n                            </RoleControl>\r\n                            <RadioEdit\r\n                                options={[\r\n                                    { name: \"Мужчина\", value: \"male\" },\r\n                                    { name: \"Женщина\", value: \"female\" }\r\n                                ]}\r\n                                value={data.sex}\r\n                                name=\"sex\"\r\n                                onChange={handleChange}\r\n                                label=\"Пол пользователя\"\r\n                                readOnly={!sameUser}\r\n                            />\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={!(isValid && changed)}\r\n                                className=\"btn btn-primary w-100 mx-auto\"\r\n                            >\r\n                                Обновить\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <div className=\"card-footer mt-3\">\r\n                    <span className=\"me-2\">Статус:</span>\r\n                    {changed && (\r\n                        <span className=\"text-primary\">Данные изменены...</span>\r\n                    )}\r\n                    {error && <span className=\"text-danger\">{error}</span>}\r\n                    {isUpdated && (\r\n                        <span className=\"text-success\">\r\n                            Информация сохранена...\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default UserEditPage;\r\n","import UserOrders from \"./userOrders\";\r\nexport default UserOrders;\r\n","import classNames from \"classnames\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateSetting } from \"../../../../store/setting\";\r\n\r\nconst UserOrders = () => {\r\n    const dispatch = useDispatch();\r\n\r\n    const orderName = \"orders\";\r\n    const selectedTab = useSelector(\r\n        (state) => state.setting.config[orderName].selectedTab\r\n    );\r\n\r\n    const onItemSelect = (item) => {\r\n        dispatch(\r\n            updateSetting(orderName, {\r\n                selectedTab: item\r\n            })\r\n        );\r\n    };\r\n\r\n    return (\r\n        // <div className=\"card\">\r\n        //     <div className=\"card-body\">\r\n        <div className=\"nav nav-tabs\">\r\n            <div className=\"nav-item\">\r\n                <span\r\n                    className={classNames({\r\n                        \"nav-link\": true,\r\n                        active: selectedTab === \"current\"\r\n                    })}\r\n                    aria-current=\"page\"\r\n                    onClick={() => onItemSelect(\"current\")}\r\n                    role=\"button\"\r\n                >\r\n                    Текущие\r\n                </span>\r\n            </div>\r\n            <div className=\"nav-item\">\r\n                <span\r\n                    className={classNames({\r\n                        \"nav-link\": true,\r\n                        active: selectedTab === \"archive\"\r\n                    })}\r\n                    aria-current=\"page\"\r\n                    onClick={() => onItemSelect(\"archive\")}\r\n                    role=\"button\"\r\n                >\r\n                    Архив\r\n                </span>\r\n            </div>\r\n        </div>\r\n        //     </div>\r\n        // </div>\r\n    );\r\n};\r\n\r\nexport default UserOrders;\r\n","export const pathes = {\r\n    editPath: \"edit\",\r\n    ordersPath: \"orders\"\r\n};\r\nexport const menu = {\r\n    name: \"users\",\r\n    caption: { name: \"Профиль пользователя\", icon: \"bi-person\" },\r\n    items: [\r\n        { path: pathes.ordersPath, name: \"ЗАКАЗЫ\", icon: \"bi-cash\" },\r\n        { path: pathes.editPath, name: \"ИЗМЕНИТЬ ДАННЫЕ\", icon: \"bi-gear\" }\r\n    ],\r\n    afterChildren: true\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { getUser, loadUsers } from \"../../../../store/users\";\r\nimport { loadRoles } from \"../../../../store/roles\";\r\nimport UserSideBar from \"./userSidebar\";\r\nimport { updateSetting } from \"../../../../store/setting\";\r\nimport UserEditPage from \"./userEditPage\";\r\nimport UserOrders from \"../orders\";\r\nimport WorkScreen from \"../../../common/wrappers/workScreen\";\r\nimport { pathes, menu } from \"./menu\";\r\nimport ContentWrapper from \"../../../common/wrappers/content\";\r\n\r\nconst UserPage = ({ userId }) => {\r\n    const selectedMenu = useSelector(\r\n        (state) => state.setting.config[menu.name].selectedMenu\r\n    );\r\n\r\n    // const history = useHistory();\r\n    const dispatch = useDispatch();\r\n    const user = useSelector(getUser(userId));\r\n    console.log(\"UserPage user 1\", user);\r\n    useEffect(() => {\r\n        if (!user) {\r\n            console.log(\"UserPage user 2\", user);\r\n            dispatch(loadRoles());\r\n            dispatch(loadUsers(userId));\r\n        }\r\n    }, [user]);\r\n\r\n    const onItemSelect = (item) => {\r\n        dispatch(\r\n            updateSetting(menu.name, {\r\n                selectedMenu: item\r\n            })\r\n        );\r\n    };\r\n\r\n    return (\r\n        <WorkScreen>\r\n            <UserSideBar\r\n                user={user}\r\n                menu={menu}\r\n                selected={selectedMenu}\r\n                onItemSelect={onItemSelect}\r\n            />\r\n            <ContentWrapper menu={selectedMenu}>\r\n                {selectedMenu.path === pathes.editPath && <UserEditPage />}\r\n                {selectedMenu.path === pathes.ordersPath && <UserOrders />}\r\n            </ContentWrapper>\r\n        </WorkScreen>\r\n    );\r\n};\r\n\r\nUserPage.propTypes = {\r\n    userId: PropTypes.string.isRequired\r\n};\r\n\r\nexport default UserPage;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Redirect, useParams } from \"react-router-dom\";\r\n\r\nimport {\r\n    UsersListPage,\r\n    UserPage,\r\n    UserEditPage\r\n} from \"../components/page/usersPages\";\r\nimport { getAuth } from \"../store/auth\";\r\n\r\nconst Users = () => {\r\n    const params = useParams();\r\n    const { userId, edit } = params;\r\n    const { authUser, isAdmin } = useSelector(getAuth());\r\n\r\n    return (\r\n        <>\r\n            {userId ? (\r\n                edit ? (\r\n                    userId === authUser._id || isAdmin ? (\r\n                        <UserEditPage />\r\n                    ) : (\r\n                        <Redirect to={`/users/${authUser._id}/edit`} />\r\n                    )\r\n                ) : (\r\n                    <UserPage userId={userId} />\r\n                )\r\n            ) : (\r\n                <UsersListPage />\r\n            )}\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Users;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getAuth } from \"../../store/auth\";\r\n\r\nfunction ProtectedRoute({ component: Component, children, ...rest }) {\r\n    const { authUser } = useSelector(getAuth());\r\n\r\n    return (\r\n        <Route\r\n            {...rest}\r\n            render={(props) => {\r\n                if (!authUser) {\r\n                    return (\r\n                        <Redirect\r\n                            to={{\r\n                                pathname: \"/login\",\r\n                                state: {\r\n                                    from: props.location\r\n                                }\r\n                            }}\r\n                        />\r\n                    );\r\n                }\r\n\r\n                return Component ? <Component {...props} /> : children;\r\n            }}\r\n        />\r\n    );\r\n}\r\nProtectedRoute.propTypes = {\r\n    component: PropTypes.func,\r\n    location: PropTypes.object,\r\n    match: PropTypes.object,\r\n    children: PropTypes.oneOfType([\r\n        PropTypes.arrayOf(PropTypes.node),\r\n        PropTypes.node\r\n    ])\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { signOut } from \"../store/auth\";\r\nconst LogOut = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n\r\n    useEffect(() => {\r\n        dispatch(signOut());\r\n        history.push(\"/\");\r\n    }, []);\r\n    return <p>Log Out</p>;\r\n};\r\n\r\nexport default LogOut;\r\n","import React, { useEffect } from \"react\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\nimport configureStore from \"./store\";\r\n\r\nimport { getAuthLoading, loadAuthUser } from \"./store/auth\";\r\nimport { loadSetting } from \"./store/setting\";\r\nimport { loadBasket } from \"./store/basket\";\r\nimport { loadRoles } from \"./store/roles\";\r\nimport { loadCategories } from \"./store/categories\";\r\nimport { loadReminders } from \"./store/reminders\";\r\n\r\nimport NavBar from \"./components/ui/navbar\";\r\nimport Basket from \"./layouts/basket\";\r\nimport Login from \"./layouts/login\";\r\nimport Main from \"./layouts/main\";\r\nimport Admin from \"./layouts/admin\";\r\nimport Users from \"./layouts/users\";\r\nimport ProtectedRoute from \"./components/common/protectedRoute\";\r\nimport LogOut from \"./layouts/logOut\";\r\n\r\nexport const store = configureStore();\r\n\r\nfunction App() {\r\n    const dispatch = useDispatch();\r\n    const isLoading = useSelector(getAuthLoading());\r\n\r\n    useEffect(() => {\r\n        dispatch(loadSetting());\r\n        dispatch(loadBasket());\r\n        dispatch(loadAuthUser());\r\n        dispatch(loadRoles());\r\n        dispatch(loadCategories());\r\n    }, []);\r\n    useEffect(() => {\r\n        dispatch(loadReminders());\r\n    }, [isLoading]);\r\n\r\n    return (\r\n        <div>\r\n            <NavBar />\r\n            {!isLoading && (\r\n                <Switch>\r\n                    <Route path=\"/basket\" component={Basket} />\r\n                    <ProtectedRoute path=\"/admin\" exact component={Admin} />\r\n                    <ProtectedRoute\r\n                        path=\"/users/:userId/:edit?\"\r\n                        component={Users}\r\n                    />\r\n                    <Route path=\"/login/:type?\" component={Login} />\r\n                    <Route path=\"/logout\" component={LogOut} />\r\n                    <Route path=\"/\" exact component={Main} />\r\n                    <Route path=\"/:productId\" component={Main} />\r\n                    <Redirect to=\"/\" />\r\n                </Switch>\r\n            )}\r\n            <ToastContainer />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Router, BrowserRouter } from \"react-router-dom\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport \"./index.css\";\r\nimport { Provider } from \"react-redux\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nimport App, { store } from \"./App\";\r\nimport history from \"./utils/history\";\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n        <BrowserRouter>\r\n            <Provider store={store}>\r\n                <Router history={history}>\r\n                    <App />\r\n                </Router>\r\n            </Provider>\r\n        </BrowserRouter>\r\n    </React.StrictMode>,\r\n    document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}